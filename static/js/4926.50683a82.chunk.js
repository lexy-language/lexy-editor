/*! For license information please see 4926.50683a82.chunk.js.LICENSE.txt */
(self.webpackChunklexy_editor=self.webpackChunklexy_editor||[]).push([[4926],{18(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createEnumCode=function(e){if(null==e)throw new Error("Component token not enumDefinition");const t=(0,i.enumClassName)(e.name.value),n=new s.CodeWriter(a.renderExpression);n.openScope();for(const r of e.members)n.writeLine("".concat(r.name,': "').concat(e.name.value,".").concat(r.name,'",'));return function(e,t){t.openScope("".concat(o.LexyCodeConstants.validateMethod,": function ").concat(o.LexyCodeConstants.validateMethod,"(name, value, optional, validationErrors)")),t.openScope("if (value === null || value === undefined)"),t.openScope("if (!optional)"),t.writeLine("validationErrors.push(`'${name}' should have a '".concat(e.name.value,"' value. Value missing.`);")),t.closeScope(),t.writeLine("return;"),t.closeScope(),t.openScope("if (typeof value !== 'string' && !(value instanceof String))"),t.writeLine("validationErrors.push(`'${name}' should have a '".concat(e.name.value,"' value. Invalid type: '${toString.call(value)}`);")),t.writeLine("return;"),t.closeScope(),t.writeLine("if (");for(let n=0;n<e.members.length;n++){const r=e.members[n];n<e.members.length-1?t.writeLine('    value !== "'.concat(e.name.value,".").concat(r.name,'" &&')):t.writeLine('    value !== "'.concat(e.name.value,".").concat(r.name,'"'))}t.openScope("   )"),t.writeLine("validationErrors.push(`'${name}' should have a '".concat(e.name.value,"' value. Invalid value: '${value}'`);")),t.closeScope(),t.closeScope()}(e,n),n.closeScope(),new r.GeneratedType(r.GeneratedTypeKind.Enum,e,t,n.toString())};const r=n(13502),i=n(45375),s=n(69445),o=n(2013),a=n(61388)},53(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e){this.values=new Array,this.add(e)}add(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=n.indentString(t);return this.values.push(r+e),this}static indentString(e){return e>0?" ".repeat(e):""}list(e){if(void 0==e)return this;const t=n.indentString(2);for(let n of e)this.values.push(t+n);return this}array(){return this.values}static new(e){return new n(e)}}t.default=n},115(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.Include=void 0;const i=n(77148),s=n(67314),o=n(15632);class a{get isProcessed(){return this.isProcessedValue}constructor(e,t){this.isProcessedValue=!1,this.reference=t,this.fileName=e}static isValid(e){return e.tokens.isKeyword(0,i.Keywords.Include)}static parse(e){let t=e.line,n=t.tokens;if(2!=n.length||!n.isQuotedString(1))return e.logger.fail(t.lineStartReference(),"Invalid syntax. Expected: 'include `FileName`"),null;let r=n.tokenValue(1);return null==r?null:new a(r,t.lineStartReference())}process(e,t){return r(this,void 0,void 0,function*(){if(this.isProcessedValue=!0,(0,s.isNullOrEmpty)(this.fileName))return t.logger.fail(this.reference,"No include file name specified."),null;let n=t.fileSystem.getDirectoryName(e),r=t.fileSystem.getFullPath(n),i="".concat(t.fileSystem.combine(r,this.fileName),".").concat(o.LexySourceDocument.fileExtension);return(yield t.fileSystem.fileExists(i))?i:(t.logger.fail(this.reference,"Invalid include file name '".concat(this.fileName,"'")),null)})}}t.Include=a},1246(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newParseExpressionFunctionsFailed=function(e){return{state:"failed",errorMessage:e}},t.newParseExpressionFunctionsSuccess=function(e){return{state:"success",result:e}}},1821(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newParsableTokenFailed=function(e,t){return{state:"failed",errorMessage:t,reference:e}},t.newParsableTokenSuccess=function(e){return{state:"success",result:e}}},2013(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LexyCodeConstants=void 0;class n{}t.LexyCodeConstants=n,n.resultsType="__Result",n.parametersType="__Parameters",n.rowType="__Row",n.validateMethod="__validate",n.runMethod="__run",n.inlineMethod="__inline",n.parameterVariable="__parameters",n.resultsVariable="__result",n.contextVariable="__context",n.valuesVariable="__values",n.environmentVariable="__environment",n.functionClassPrefix="function__",n.tableClassPrefix="table__",n.enumClassPrefix="enum__",n.typeClassPrefix="type__"},2329(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TableSeparatorToken=void 0,t.instanceOfTableSeparatorToken=o,t.asTableSeparatorToken=function(e){return o(e)?e:null};const r=n(6248),i=n(68784),s=n(71148);function o(e){return(null===e||void 0===e?void 0:e.tokenType)==s.TokenType.TableSeparatorToken}class a extends r.ParsableToken{constructor(e){super(e),this.tokenIsLiteral=!1,this.tokenType=s.TokenType.TableSeparatorToken}parse(e){return(0,i.newParseTokenFinishedResult)(!0)}endOfLine(){return(0,i.newParseTokenFinishedResult)(!0)}}t.TableSeparatorToken=a},2393(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpectErrors=void 0;const r=n(15459),i=n(3176);class s extends i.ErrorsNode{constructor(e){super(e),this.nodeType=r.NodeType.ScenarioExpectErrors}}t.ExpectErrors=s},2461(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Comments=void 0;const r=n(59715),i=n(15459);class s extends r.ParsableNode{constructor(e){super(e),this.lines=[],this.nodeType=i.NodeType.Comments}parse(e){if(!e.validateTokens("Comments").count(1).comment(0).isValid)return this;let t=e.line.tokens.tokenValue(0);return null!=t&&this.lines.push(t),this}getChildren(){return[]}validate(e){}}t.Comments=s},3019(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFunctionCode=function(e){const t=(0,s.asFunction)(e);if(null==t)throw new Error("Component token not Function");const n=new u.CodeWriter(a.renderExpression);return function(e,t){var n,s;const u=(0,o.functionClassName)(e.nodeName);return t.openScope("function ".concat(u,"()")),function(e){e.openScope("function ".concat(r.LexyCodeConstants.validateMethod,"(").concat(r.LexyCodeConstants.parameterVariable,")")),e.writeLine("const validationErrors = [];"),e.writeLine("".concat(r.LexyCodeConstants.parametersType,".").concat(r.LexyCodeConstants.validateMethod,"(null, ").concat(r.LexyCodeConstants.parameterVariable,", validationErrors);")),e.openScope("if (validationErrors.length > 0)"),e.writeLine('  throw new Error("Validation failed: \\n" + validationErrors.join("\\n"));'),e.closeScope(),e.closeScope(),e.writeLine()}(t),function(e,t){var n,i;t.openScope("function ".concat(r.LexyCodeConstants.runMethod,"(").concat(r.LexyCodeConstants.parameterVariable,", ").concat(r.LexyCodeConstants.contextVariable,")")),function(e){e.writeLine("const ".concat(r.LexyCodeConstants.resultsVariable," = new ").concat(r.LexyCodeConstants.resultsType,"();"))}(t),t.writeLine("".concat(r.LexyCodeConstants.contextVariable,'.setFileName("').concat(e.reference.file.fileName,'");')),t.writeLine("".concat(r.LexyCodeConstants.contextVariable,'.openScope("Execute: ').concat(e.nodeName,'", ').concat(e.reference.lineNumber,");")),t.writeLine("".concat(r.LexyCodeConstants.contextVariable,'.log("Parameters", ').concat(null===(n=e.parameters)||void 0===n?void 0:n.reference.lineNumber,", ").concat(r.LexyCodeConstants.parameterVariable,");")),t.writeLine(),function(e,t){var n;(0,a.renderExpressions)(null===(n=e.code)||void 0===n?void 0:n.expressions,!1,t)}(e,t),t.writeLine("".concat(r.LexyCodeConstants.contextVariable,'.log("Results",  ').concat(null===(i=e.results)||void 0===i?void 0:i.reference.lineNumber,", ").concat(r.LexyCodeConstants.resultsVariable,");")),t.writeLine("".concat(r.LexyCodeConstants.contextVariable,".closeScope();")),t.writeLine("return ".concat(r.LexyCodeConstants.resultsVariable,";")),t.closeScope(),t.writeLine()}(e,t),function(e,t){t.openScope("function ".concat(r.LexyCodeConstants.inlineMethod,"(").concat(r.LexyCodeConstants.runMethod,")")),t.write("return function ".concat(r.LexyCodeConstants.inlineMethod,"(")),function(e,t){for(let n=0;n<e.parameters.variables.length;n++){const r=e.parameters.variables[n];t.write(r.name),t.write(", ")}}(e,t),t.openScope("".concat(r.LexyCodeConstants.contextVariable,")")),function(e,t){e.writeLine("const ".concat(r.LexyCodeConstants.parameterVariable," = new ").concat(r.LexyCodeConstants.runMethod,".").concat(r.LexyCodeConstants.parametersType,"();"));for(let n=0;n<t.parameters.variables.length;n++){const i=t.parameters.variables[n];e.writeLine("".concat(r.LexyCodeConstants.parameterVariable,".").concat(i.name," = ").concat(i.name,";"))}}(t,e),t.writeLine("return ".concat(r.LexyCodeConstants.runMethod,"(").concat(r.LexyCodeConstants.parameterVariable,", ").concat(r.LexyCodeConstants.contextVariable,");")),t.closeScope(),t.closeScope(),t.writeLine()}(e,t),(0,l.createVariableClass)("".concat(e.nodeName,".Parameters"),r.LexyCodeConstants.parametersType,null===(n=e.parameters)||void 0===n?void 0:n.variables,t),(0,l.createVariableClass)("".concat(e.nodeName,".Results"),r.LexyCodeConstants.resultsType,null===(s=e.results)||void 0===s?void 0:s.variables,t),t.writeLine("".concat(r.LexyCodeConstants.runMethod,".").concat(r.LexyCodeConstants.inlineMethod," = ").concat(r.LexyCodeConstants.inlineMethod,"(").concat(r.LexyCodeConstants.runMethod,");")),t.writeLine("".concat(r.LexyCodeConstants.runMethod,".").concat(r.LexyCodeConstants.parametersType," = ").concat(r.LexyCodeConstants.parametersType,";")),t.writeLine("".concat(r.LexyCodeConstants.runMethod,".").concat(r.LexyCodeConstants.resultsType," = ").concat(r.LexyCodeConstants.resultsType,";")),t.writeLine("".concat(r.LexyCodeConstants.runMethod,".").concat(r.LexyCodeConstants.validateMethod," = ").concat(r.LexyCodeConstants.validateMethod,";")),t.writeLine("return ".concat(r.LexyCodeConstants.runMethod,";")),t.closeScope("();"),new i.GeneratedType(i.GeneratedTypeKind.Function,e,u,t.toString())}(t,n)};const r=n(2013),i=n(13502),s=n(22697),o=n(45375),a=n(61388),l=n(38184),u=n(69445)},3176(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorsNode=void 0;const r=n(59715),i=n(60885);class s extends r.ParsableNode{get messages(){return this.messagesValue}get hasValues(){return this.messages.length>0}constructor(e){super(e),this.messagesValue=[]}parse(e){let t=e.line;if(!e.validateTokens(this.nodeType).count(1).quotedString(0).isValid)return this;const n=t.tokens.token(0,i.asQuotedLiteralToken);if(null==n)throw new Error("No token found.");return this.messagesValue.push(n.value),this}getChildren(){return[]}validate(e){}}t.ErrorsNode=s},3378(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Types=void 0,function(e){e.Number="number",e.String="string",e.Date="date"}(n||(t.Types=n={}))},4230(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoMapLexyFunctionStatement=void 0;const r=n(2013),i=n(47760),s=n(70330),o=n(57159);class a{static matches(e){return(0,o.instanceOfSpreadAssignmentExpression)(e)}static render(e,t){s.Assert.notNull(e,"functionCallExpression");let n="".concat(r.LexyCodeConstants.resultsVariable,"_").concat(t.currentLine);a.renderRunFunction(e,n,t),i.ExtractFunctionStatement.renderExtract(s.Assert.notNull(e.mapping,"expression.mapping"),n,t)}static renderRunFunction(e,t,n){n.startLine("let ".concat(t," = ")),n.renderExpression(e.assignment),n.endLine(";")}}t.AutoMapLexyFunctionStatement=a},4707(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElseifExpression=void 0,t.instanceOfElseifExpression=d,t.asElseifExpression=function(e){return d(e)?e:null};const r=n(9313),i=n(59715),s=n(50917),o=n(42539),a=n(77148),l=n(82140),u=n(15459),c=n(43056);function d(e){return(null===e||void 0===e?void 0:e.nodeType)==u.NodeType.ElseifExpression}class p extends r.Expression{get trueExpressions(){return this.trueExpressionsValues.asArray()}constructor(e,t,n,r){super(t,n),this.isParsableNode=!0,this.isChildExpression=!0,this.nodeType=u.NodeType.ElseifExpression,this.condition=e,this.trueExpressionsValues=new s.ExpressionList(n,r)}parse(e){let t=this.trueExpressionsValues.parse(e);if("success"!=t.state)return this;const n=(0,i.asParsableNode)(t.result);return null!=n?n:this}getChildren(){return[this.condition,this.trueExpressionsValues]}static parse(e,t){let n=e.tokens;if(!p.isValid(n))return(0,o.newParseExpressionFailed)("ElseifExpression","Not valid.");if(1==n.length)return(0,o.newParseExpressionFailed)("ElseifExpression","No condition found");let r=n.tokensFrom(1),i=t.parse(r,e.line);if("success"!=i.state)return i;let s=e.createReference(),a=new p(i.result,e,s,t);return(0,o.newParseExpressionSuccess)(a)}static isValid(e){return e.isKeyword(0,a.Keywords.Elseif)}validate(e){let t=this.condition.deriveType(e);null!=t&&t.equals(l.PrimitiveType.boolean)||e.logger.fail(this.reference,"'if' condition expression should be 'boolean', is of wrong type '".concat(t,"'."))}deriveType(e){return null}validateParentExpression(e,t){return null!=e&&e.nodeType==u.NodeType.IfExpression||(t.logger.fail(this.reference,"'elseif' should be following an 'if' statement. No 'if' statement found."),!1)}usedVariables(){return(0,c.getReadVariableUsage)(this.condition)}}t.ElseifExpression=p},5338(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderVariableMappingVariableSyntax=function(e,t){if(e.variableSource==i.VariableSource.Code)t.write(e.variableName);else if(e.variableSource==i.VariableSource.Results)t.write("".concat(r.LexyCodeConstants.resultsVariable,".").concat(e.variableName));else{if(e.variableSource!=i.VariableSource.Parameters)throw new Error("Invalid source: ".concat(e.variableSource));t.write("".concat(r.LexyCodeConstants.parameterVariable,".").concat(e.variableName))}};const r=n(2013),i=n(41486)},5627(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdentifierPath=void 0;const r=n(67314),i=n(45014);class s{get rootIdentifier(){return this.path[0]}get hasChildIdentifiers(){return this.path.length>1}get parts(){return this.path.length}constructor(e){this.path=e}fullPath(){return this.path.join(".")}lastPart(){return this.path[this.path.length-1]}toString(){return this.fullPath()}childrenReference(){const e=this.path.slice(1);return new s(e)}append(e){const t=[...this.path,...e];return new s(t)}withoutLastPart(){if(this.parts<=1)throw new Error("Parts <= 1");return new s((0,i.take)(this.path,this.parts-1))}static parse(e){if(!e)throw new Error("Invalid empty identifier reference.");const t=Array();return(0,i.addRange)(t,e,this.splitBySeparator),new s(e)}static parseString(e){if((0,r.isNullOrEmpty)(e))throw new Error("Invalid empty identifier reference.");const t=this.splitBySeparator(e);return new s(t)}static splitBySeparator(e){return e.split(".")}}t.IdentifierPath=s},5697(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BooleanLiteralToken=void 0,t.instanceOfBooleanLiteral=a,t.asBooleanLiteral=function(e){return a(e)?e:null};const r=n(41844),i=n(40350),s=n(82140),o=n(71148);function a(e){return(null===e||void 0===e?void 0:e.tokenType)==o.TokenType.BooleanLiteralToken}class l extends r.Token{constructor(e,t){super(t),this.tokenIsLiteral=!0,this.tokenType=o.TokenType.BooleanLiteralToken,this.booleanValue=e}get typedValue(){return this.booleanValue}get value(){return this.booleanValue?i.TokenValues.BooleanTrue:i.TokenValues.BooleanFalse}deriveType(e){return s.PrimitiveType.boolean}static parse(e,t){switch(e){case i.TokenValues.BooleanTrue:return new l(!0,t);case i.TokenValues.BooleanFalse:return new l(!1,t);default:throw new Error("Couldn't parse boolean: ".concat(e))}}static isValid(e){return e==i.TokenValues.BooleanTrue||e==i.TokenValues.BooleanFalse}toString(){return this.value}}t.BooleanLiteralToken=l},5932(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VariableTypeDeclarationParser=void 0;const r=n(77148),i=n(53946),s=n(27449),o=n(46384),a=n(54450);t.VariableTypeDeclarationParser=class{static parse(e,t){return e==r.Keywords.ImplicitVariableTypeDeclaration?new i.ImplicitVariableTypeDeclaration(t):s.TypeNames.contains(e)?new o.PrimitiveVariableTypeDeclaration(e,t):new a.ObjectVariableTypeDeclaration(e,t)}}},6180(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BracketedExpression=void 0,t.instanceOfBracketedExpression=l,t.asBracketedExpression=function(e){return l(e)?e:null};const r=n(9313),i=n(42539),s=n(15229),o=n(15459),a=n(71148);function l(e){return(null===e||void 0===e?void 0:e.nodeType)==o.NodeType.BracketedExpression}class u extends r.Expression{constructor(e,t,n,r){super(n,r),this.nodeType=o.NodeType.BracketedExpression,this.functionName=e,this.expression=t}static parse(e,t){let n=e.tokens;if(!u.isValid(n))return(0,i.newParseExpressionFailed)("BracketedExpression","Not valid.");let r=u.findMatchingClosingBracket(n);if(-1==r)return(0,i.newParseExpressionFailed)("BracketedExpression","No closing bracket found.");let s=n.tokenValue(0);if(null==s)return(0,i.newParseExpressionFailed)("BracketedExpression","Invalid function name.");let o=n.tokensRange(2,r-1),a=t.parse(o,e.line);if("success"!=a.state)return a;let l=e.createReference(),c=new u(s,a.result,e,l);return(0,i.newParseExpressionSuccess)(c)}static isValid(e){return e.length>1&&e.isTokenType(0,a.TokenType.StringLiteralToken)&&e.isOperatorToken(1,s.OperatorType.OpenBrackets)}static findMatchingClosingBracket(e){let t=0;for(let n=0;n<e.length;n++){let r=e.get(n);if("OperatorToken"!=r.tokenType)continue;const i=r;if(i.type==s.OperatorType.OpenBrackets)t++;else if(i.type==s.OperatorType.CloseBrackets&&(t--,0==t))return n}return-1}getChildren(){return[this.expression]}validate(e){}deriveType(e){return this.expression.deriveType(e)}}t.BracketedExpression=u},6248(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParsableToken=void 0;const r=n(41844);class i extends r.Token{get value(){return this.valueBuilder.join("")}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e),this.valueBuilder=[null!=t?t:String.fromCharCode(e.value)]}appendValue(e){this.valueBuilder.push(String.fromCharCode(e))}appendString(e){this.valueBuilder.push(e)}}t.ParsableToken=i},8644(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnumDefinition=void 0,t.instanceOfEnumDefinition=u,t.asEnumDefinition=function(e){return u(e)?e:null};const r=n(58996),i=n(53150),s=n(85631),o=n(45014),a=n(8911),l=n(15459);function u(e){return(null===e||void 0===e?void 0:e.nodeType)==l.NodeType.EnumDefinition}class c extends r.ComponentNode{get nodeName(){return this.name.value}constructor(e,t){super(t),this.nodeType=l.NodeType.EnumDefinition,this.members=[],this.name=i.EnumName.parseName(e,t)}static parse(e,t){return new c(e,t)}parse(e){var t,n;let r=null!==(n=null===(t=(0,o.lastOrDefault)(this.members))||void 0===t?void 0:t.numberValue)&&void 0!==n?n:-1,i=s.EnumMember.parse(e,r);return null!=i&&this.members.push(i),this}getChildren(){return[this.name,...this.members]}validate(e){0!=this.members.length?a.DuplicateChecker.validate(e,e=>e.reference,e=>e.name,e=>"Enum member name should be unique. Duplicate name: '".concat(e.name,"'"),this.members):e.logger.fail(this.reference,"Enum has no members defined.")}containsMember(e){return(0,o.any)(this.members,t=>t.name==e)}}t.EnumDefinition=c},8911(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DuplicateChecker=void 0;const r=n(45014);t.DuplicateChecker=class{static validate(e,t,n,i,s){const o=new Array;for(const a of s){const s=n(a);(0,r.contains)(o,s)?(e.logger,e.logger.fail(t(a),i(a))):o.push(s)}}}},9026(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdentifierExpression=void 0,t.instanceOfIdentifierExpression=u,t.asIdentifierExpression=function(e){return u(e)?e:null};const r=n(9313),i=n(42539),s=n(15459),o=n(69536),a=n(71148),l=n(5627);function u(e){return(null===e||void 0===e?void 0:e.nodeType)==s.NodeType.IdentifierExpression}class c extends r.Expression{get variable(){return this.variableValue}constructor(e,t,n){super(t,n),this.variableValue=null,this.hasVariableReference=!0,this.nodeType=s.NodeType.IdentifierExpression,this.identifier=e}static parse(e,t){let n=e.tokens;if(!c.isValid(n))return(0,i.newParseExpressionFailed)("IdentifierExpression","Invalid expression");let r=n.tokenValue(0);if(!r)return(0,i.newParseExpressionFailed)("IdentifierExpression","Invalid token");let s=e.createReference(),o=new c(r,e,s);return(0,i.newParseExpressionSuccess)(o)}static isValid(e){return 1==e.length&&e.isTokenType(0,a.TokenType.StringLiteralToken)}getChildren(){return[]}validate(e){this.createVariableReference(e)}createVariableReference(e){const t=l.IdentifierPath.parseString(this.identifier);this.variableValue=e.variableContext.createVariableReference(this.reference,t,e),null==this.variableValue&&e.logger.fail(this.reference,"Invalid identifier: '".concat(t.fullPath(),"'"))}deriveType(e){return e.variableContext.getVariableTypeByName(this.identifier)}usedVariables(){return null!=this.variableValue?[o.VariableUsage.read(this.variableValue)]:[]}}t.IdentifierExpression=c},9313(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Expression=void 0,t.instanceOfExpression=i,t.asExpression=function(e){return i(e)?e:null};const r=n(59611);function i(e){return 1==(null===e||void 0===e?void 0:e.isExpression)}class s extends r.Node{constructor(e,t){super(t),this.isExpression=!0,this.source=e}toString(){let e=new Array;for(let t=0;t<this.source.tokens.length;t++){let n=this.source.tokens.get(t);e.push(n.value)}return e.join("")}usedVariables(){return[]}}t.Expression=s},9897(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceCodeDocument=void 0;const r=n(24535),i=n(59986);t.SourceCodeDocument=class{constructor(){this.code=[],this.file=new r.SourceFile("null"),this.currentLineValue=null,this.index=-1}get currentLine(){if(null==this.currentLineValue)throw new Error("No current line.");return this.currentLineValue}setCode(e,t){this.index=-1,this.file=new r.SourceFile(t),this.code=e.map((e,t)=>new i.Line(t,e,this.file))}hasMoreLines(){return this.index<this.code.length-1}nextLine(){if(this.index>=this.code.length)throw new Error("No more lines");return this.currentLineValue=this.code[++this.index],this.currentLineValue}reset(){this.currentLineValue=null}}},10825(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newArgumentTokenParseFailed=function(e){return{state:"failed",errorMessage:e}},t.newArgumentTokenParseSuccess=function(e){return{state:"success",result:e}}},11671(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionFactory=void 0;const r=n(93592),i=n(42539),s=n(50094),o=n(16736),a=n(45797),l=n(24069),u=n(20429),c=n(57159),d=n(34632),p=n(90223),h=n(6180),f=n(9026),m=n(32045),y=n(92310),v=n(46364),g=n(60059),T=n(45072),b=n(4707),w=n(74182);class x{parse(e,t){let n=new r.ExpressionSource(t,e);for(let r=0;r<x.factories.length;r++){const t=x.factories[r];if(t.criteria(e))return t.parse(n,this)}return(0,i.newParseExpressionFailed)("ExpressionFactory","Invalid expression: ".concat(e))}}t.ExpressionFactory=x,x.factories=[{criteria:s.IfExpression.isValid,parse:s.IfExpression.parse},{criteria:o.ElseExpression.isValid,parse:o.ElseExpression.parse},{criteria:b.ElseifExpression.isValid,parse:b.ElseifExpression.parse},{criteria:a.SwitchExpression.isValid,parse:a.SwitchExpression.parse},{criteria:l.CaseExpression.isValid,parse:l.CaseExpression.parse},{criteria:u.VariableDeclarationExpression.isValid,parse:u.VariableDeclarationExpression.parse},{criteria:w.SpreadExpression.isValid,parse:w.SpreadExpression.parse},{criteria:c.SpreadAssignmentExpression.isValid,parse:c.SpreadAssignmentExpression.parse},{criteria:d.AssignmentExpression.isValid,parse:d.AssignmentExpression.parse},{criteria:p.ParenthesizedExpression.isValid,parse:p.ParenthesizedExpression.parse},{criteria:h.BracketedExpression.isValid,parse:h.BracketedExpression.parse},{criteria:f.IdentifierExpression.isValid,parse:f.IdentifierExpression.parse},{criteria:m.MemberAccessExpression.isValid,parse:m.MemberAccessExpression.parse},{criteria:y.LiteralExpression.isValid,parse:y.LiteralExpression.parse},{criteria:v.BinaryExpression.isValid,parse:v.BinaryExpression.parse},{criteria:g.FunctionCallExpression.isValid,parse:T.FunctionCallExpressionParser.parse}]},12268(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tokenizer=void 0;const r=n(1821),i=n(22337),s=n(33948),o=n(61187),a=n(40350),l=n(60885),u=n(60516),c=n(85792),d=n(78417),p=n(22167),h=n(95318),f=n(20601),m=n(45014),y=[{value:a.TokenValues.Quote,factory:e=>new l.QuotedLiteralToken(e)},{value:a.TokenValues.Assignment,factory:e=>new u.OperatorToken(e)},{value:a.TokenValues.Addition,factory:e=>new u.OperatorToken(e)},{value:a.TokenValues.Subtraction,factory:e=>new u.OperatorToken(e)},{value:a.TokenValues.Multiplication,factory:e=>new u.OperatorToken(e)},{value:a.TokenValues.DivisionOrComment,factory:e=>new f.BuildCommentOrDivisionToken(e)},{value:a.TokenValues.Modulus,factory:e=>new u.OperatorToken(e)},{value:a.TokenValues.ArgumentSeparator,factory:e=>new u.OperatorToken(e)},{value:a.TokenValues.OpenParentheses,factory:e=>new u.OperatorToken(e)},{value:a.TokenValues.CloseParentheses,factory:e=>new u.OperatorToken(e)},{value:a.TokenValues.OpenBrackets,factory:e=>new u.OperatorToken(e)},{value:a.TokenValues.CloseBrackets,factory:e=>new u.OperatorToken(e)},{value:a.TokenValues.GreaterThan,factory:e=>new u.OperatorToken(e)},{value:a.TokenValues.LessThan,factory:e=>new u.OperatorToken(e)},{value:a.TokenValues.NotEqualStart,factory:e=>new u.OperatorToken(e)},{value:a.TokenValues.And,factory:e=>new u.OperatorToken(e)},{value:a.TokenValues.Or,factory:e=>new u.OperatorToken(e)},{value:a.TokenValues.Spread,factory:e=>new u.OperatorToken(e)}],v=[{isValid:h.isDigit,factory:e=>new c.NumberLiteralToken(null,e)},{isValid:h.isLetter,factory:e=>new d.BuildLiteralToken(e)},{isValid:h.isWhitespace,factory:e=>new p.WhitespaceToken(e)}];class g{tokenize(e){var t,n;let r=new Array,s=null;for(let o=0;o<e.content.length;o++){let n=e.character(o),a=!1;if(null!=s){let l=s.parse(n);switch(l.state){case"invalid":return(0,i.newTokenizeFailed)(e.lineReference(o),l.validationError);case"finished":r.push(null!==(t=l.newToken)&&void 0!==t?t:s),s=null,a=l.charProcessed;break;case"inProgress":if(null!=l.newToken&&(s=l.newToken,null==s))throw new Error("New token can only be a parsable token when in progress")}}if(null==s&&!a){let t=this.startToken(n,o,e);if("failed"===t.state)return(0,i.newTokenizeFailed)(e.lineEndReference(),t.errorMessage);s=t.result}}if(null!=s){let t=s.endOfLine();if("invalid"===t.state)return(0,i.newTokenizeFailed)(e.lineEndReference(),"Invalid token at end of line. ".concat(t.validationError));if("inProgress"===t.state)return(0,i.newTokenizeFailed)(e.lineEndReference(),"Parser error: result should be 'finished'");r.push(null!==(n=t.newToken)&&void 0!==n?n:s)}return(0,i.newTokenizeSuccess)(g.discardWhitespaceAndComments(r))}startToken(e,t,n){let i=e.value;for(let s of y)if(s.value==i)return(0,r.newParsableTokenSuccess)(s.factory(e));for(let s of v)if(s.isValid(i))return(0,r.newParsableTokenSuccess)(s.factory(e));return(0,r.newParsableTokenFailed)(n.lineReference(t),"Invalid character at ".concat(t," '").concat(String.fromCharCode(i),"'"))}static discardWhitespaceAndComments(e){return new s.TokenList((0,m.where)(e,function(e){return!(0,o.instanceOfCommentToken)(e)&&!(0,p.instanceOfWhitespaceToken)(e)}))}}t.Tokenizer=g},12915(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompilationEnvironment=void 0;const i=n(13502),s=n(20887),o=n(99691),a=n(2013),l=n(54304),u=n(90717),c=n(39841),d=r(n(51507));t.CompilationEnvironment=class{constructor(e,t,n){this.generatedTypes=[],this.enums={},this.executables={},this.tables={},this.types={},this.compilationLogger=e,this.executionLogger=t,this.codeEnvironment={tableLibrary:l.TableLibrary,libraries:{},systemFunctions:u.SystemFunctions,validate:c.Validate,Decimal:d.default};for(const r of n.runtimes())this.codeEnvironment.libraries[r.name]=r}initialize(){for(const e of this.generatedTypes)this.initializeType(e)}addType(e){this.generatedTypes.push(e)}result(){return new s.CompilerResult(this.executables,this.enums,this,this.executionLogger)}initializeType(e){const t='"use strict";\n'.concat(a.LexyCodeConstants.environmentVariable,".").concat(e.name," = ").concat(e.initializationFunction,"\n");try{this.compilationLogger.logDebug("Initialization code: ".concat(t));new Function(a.LexyCodeConstants.environmentVariable,t)(this.codeEnvironment)}catch(n){throw new Error("Initialization failed: ".concat(n,"\n").concat(t))}switch(e.kind){case i.GeneratedTypeKind.Function:{const t=o.ExecutableFunction.create(this.codeEnvironment,e,this.compilationLogger,this.executionLogger);this.executables[e.node.nodeName]=t;break}case i.GeneratedTypeKind.Enum:this.enums[e.node.nodeName]=e;break;case i.GeneratedTypeKind.Table:this.tables[e.node.nodeName]=e;break;case i.GeneratedTypeKind.Type:this.types[e.node.nodeName]=e;break;default:throw new Error("Unknown generated type: ".concat(e.kind))}}}},13359(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTypeCode=function(e){const t=(0,i.typeClassName)(e.name.value),n=new o.CodeWriter(a.renderExpression);return n.openScope("function ".concat(t,"()")),(0,s.createVariableClass)(e.name.value,t,e.variables,n),n.writeLine("return ".concat(t,";")),n.closeScope("();"),new r.GeneratedType(r.GeneratedTypeKind.Type,e,t,n.toString())};const r=n(13502),i=n(45375),s=n(38184),o=n(69445),a=n(61388)},13502(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.GeneratedType=t.GeneratedTypeKind=void 0,function(e){e.Function="Function",e.Enum="Enum",e.Type="Type",e.Table="Table"}(n||(t.GeneratedTypeKind=n={}));t.GeneratedType=class{constructor(e,t,n,r){this.kind=e,this.node=t,this.name=n,this.initializationFunction=r}}},14131(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LibraryFunction=void 0;const r=n(82140),i=n(61491),s=n(78430);class o{constructor(e,t,n,r){this.returnType=n,this.parameterTypes=r,this.libraryName=e,this.name=t}validateArguments(e,t,n){if(t.length!=this.parameterTypes.length)return e.logger.fail(n,"Invalid number of function arguments: '".concat(this.name,". Expected: '").concat(this.parameterTypes.length,"' Actual: '").concat(t.length,"'. ")),(0,s.newValidateMemberFunctionArgumentsFailed)();let r=!1;for(let i=0;i<t.length;i++)this.validateArgument(n,e,t,i)||(r=!0);return r?(0,s.newValidateMemberFunctionArgumentsFailed)():(0,s.newValidateMemberFunctionArgumentsSuccess)(new i.LibraryFunctionCall(this.libraryName,this.name,this.returnType))}getResultsType(e){return this.returnType}validateArgument(e,t,n,r){const i=n[r].deriveType(t),s=this.parameterTypes[r];return!(null==i||!i.equals(s))||(t.logger.fail(e,"Invalid function argument: '".concat(this.name,"'. Argument should be of type function parameters. Use new(Function) of fill(Function) to create an variable of the function result type.")),!1)}static build(e,t,n){const i=n.args.map(e=>r.PrimitiveType.parse(e)),s=r.PrimitiveType.parse(n.returnType);return new o(e,t,s,i)}}t.LibraryFunction=o},14202(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,y={};function v(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||f}function g(){}function T(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=v.prototype;var b=T.prototype=new g;b.constructor=T,m(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,E={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!V.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:E.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function P(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function O(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+P(l,0):s,w(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),O(o,t,i,"",function(e){return e})):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",w(e))for(var u=0;u<e.length;u++){var c=s+P(a=e[u],u);l+=O(a,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=O(a=a.value,t,i,c=s+P(a,u++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function L(e,t,n){if(null==e)return e;var r=[],i=0;return O(e,r,"","",function(e){return t.call(n,e,i++)}),r}function S(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var F={current:null},M={transition:null};function _(){throw Error("act(...) is not supported in production builds of React.")}},14276(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpectComponentErrors=void 0;const r=n(15459),i=n(3176);class s extends i.ErrorsNode{constructor(e){super(e),this.nodeType=r.NodeType.ScenarioExpectComponentErrors}}t.ExpectComponentErrors=s},14782(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MathLibrary=void 0;const i=r(n(51507)),s=n(3378);const o={Power:{returnType:s.Types.Number,args:[s.Types.Number,s.Types.Number]},Round:{returnType:s.Types.Number,args:[s.Types.Number,s.Types.Number]}};t.MathLibrary={name:"Math",functions:{Power:function(e,t){return e.pow(t)},Round:function(e,t){const n=new i.default(10).pow(t);return e.abs().mul(n).round().div(n).mul(e.greaterThanOrEqualTo(0)?1:-1)}},functionsInfo:o}},15229(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.OperatorType=void 0,function(e){e.NotSet="NotSet",e.Assignment="Assignment",e.Addition="Addition",e.Subtraction="Subtraction",e.Multiplication="Multiplication",e.Division="Division",e.Modulus="Modulus",e.OpenParentheses="OpenParentheses",e.CloseParentheses="CloseParentheses",e.OpenBrackets="OpenBrackets",e.CloseBrackets="CloseBrackets",e.GreaterThan="GreaterThan",e.LessThan="LessThan",e.GreaterThanOrEqual="GreaterThanOrEqual",e.LessThanOrEqual="LessThanOrEqual",e.Equals="Equals",e.NotEqual="NotEqual",e.And="And",e.Or="Or",e.ArgumentSeparator="ArgumentSeparator",e.Spread="Spread"}(n||(t.OperatorType=n={}))},15312(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LexyScriptNode=void 0,t.instanceOfLexyScriptNode=T,t.asLexyScriptNode=function(e){return T(e)?e:null};const r=n(22697),i=n(58996),s=n(2461),o=n(115),a=n(51612),l=n(45120),u=n(24535),c=n(23303),d=n(77148),p=n(8644),h=n(59849),f=n(42021),m=n(90424),y=n(8911),v=n(45014),g=n(15459);function T(e){return(null===e||void 0===e?void 0:e.nodeType)==g.NodeType.LexyScriptNode}class b extends i.ComponentNode{constructor(e){super(new l.SourceReference(new u.SourceFile("LexyScriptNode"),1,1)),this.includes=[],this.sortedNodes=null,this.nodeType=g.NodeType.LexyScriptNode,this.nodeName="LexyScriptNode",this.componentNodes=new a.ComponentNodeList,this.comments=new s.Comments(this.reference),this.expressionFactory=e}parse(e){if(e.line.tokens.isComment())return this.comments;let t=this.parseComponentNode(e);return null==t?this:(this.componentNodes.add(t),t)}parseComponentNode(e){var t;if(o.Include.isValid(e.line)){let t=o.Include.parse(e);if(null!=t)return this.includes.push(t),null}let n=e.line.lineStartReference(),i=c.NodeName.parse(e);if(null==i||null==i.name){const r=e.line.tokens.length>0?null===(t=e.line.tokens.get(0))||void 0===t?void 0:t.value:e.line.content;return e.logger.fail(n,"Invalid token '".concat(r,"'. Keyword and name expected.")),null}switch(i.keyword){case d.Keywords.Function:return r.Function.create(i.name,!1,n,this.expressionFactory);case d.Keywords.EnumKeyword:return p.EnumDefinition.parse(i.name,n);case d.Keywords.ScenarioKeyword:return h.Scenario.parse(i.name,n);case d.Keywords.TableKeyword:return new f.Table(i.name,n);case d.Keywords.TypeKeyword:return m.TypeDefinition.parse(i.name,n);default:return this.invalidNode(i,e,n)}}invalidNode(e,t,n){return t.logger.fail(n,"Unknown keyword: ".concat(e.keyword)),null}getChildren(){return this.sortedNodes?this.sortedNodes:this.componentNodes.values}validate(e){y.DuplicateChecker.validate(e,e=>e.reference,e=>e.nodeName,e=>"Duplicated node name: '".concat(e.nodeName,"'"),this.componentNodes.values)}getDueIncludes(){return(0,v.where)(this.includes,e=>!e.isProcessed)}sortByDependency(e){this.sortedNodes=this.withoutScenarioInlineNode(e)}withoutScenarioInlineNode(e){return e.filter(e=>{var t;return 1!=(null===(t=(0,r.asFunction)(e))||void 0===t?void 0:t.nested)})}}t.LexyScriptNode=b},15459(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.NodeType=void 0,function(e){e.AssignmentDefinition="AssignmentDefinition",e.AssignmentExpression="AssignmentExpression",e.BinaryExpression="BinaryExpression",e.BracketedExpression="BracketedExpression",e.CaseExpression="CaseExpression",e.ColumnHeader="ColumnHeader",e.Comments="Comments",e.ObjectAssignmentDefinition="ObjectAssignmentDefinition",e.ObjectVariableTypeDeclaration="ObjectVariableTypeDeclaration",e.ElseExpression="ElseExpression",e.ElseifExpression="ElseifExpression",e.EnumDefinition="EnumDefinition",e.EnumMember="EnumMember",e.EnumName="EnumName",e.ExpressionList="ExpressionList",e.ExtractResultsFunction="ExtractResultsFunction",e.ExecutionLogging="ExecutionLogging",e.FillParametersFunctionExpression="FillParametersFunctionExpression",e.Function="Function",e.FunctionCallExpression="FunctionCallExpression",e.FunctionCode="FunctionCode",e.FunctionName="FunctionName",e.FunctionParameters="FunctionParameters",e.FunctionResults="FunctionResults",e.IdentifierExpression="IdentifierExpression",e.IfExpression="IfExpression",e.ImplicitVariableTypeDeclaration="ImplicitVariableTypeDeclaration",e.LexyFunctionCallExpression="LexyFunctionCallExpression",e.LiteralExpression="LiteralExpression",e.MemberAccessExpression="MemberAccessExpression",e.MemberFunctionCallExpression="MemberFunctionCallExpression",e.NewFunctionExpression="NewFunctionExpression",e.ParenthesizedExpression="ParenthesizedExpression",e.PrimitiveVariableTypeDeclaration="PrimitiveVariableTypeDeclaration",e.Scenario="Scenario",e.ScenarioFunctionName="ScenarioFunctionName",e.ScenarioName="ScenarioName",e.ScenarioParameters="ScenarioParameters",e.ScenarioResults="ScenarioResults",e.ScenarioExpectComponentErrors="ScenarioExpectComponentErrors",e.ScenarioExpectExecutionErrors="ScenarioExpectExecutionErrors",e.ScenarioExpectErrors="ScenarioExpectErrors",e.SpreadAssignmentExpression="SpreadAssignmentExpression",e.SpreadExpression="SpreadExpression",e.LexyScriptNode="LexyScriptNode",e.SwitchExpression="SwitchExpression",e.Table="Table",e.TableHeader="TableHeader",e.TableRow="TableRow",e.TableValue="TableValue",e.TypeDefinition="TypeDefinition",e.VariableDeclarationExpression="VariableDeclarationExpression",e.VariableDefinition="VariableDefinition",e.ValidationColumnHeader="ValidationColumnHeader",e.ValidationTable="ValidationTable",e.ValidationTableHeader="ValidationTableHeader",e.ValidationTableRow="ValidationTableRow",e.ValidationTableValue="ValidationTableValue"}(n||(t.NodeType=n={}))},15632(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LexySourceDocument=void 0;class n{}t.LexySourceDocument=n,n.fileExtension="lexy",n.markdownExtension="md"},15909(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtractResultsFunctionExpression=void 0,t.instanceOfExtractResultsFunctionExpression=c,t.asExtractResultsFunctionExpression=function(e){return c(e)?e:null};const r=n(99989),i=n(92272),s=n(41486),o=n(50099),a=n(15459),l=n(30097),u=n(60059);function c(e){return(null===e||void 0===e?void 0:e.nodeType)==a.NodeType.ExtractResultsFunction}class d extends u.FunctionCallExpression{get functionHelp(){return"".concat(d.functionName," expects 1 argument. extract(variable)")}constructor(e,t){super(t),this.nodeType=a.NodeType.ExtractResultsFunction,this.valueExpression=e;const n=e;this.functionResultVariable=null!=n?n.identifier:null,this.mapping=null}getChildren(){return[this.valueExpression]}validate(e){if(null==this.functionResultVariable)return void e.logger.fail(this.reference,"Invalid variable argument. ".concat(this.functionHelp));let t=e.variableContext.getVariableTypeByName(this.functionResultVariable);if(null==t)return void e.logger.fail(this.reference,"Unknown variable: '".concat(this.functionResultVariable,"'. ").concat(this.functionHelp));const n=(0,i.asGeneratedType)(t);null!=n?this.mapping=d.getMapping(this.reference,e,n):e.logger.fail(this.reference,"Invalid variable type: '".concat(this.functionResultVariable,"'. ")+"Should be Function Results. "+"Use new(Function.results) or fill(Function.results) to create new function results. ".concat(this.functionHelp))}static getMapping(e,t,n){var i;if(null==n)return null;const o=new Array;for(const a of n.members){const n=t.variableContext.getVariable(a.name);null!=n&&n.variableSource!=s.VariableSource.Parameters&&(null!=n.variableType&&(null===(i=n.variableType)||void 0===i?void 0:i.equals(a.type))?o.push(new r.Mapping(a.name,n.variableType,n.variableSource)):t.logger.fail(e,"Invalid parameter mapping. Variable '".concat(a.name,"' of type '").concat(n.variableType,"' can't be mapped to parameter '").concat(a.name,"' of type '").concat(a.type,"'.")))}return 0==o.length?(t.logger.fail(e,"Invalid parameter mapping. No parameter could be mapped from variables."),null):new r.VariablesMapping(n,o)}deriveType(e){return new o.VoidType}static create(e,t){return new d(t,e)}usedVariables(){if(!this.mapping)return super.usedVariables();let e=(0,r.mapToUsedVariable)(l.VariableAccess.Write),t=this.mapping.values.map(e);return[...super.usedVariables(),...t]}}t.ExtractResultsFunctionExpression=d,d.functionName="extract"},16736(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElseExpression=void 0,t.instanceOfElseExpression=u,t.asElseExpression=function(e){return u(e)?e:null};const r=n(9313),i=n(59715),s=n(50917),o=n(42539),a=n(77148),l=n(15459);function u(e){return(null===e||void 0===e?void 0:e.nodeType)==l.NodeType.ElseExpression}class c extends r.Expression{get falseExpressions(){return this.falseExpressionsValue.asArray()}constructor(e,t,n){super(e,t),this.isParsableNode=!0,this.isChildExpression=!0,this.nodeType=l.NodeType.ElseExpression,this.falseExpressionsValue=new s.ExpressionList(t,n)}validateParentExpression(e,t){return null!=e&&e.nodeType==l.NodeType.IfExpression||(t.logger.fail(this.reference,"'else' should be following an 'if' statement. No 'if' statement found."),!1)}getChildren(){return[this.falseExpressionsValue]}parse(e){let t=this.falseExpressionsValue.parse(e);if("success"!=t.state)return this;const n=(0,i.asParsableNode)(t.result);return null!=n?n:this}static parse(e,t){let n=e.tokens;if(!c.isValid(n))return(0,o.newParseExpressionFailed)("ElseExpression","Not valid.");if(n.length>1)return(0,o.newParseExpressionFailed)("ElseExpression","No tokens expected.");let r=e.createReference(),i=new c(e,r,t);return(0,o.newParseExpressionSuccess)(i)}static isValid(e){return e.isKeyword(0,a.Keywords.Else)}validate(e){}deriveType(e){return null}}t.ElseExpression=c},16758(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FillFunctionStatement=void 0;const r=n(60059),i=n(20429),s=n(89637),o=n(87274),a=n(5338),l=n(70330);class u{static matches(e){const t=(0,i.asVariableDeclarationExpression)(e);if(null==t)return!1;const n=(0,r.asFunctionCallExpression)(t.assignment);return null!=n&&(0,s.instanceOfFillParametersFunctionExpression)(n)}static render(e,t){const n=(0,r.asFunctionCallExpression)(e.assignment);if(null==n)throw new Error("assignmentExpression.assignment should be FunctionCallExpression");const i=(0,s.asFillParametersFunctionExpression)(n);if(null==i)throw new Error("Expression not FillParametersFunctionExpression: "+n);u.renderFill(e.name,i.type,l.Assert.notNull(i.mapping,"fillParametersFunctionExpression.mapping"),t)}static renderFill(e,t,n,r){r.write("const "+e+" = new "),r.writeEnvironment(".".concat((0,o.translateType)(t))),r.endLine("();");for(const i of n.values)r.startLine(e+"."+i.variableName+" = "),(0,a.renderVariableMappingVariableSyntax)(i,r),r.writeLine(";")}}t.FillFunctionStatement=u},18207(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AssignmentDefinition=void 0,t.instanceOfAssignmentDefinition=l,t.asAssignmentDefinition=function(e){return l(e)?e:null};const r=n(59611),i=n(15459),s=n(33948),o=n(20749),a=n(37532);function l(e){return(null===e||void 0===e?void 0:e.nodeType)==i.NodeType.AssignmentDefinition}class u extends r.Node{get variableType(){return this.variableTypeValue}constructor(e,t,n,r,s){super(s),this.nodeType=i.NodeType.AssignmentDefinition,this.variableTypeValue=null,this.variable=e,this.constantValue=t,this.variableExpression=n,this.valueExpression=r}static addParentVariableAccessor(e,t){if(1!=t.length)return t;const n=u.getIdentifierPath(t);if(null==n)return t;const r=e.append(n.parts).fullPath(),i=new o.MemberAccessLiteralToken(r,n.firstCharacter);return new s.TokenList([i])}static getIdentifierPath(e){const t=(0,o.asMemberAccessLiteralToken)(e.get(0));if(null!=t)return{parts:t.parts,firstCharacter:t.firstCharacter};const n=(0,a.asStringLiteralToken)(e.get(0));return null!=n?{parts:[n.value],firstCharacter:n.firstCharacter}:null}getChildren(){return[this.variableExpression,this.valueExpression]}validate(e){if(!e.variableContext.containsPath(this.variable,e))return;let t=this.valueExpression.deriveType(e);const n=e.variableContext.getVariableTypeByPath(this.variable,e);null!=n?(this.variableTypeValue=n,null==t||t.equals(n)||e.logger.fail(this.reference,"Variable '".concat(this.variable,"' of type '").concat(this.variableType,"' is not assignable from expression of type '").concat(t,"'."))):e.logger.fail(this.reference,"Type of variable '".concat(this.variable,"' is unknown."))}flatten(e){e.push(this)}}t.AssignmentDefinition=u},19137(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.GeneratedTypeSource=void 0,function(e){e.FunctionParameters="FunctionParameters",e.FunctionResults="FunctionResults",e.TableRow="TableRow",e.TableColumn="TableColumn"}(n||(t.GeneratedTypeSource=n={}))},20380(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationTableRow=void 0;const r=n(59611),i=n(41844),s=n(33948),o=n(15459),a=n(71148),l=n(79545);class u extends r.Node{get values(){return this.valuesValue}constructor(e,t,n,r){super(r),this.nodeType=o.NodeType.ValidationTableRow,this.valuesValue=n,this.tableHeader=t,this.index=e}static parse(e,t,n){let r=0;if(!e.validateTokens("TableRow").type(r,a.TokenType.TableSeparatorToken).isValid)return null;let i=new Array,s=e.line.tokens;for(;++r<s.length;){const t=u.parseValue(e,n,s,r++,i.length);if(null==t)return null;i.push(t)}return new u(t,n,i,e.line.lineStartReference())}static parseValue(e,t,n,r,o){if(!e.validateTokens("ValidationTableRow").isLiteralToken(r).type(r+1,a.TokenType.TableSeparatorToken).isValid)return null;const u=e.line.tokenReference(r),c=n.token(r++,i.asToken);if(null==c)return null;let d=e.expressionFactory.parse(new s.TokenList([c]),e.line);return"failed"==d.state?(e.logger.fail(u,d.errorMessage),null):new l.ValidationTableValue(o,d.result,t,u)}getChildren(){return[...this.values]}validate(e){this.tableHeader.columns.length!=this.values.length&&e.logger.fail(this.reference,"Invalid number of values ".concat(this.values.length,". Expected ").concat(this.tableHeader.columns.length,"."))}}t.ValidationTableRow=u},20429(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VariableDeclarationExpression=void 0,t.instanceOfVariableDeclarationExpression=m,t.asVariableDeclarationExpression=function(e){return m(e)?e:null};const r=n(9313),i=n(42539),s=n(77148),o=n(15229),a=n(41486),l=n(15459),u=n(69536),c=n(30097),d=n(43056),p=n(71148),h=n(5932),f=n(5627);function m(e){return(null===e||void 0===e?void 0:e.nodeType)==l.NodeType.VariableDeclarationExpression}class y extends r.Expression{constructor(e,t,n,r,i){super(r,i),this.variableType=null,this.nodeType=l.NodeType.VariableDeclarationExpression,this.type=e,this.name=t,this.assignment=n}static parse(e,t){var n;let r=e.tokens;if(!y.isValid(r))return(0,i.newParseExpressionFailed)("VariableDeclarationExpression","Invalid expression.");const s=r.tokenValue(0);if(null==s)return(0,i.newParseExpressionFailed)("VariableDeclarationExpression","Invalid type name.");let o=h.VariableTypeDeclarationParser.parse(s,e.createReference()),a=r.tokenValue(1);if(null==a)return(0,i.newParseExpressionFailed)("VariableDeclarationExpression","Invalid name.");let l=r.length>3?t.parse(r.tokensFrom(3),e.line):null;if("failed"==(null===l||void 0===l?void 0:l.state))return l;let u=e.createReference(),c=new y(o,a,null!==(n=null===l||void 0===l?void 0:l.result)&&void 0!==n?n:null,e,u);return(0,i.newParseExpressionSuccess)(c)}static isValid(e){return 2==e.length&&e.isKeyword(0,s.Keywords.ImplicitVariableTypeDeclaration)&&e.isTokenType(1,p.TokenType.StringLiteralToken)||2==e.length&&e.isTokenType(0,p.TokenType.StringLiteralToken)&&e.isTokenType(1,p.TokenType.StringLiteralToken)||2==e.length&&e.isTokenType(0,p.TokenType.MemberAccessLiteralToken)&&e.isTokenType(1,p.TokenType.StringLiteralToken)||e.length>=4&&e.isKeyword(0,s.Keywords.ImplicitVariableTypeDeclaration)&&e.isTokenType(1,p.TokenType.StringLiteralToken)&&e.isOperatorToken(2,o.OperatorType.Assignment)||e.length>=4&&e.isTokenType(0,p.TokenType.StringLiteralToken)&&e.isTokenType(1,p.TokenType.StringLiteralToken)&&e.isOperatorToken(2,o.OperatorType.Assignment)}getChildren(){const e=[this.type];return null!=this.assignment&&e.push(this.assignment),e}validate(e){const t=this.assignment?this.assignment.deriveType(e):null;null!=this.assignment&&null==t&&e.logger.fail(this.reference,"Invalid expression. Could not derive type."),this.variableType=this.getVariableType(e,t),null==this.variableType&&e.logger.fail(this.reference,"Invalid variable type '".concat(this.type.toString(),"'")),e.variableContext.registerVariableAndVerifyUnique(this.reference,this.name,this.variableType,a.VariableSource.Code)}getVariableType(e,t){if(this.type.nodeType==l.NodeType.ImplicitVariableTypeDeclaration){if(null==t)return null;return this.type.define(t),t}let n=this.type.variableType;return null==this.assignment||null!=t&&(null===t||void 0===t?void 0:t.equals(n))||e.logger.fail(this.reference,"Invalid expression. Literal or enum value expression expected."),n}deriveType(e){return null}usedVariables(){const e=new u.VariableUsage(f.IdentifierPath.parseString(this.name),null,this.variableType,a.VariableSource.Code,c.VariableAccess.Write);return null!=this.assignment?[e,...(0,d.getReadVariableUsage)(this.assignment)]:[e]}}t.VariableDeclarationExpression=y},20601(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BuildCommentOrDivisionToken=void 0;const r=n(6248),i=n(68784),s=n(71148),o=n(60516),a=n(40350),l=n(61187),u=n(15229);class c extends r.ParsableToken{constructor(e){super(e),this.tokenIsLiteral=!1,this.tokenType=s.TokenType.BuildCommentOrDivisionToken}parse(e){if(1!=this.value.length)throw new Error("Length should not exceed 1");return this.buildToken(e)}buildToken(e){if(e.value!=a.TokenValues.DivisionOrComment)return(0,i.newParseTokenFinishedResult)(!1,new o.OperatorToken(this.firstCharacter,u.OperatorType.Division));{let e=new l.CommentToken(this.firstCharacter,this.value);return(0,i.newParseTokenInProgressResult)(e)}}endOfLine(){return(0,i.newParseTokenFinishedResult)(!0,new o.OperatorToken(this.firstCharacter,u.OperatorType.Division))}}t.BuildCommentOrDivisionToken=c},20749(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemberAccessLiteralToken=void 0,t.instanceOfMemberAccessLiteralToken=l,t.asMemberAccessLiteralToken=function(e){return l(e)?e:null};const r=n(41844),i=n(40350),s=n(5627),o=n(73986),a=n(71148);function l(e){return(null===e||void 0===e?void 0:e.tokenType)==a.TokenType.MemberAccessLiteralToken}class u extends r.Token{get parent(){return this.parts.length>=1?this.parts[0]:""}get member(){return this.parts.length>=2?this.parts[1]:""}get typedValue(){return this.value}constructor(e,t){super(t),this.tokenIsLiteral=!0,this.tokenType=a.TokenType.MemberAccessLiteralToken,this.value=e,this.parts=e.split(i.TokenValues.MemberAccessString)}deriveType(e){let t=new s.IdentifierPath(this.parts),n=e.variableContext.getVariableTypeByPath(t,e);if(null!=n)return n;if(2!=this.parts.length)return null;const r=e.componentNodes.getType(this.parent),i=(0,o.asObjectType)(r);return null==i?null:i.memberType(this.member,e.componentNodes)}toString(){return this.value}}t.MemberAccessLiteralToken=u},20816(e,t,n){"use strict";n.d(t,{A:()=>i});var r=n(82284);function i(e){var t=function(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=(0,r.A)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,r.A)(t)?t:t+""}},20887(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompilerResult=void 0;const r=n(88074);t.CompilerResult=class{constructor(e,t,n,r){this.executables=e,this.enums=t,this.environment=n,this.executionLogger=r}getFunction(e){return this.executables[e.name.value]}getEnumType(e){return this.enums[e]}createContext(){return new r.ExecutionContext(this.executionLogger)}}},22167(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WhitespaceToken=void 0,t.instanceOfWhitespaceToken=o,t.asTableSeparatorToken=function(e){return o(e)?e:null};const r=n(68784),i=n(6248),s=n(71148);function o(e){return(null===e||void 0===e?void 0:e.tokenType)==s.TokenType.WhitespaceToken}class a extends i.ParsableToken{constructor(e){super(e),this.tokenIsLiteral=!1,this.tokenType=s.TokenType.WhitespaceToken}parse(e){return" "!=(null!=e?e.value.toString():"")?(0,r.newParseTokenFinishedResult)(!1):(0,r.newParseTokenInProgressResult)()}endOfLine(){return(0,r.newParseTokenFinishedResult)(!0)}}t.WhitespaceToken=a},22337(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newTokenizeFailed=function(e,t){return{state:"failed",reference:e,errorMessage:t}},t.newTokenizeSuccess=function(e){return{state:"success",result:e}}},22697(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Function=void 0,t.instanceOfFunction=g,t.asFunction=function(e){return g(e)?e:null};const r=n(58996),i=n(83014),s=n(45129),o=n(87115),a=n(77280),l=n(77148),u=n(54450),c=n(92272),d=n(19137),p=n(15459),h=n(71148),f=n(78020),m=n(26347),y=n(37954),v=n(74182);function g(e){return(null===e||void 0===e?void 0:e.nodeType)==p.NodeType.Function}class T extends r.ComponentNode{get parameters(){return this.parametersValue}get results(){return this.resultsValue}get code(){return this.codeValue}get nodeName(){return this.name.value}constructor(e,t,n,r){super(n),this.hasNodeDependencies=!0,this.nodeType=p.NodeType.Function,this.factory=r,this.parametersValue=new s.FunctionParameters(n),this.resultsValue=new o.FunctionResults(n),this.codeValue=new a.FunctionCode(n,this.factory),this.name=i.FunctionName.parseName(e,n),this.nested=t}getDependencies(e){let t=new Array;return T.addObjectTypes(e,this.parameters.variables,t),T.addObjectTypes(e,this.results.variables,t),t}static create(e,t,n,r){return new T(e,t,n,r)}parse(e){let t=e.line;if(!t.tokens.isTokenType(0,h.TokenType.KeywordToken))return this.codeValue.parse(e);switch(t.tokens.tokenValue(0)){case l.Keywords.Parameters:return this.parametersValue;case l.Keywords.Results:return this.resultsValue;default:return this.codeValue.parse(e)}}static addObjectTypes(e,t,n){for(const r of t){const t=(0,u.asObjectVariableTypeDeclaration)(r.type);if(null==t)continue;let i=e.getNode(t.type);null!=i&&n.push(i)}}validateTree(e){const t=e.createVariableScope();try{super.validateTree(e)}finally{t[Symbol.dispose]()}}getChildren(){const e=[this.name];return null!=this.parameters&&e.push(this.parameters),null!=this.results&&e.push(this.results),null!=this.code&&e.push(this.code),e}validate(e){}getParametersType(){var e;return this.generatedType(null===(e=this.parameters)||void 0===e?void 0:e.variables,d.GeneratedTypeSource.FunctionParameters)}getResultsType(){var e;return this.generatedType(null===(e=this.results)||void 0===e?void 0:e.variables,d.GeneratedTypeSource.FunctionResults)}generatedType(e,t){let n=e?e.map(e=>new y.ObjectTypeVariable(e.name,e.type.variableType)):[];return new c.GeneratedType(this.name.value,this,t,n)}validateArguments(e,t,n){return this.hasSpreadArgument(t)?this.validateAutoMap():this.validateWithArguments(e,t,n)}validateAutoMap(){return(0,f.newValidateFunctionArgumentsSuccessAutoMap)(this.getParametersType())}validateWithArguments(e,t,n){let r=this.getArgumentTypes(t,e),i=this.getFunctions();for(const o of i)if(o.matches(r))return(0,f.newValidateFunctionArgumentsCallFunctionSuccess)(o);var s=this.buildErrorMessage(i);return e.logger.fail(n,s),(0,f.newValidateFunctionArgumentsFailed)()}buildErrorMessage(e){const t=["Invalid function arguments: '".concat(this.name,"'. Function overloads:\n")];for(const n of e)t.push("- ".concat(this.name,"(")),T.addParameters(n,t),t.push(")\n");return t.join("")}static addParameters(e,t){for(let n=0;n<e.parametersTypes.length;n++){let r=e.parametersTypes[n];r&&t.push(r.toString()),n<e.parametersTypes.length-1&&t.push(", ")}}getFunctions(){return[this.getSingleParameterArgumentFunction(),this.inlineParametersArgumentsFunction()]}getSingleParameterArgumentFunction(){return new m.FunctionSignature([this.getParametersType()],this.getResultsType())}inlineParametersArgumentsFunction(){const e=this.getParametersTypes(),t=this.getResultsType();return new m.FunctionSignature(e,t)}getParametersTypes(){return this.parametersValue.variables.map(e=>e.variableType)}getArgumentTypes(e,t){return this.hasSpreadArgument(e)?[this.getResultsType()]:e.map(e=>e.deriveType(t))}hasSpreadArgument(e){return 1==e.length&&(0,v.instanceOfSpreadExpression)(e[0])}}t.Function=T,T.parameterName="Parameters",T.resultsName="Results"},23107(e,t){"use strict";function n(e){return 1==(null===e||void 0===e?void 0:e.hasNodeDependencies)}Object.defineProperty(t,"__esModule",{value:!0}),t.instanceOfHasNodeDependencies=n,t.asHasNodeDependencies=function(e){return n(e)?e:null}},23249(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TableType=void 0,t.instanceOfTableType=d,t.asTableType=function(e){return d(e)?e:null};const r=n(73986),i=n(42021),s=n(82140),o=n(88310),a=n(92272),l=n(19137),u=n(76389),c=n(96969);function d(e){return(null===e||void 0===e?void 0:e.variableTypeName)==o.VariableTypeName.TableType}class p extends r.ObjectType{constructor(e,t){super(),this.variableTypeName=o.VariableTypeName.TableType,this.tableName=e,this.table=t}isAssignableFrom(e){return this.equals(e)}memberType(e,t){return e==i.Table.countName?s.PrimitiveType.number:e==i.Table.rowName?this.tableRowType(t):this.tableColumnType(e)}getVariable(e){return null}getFunction(e){switch(e){case u.LookUpFunction.functionName:return new u.LookUpFunction(this.table);case c.LookUpRowFunction.functionName:return new c.LookUpRowFunction(this.table)}return null}tableRowType(e){var t;let n=null===(t=e.getTable(this.tableName))||void 0===t?void 0:t.getRowType();return n||null}equals(e){return null!=e&&d(e)&&this.tableName==e.tableName}toString(){return this.tableName}tableColumnType(e){var t;return null!=(null===(t=this.table.header)||void 0===t?void 0:t.getColumn(e))?new a.GeneratedType(e,this.table,l.GeneratedTypeSource.TableColumn,[]):null}}t.TableType=p},23303(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeName=void 0;class n{constructor(e,t){this.name=t,this.keyword=e}static parse(e){let t=e.line.tokens;if(t.length<1||t.length>2)return null;let r=e.validateTokens("NodeName").keyword(0).isValid;if(!r)return null;let i=t.tokenValue(0);if(null==i)return null;if(1==t.length)return new n(i,null);if(r=e.validateTokens("NodeName").stringLiteral(1).isValid,!r)return null;let s=t.tokenValue(1);return new n(i,s)}toString(){return"".concat(this.keyword," {this.name}")}}t.NodeName=n},24069(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CaseExpression=void 0,t.instanceOfCaseExpression=u,t.asCaseExpression=function(e){return u(e)?e:null};const r=n(9313),i=n(59715),s=n(50917),o=n(42539),a=n(77148),l=n(15459);function u(e){return(null===e||void 0===e?void 0:e.nodeType)==l.NodeType.CaseExpression}class c extends r.Expression{get expressions(){return this.expressionsValues.asArray()}constructor(e,t,n,r,i){super(n,r),this.isParsableNode=!0,this.isChildExpression=!0,this.nodeType=l.NodeType.CaseExpression,this.valueType=null,this.value=e,this.isDefault=t,this.expressionsValues=new s.ExpressionList(r,i)}parse(e){const t=this.expressionsValues.parse(e);if("success"!=t.state)return this;const n=(0,i.asParsableNode)(t.result);return null!=n?n:this}getChildren(){return null!=this.value?[this.value,this.expressionsValues]:[this.expressionsValues]}static parse(e,t){let n=e.tokens;if(!c.isValid(n))return(0,o.newParseExpressionFailed)("CaseExpression","Not valid.");if(n.isKeyword(0,a.Keywords.Default))return c.parseDefaultCase(e,n,t);if(1==n.length)return(0,o.newParseExpressionFailed)("CaseExpression","Invalid 'case'. No parameters found.");let r=n.tokensFrom(1),i=t.parse(r,e.line);if("success"!=i.state)return i;let s=e.createReference(),l=new c(i.result,!1,e,s,t);return(0,o.newParseExpressionSuccess)(l)}static parseDefaultCase(e,t,n){if(1!=t.length)return(0,o.newParseExpressionFailed)("CaseExpression","Invalid 'default' case. No parameters expected.");let r=e.createReference(),i=new c(null,!0,e,r,n);return(0,o.newParseExpressionSuccess)(i)}static isValid(e){return e.isKeyword(0,a.Keywords.Case)||e.isKeyword(0,a.Keywords.Default)}validate(e){this.valueType=this.deriveType(e)}deriveType(e){return null!=this.value?this.value.deriveType(e):null}}t.CaseExpression=c},24535(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceFile=void 0;t.SourceFile=class{constructor(e){this.fileName=e}}},25848(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExecutionLogging=void 0;const r=n(59715),i=n(15459),s=n(33023);class o extends r.ParsableNode{get entries(){return this.entriesValue}constructor(e){super(e),this.entriesValue=[],this.nodeType=i.NodeType.ExecutionLogging}parse(e){return this.parseEntry(e)}parseEntry(e){let t=s.ExecutionLog.parse(e);return null==t?this:(this.entriesValue.push(t),t)}getChildren(){return[...this.entriesValue]}validate(e){}}t.ExecutionLogging=o},26347(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionSignature=void 0;t.FunctionSignature=class{constructor(e,t){this.parametersTypes=e,this.resultsType=t}matches(e){if(e.length!=this.parametersTypes.length)return!1;for(let t=0;t<this.parametersTypes.length;t++){let n=this.parametersTypes[t],r=e[t];if(null==n||null==r)return!1;if(!n.isAssignableFrom(r))return!1}return!0}}},27449(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeNames=void 0;class n{static contains(e){return this.existing.indexOf(e)>-1}}t.TypeNames=n,n.number="number",n.boolean="boolean",n.date="date",n.string="string",n.existing=[n.number,n.boolean,n.date,n.string]},27556(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NewFunctionExpression=void 0,t.instanceOfNewFunctionExpression=l,t.asNewFunctionExpression=function(e){return l(e)?e:null};const r=n(32045),i=n(15459),s=n(92272),o=n(70330),a=n(60059);function l(e){return(null===e||void 0===e?void 0:e.nodeType)==i.NodeType.NewFunctionExpression}class u extends a.FunctionCallExpression{get functionHelp(){return"".concat(u.functionName," expects 1 argument (Function.Parameters)")}get type(){return o.Assert.notNull(this.typeValue,"type")}constructor(e,t){super(t),this.typeValue=null,this.hasNodeDependencies=!0,this.nodeType=i.NodeType.NewFunctionExpression,this.valueExpression=e;const n=(0,r.asMemberAccessExpression)(e);this.typeLiteralToken=n?n.memberAccessLiteral:null}getDependencies(e){let t=this.typeValue?e.getNode(this.typeValue.name):null;return null!=t?[t]:[]}static create(e,t){return new u(t,e)}getChildren(){return[this.valueExpression]}validate(e){const t=this.valueExpression.deriveType(e),n=(0,s.asGeneratedType)(t);null!=n?this.typeValue=n:e.logger.fail(this.reference,"Invalid argument 1 'Value' should be of type 'GeneratedTypeType' but is 'ValueType'. ".concat(this.functionHelp))}deriveType(e){if(null==this.typeLiteralToken)return null;let t=e.componentNodes.getType(this.typeLiteralToken.parent);return null===t||void 0===t?void 0:t.memberType(this.typeLiteralToken.member,e.componentNodes)}}t.NewFunctionExpression=u,u.functionName="new"},29236(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newIdentifierPathParseFailed=function(e){return{state:"failed",errorMessage:e}},t.newIdentifierPathParseSuccess=function(e){return{state:"success",result:e}}},29770(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LexyCompiler=void 0;const r=n(12915),i=n(36478),s=n(70330);class o{constructor(e,t,n){this.compilationLogger=s.Assert.notNull(e,"compilationLogger"),this.executionLogger=s.Assert.notNull(t,"executionLogger"),this.libraries=s.Assert.notNull(n,"libraries")}compile(e){let t=new r.CompilationEnvironment(this.compilationLogger,this.executionLogger,this.libraries);try{return this.generateCode(e,t),t.initialize(),t.result()}catch(n){throw this.compilationLogger.logError("Exception occurred during compilation: "+n.stack),n}}generateCode(e,t){e.map(e=>o.generateType(e,t))}static generateType(e,t){let n=(0,i.generateJavaScriptCode)(e);null!=n&&t.addType(n)}}t.LexyCompiler=o},30097(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.VariableAccess=void 0,function(e){e.Read="Read",e.Write="Write"}(n||(t.VariableAccess=n={}))},30292(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleLogger=t.LogLevel=void 0,function(e){e.Debug="Debug",e.Information="Information",e.Warning="Warning",e.Error="Error"}(n||(t.LogLevel=n={}));t.ConsoleLogger=class{isEnabled(e){return!0}logDebug(e){console.log("[DBG] - ".concat(e))}logError(e){console.log("[ERR] - ".concat(e))}logInformation(e){console.log("[INF]  - ".concat(e))}}},30438(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScenarioName=void 0;const r=n(59611),i=n(67314),s=n(95318),o=n(15459),a=n(70330);class l extends r.Node{get value(){return a.Assert.notNull(this.valueValue,"value")}constructor(e,t){super(t),this.valueValue=null,this.nodeType=o.NodeType.ScenarioName,this.valueValue=e}getChildren(){return[]}validate(e){(0,i.isNullOrEmpty)(this.value)&&e.logger.fail(this.reference,"Invalid scenario name: '".concat(this.value,"'. Name should not be empty.")),(0,s.isValidIdentifier)(this.value)||e.logger.fail(this.reference,"Invalid scenario name: '".concat(this.value,"'."))}toString(){return this.value}static parseName(e,t){return new l(e,t)}}t.ScenarioName=l},31200(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnumType=void 0,t.instanceOfEnumType=o,t.asEnumType=function(e){return o(e)?e:null};const r=n(73986),i=n(45014),s=n(88310);function o(e){return(null===e||void 0===e?void 0:e.variableTypeName)==s.VariableTypeName.EnumType}class a extends r.ObjectType{constructor(e,t){super(),this.variableTypeName=s.VariableTypeName.EnumType,this.type=e,this.enum=t}toString(){return this.type}getVariable(e){return null}getFunction(e){return null}memberType(e,t){return(0,i.any)(this.enum.members,t=>t.name==e)?this:null}getDependencies(e){const t=e.getEnum(this.type);return null!=t?[t]:[]}isAssignableFrom(e){return this.equals(e)}firstMemberName(){var e;return null===(e=(0,i.firstOrDefault)(this.enum.members))||void 0===e?void 0:e.name}equals(e){return null!=e&&o(e)&&this.type==e.type}}t.EnumType=a},31517(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationTableName=void 0;const r=n(70330);t.ValidationTableName=class{constructor(){this.valueValue=null}get value(){return r.Assert.notNull(this.valueValue,"value")}parseName(e){this.valueValue=e}}},31632(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DateLibrary=void 0,t.milliseconds=m;const i=r(n(51507)),s=n(3378);function o(e,t){const n=+e-+t;return n<0?(0,i.default)(-1):n>0?(0,i.default)(1):(0,i.default)(n)}function a(e){const t=new Date(e);return t.setHours(0,0,0,0),t}function l(e){const t=new Date(e);return+function(e){const t=new Date(e);return t.setHours(23,59,59,999),t}(t)===+function(e){const t=new Date(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}(t)}function u(e){const t=new Date(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function c(e,t){const n=new Date(e),r=new Date(t),s=o(n,r),a=function(e,t){return(0,i.default)(e.getFullYear()).sub(t.getFullYear())}(n,r).abs();n.setFullYear(1584),r.setFullYear(1584);const l=o(n,r).equals(s.negated());return s.mul(a.sub(+l))}function d(e,t){const n=new Date(e),r=new Date(e),s=new Date(t),a=o(r,s),u=function(e,t){const n=new Date(e),r=new Date(t),s=(0,i.default)(n.getFullYear()-r.getFullYear()),o=(0,i.default)(n.getMonth()-r.getMonth());return s.mul(12).add(o)}(r,s).abs();if(u.lessThan(1))return(0,i.default)(0);1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a.mul(u).toNumber());let c=o(r,s).equals(a.negated());return l(n)&&u.equals(1)&&o(n,s).equals(1)&&(c=!1),a.mul(u.sub(+c))}function p(e,t){const n=new Date(e),r=new Date(t),s=h(n,r),o=function(e,t){const n=new Date(e),r=new Date(t),s=a(n),o=a(r),l=+s-u(s),c=+o-u(o);return(0,i.default)((l-c)/864e5).round()}(n,r).abs();n.setDate(n.getDate()-s.mul(o).toNumber());const l=Number(h(n,r).equals(-s));return s.mul(o.sub(l))}function h(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?(0,i.default)(-1):n>0?(0,i.default)(1):(0,i.default)(n)}function f(e,t){return(0,i.default)(+e-+t)}function m(e,t){return f(e,t)}const y={returnType:s.Types.Number,args:[s.Types.Date]},v={returnType:s.Types.Number,args:[s.Types.Date,s.Types.Date]},g={Format:{returnType:s.Types.String,args:[s.Types.Date]},Now:{returnType:s.Types.Date,args:[]},Today:{returnType:s.Types.Date,args:[]},Year:y,Month:y,Day:y,Hour:y,Minute:y,Second:y,Millisecond:y,Years:v,Months:v,Days:v,Hours:v,Minutes:v,Seconds:v,Milliseconds:v};t.DateLibrary={name:"Date",functions:{Format:function(e){return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)},Now:function(){return new Date},Today:function(){let e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate())},Year:function(e){return(0,i.default)(e.getFullYear())},Month:function(e){return(0,i.default)(e.getMonth()+1)},Day:function(e){return(0,i.default)(e.getDate())},Hour:function(e){return(0,i.default)(e.getHours())},Minute:function(e){return(0,i.default)(e.getMinutes())},Second:function(e){return(0,i.default)(e.getSeconds())},Millisecond:function(e){return(0,i.default)(e.getMilliseconds())},Years:function(e,t){return c(e,t)},Months:function(e,t){return d(e,t)},Days:function(e,t){return p(e,t)},Hours:function(e,t){return function(e,t){const n=new Date(e),r=new Date(t);return(0,i.default)(+n-+r).div(36e5).round()}(e,t)},Minutes:function(e,t){return f(e,t).div(6e4).round()},Seconds:function(e,t){return f(e,t).div(1e3).round()},Milliseconds:m},functionsInfo:g}},32045(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemberAccessExpression=void 0,t.instanceOfMemberAccessExpression=u,t.asMemberAccessExpression=function(e){return u(e)?e:null};const r=n(9313),i=n(5627),s=n(20749),o=n(42539),a=n(15459),l=n(71148);function u(e){return(null===e||void 0===e?void 0:e.nodeType)==a.NodeType.MemberAccessExpression}class c extends r.Expression{get variable(){return this.variableValue}constructor(e,t,n,r){super(n,r),this.variableValue=null,this.hasVariableReference=!0,this.hasNodeDependencies=!0,this.nodeType=a.NodeType.MemberAccessExpression,this.memberAccessLiteral=t,this.identifierPath=e}getDependencies(e){let t=e.getNode(this.memberAccessLiteral.parent);return null!=t?[t]:[]}static parse(e,t){let n=e.tokens;if(!c.isValid(n))return(0,o.newParseExpressionFailed)("MemberAccessExpression","Invalid expression.");let r=n.token(0,s.asMemberAccessLiteralToken);if(!r)return(0,o.newParseExpressionFailed)("MemberAccessExpression","Invalid expression.");let a=new i.IdentifierPath(r.parts),l=e.createReference(),u=new c(a,r,e,l);return(0,o.newParseExpressionSuccess)(u)}static isValid(e){return 1==e.length&&e.isTokenType(0,l.TokenType.MemberAccessLiteralToken)}getChildren(){return[]}validate(e){this.createVariableReference(e)}createVariableReference(e){this.variableValue=e.variableContext.createVariableReference(this.reference,this.identifierPath,e),null==this.variableValue&&e.logger.fail(this.reference,"Invalid identifier: '".concat(this.identifierPath.fullPath(),"'"))}deriveType(e){return this.memberAccessLiteral.deriveType(e)}}t.MemberAccessExpression=c},32346(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TableName=void 0;const r=n(70330);t.TableName=class{constructor(){this.valueValue=null}get value(){return r.Assert.notNull(this.valueValue,"value")}parseName(e){this.valueValue=e}toString(){return this.valueValue}}},32639(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VariableTypeDeclaration=void 0;const r=n(59611);class i extends r.Node{get variableType(){return this.variableTypeValue}constructor(e){super(e),this.variableTypeValue=null}setVariableType(e){this.variableTypeValue=e}validate(e){this.variableTypeValue=this.validateVariableType(e)}}t.VariableTypeDeclaration=i},33023(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExecutionLog=void 0;const r=n(59715),i=n(15459),s=n(77148),o=n(60885),a=n(68492);class l extends r.ParsableNode{get entries(){return this.entriesValue}get assignments(){return this.assignmentsValue}constructor(e,t){super(t),this.entriesValue=[],this.assignmentsValue=[],this.nodeType=i.NodeType.ExecutionLogging,this.message=e}parse(e){return e.line.tokens.isKeyword(0,s.Keywords.ExecutionLog)?this.parseEntry(e):this.parseAssignment(e)}parseEntry(e){let t=l.parse(e);return null==t?this:(this.entriesValue.push(t),t)}parseAssignment(e){let t=a.AssignmentDefinitionParser.parse(e);return null==t?this:(this.assignmentsValue.push(t),(0,r.instanceOfParsableNode)(t)?t:this)}getChildren(){return[...this.entriesValue]}validate(e){}static parse(e){const t=e.line,n=t.tokens,r=t.lineStartReference();if(!n.isKeyword(0,s.Keywords.ExecutionLog))return e.logger.fail(e.line.lineStartReference(),"Keyword expected 'Log'"),null;if(2!=n.length)return e.logger.fail(e.line.lineStartReference(),"Invalid number of tokens '"+n.length+"'. Expected: '2'"),null;const i=e.line.tokens.get(1),a=(0,o.asQuotedLiteralToken)(i);return null==a?(e.logger.fail(e.line.tokenReference(1),'Invalid token. "Message" expected.'),null):new l(a.value,r)}}t.ExecutionLog=l},33129(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenValidator=void 0;const r=n(71148);t.TokenValidator=class{constructor(e,t,n){this.parserName=e,this.logger=n,this.line=t,this.tokens=t.tokens,this.isValid=!0}count(e){return this.tokens.length!=e&&(this.fail(0,"Invalid number of tokens '".concat(this.tokens.length,"', should be '").concat(this.count,"'.")),this.isValid=!1),this}countMinimum(e){return this.tokens.length<e&&(this.fail(0,"Invalid number of tokens '".concat(this.tokens.length,"', should be at least '").concat(this.count,"'.")),this.isValid=!1),this}keyword(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.type(e,r.TokenType.KeywordToken),null!=t&&this.value(e,t),this}stringLiteral(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.type(e,r.TokenType.StringLiteralToken),null!=t&&this.value(e,t),this}operator(e,t){if(!this.checkValidTokenIndex(e,"".concat(t.toString()," operator")))return this;this.type(e,r.TokenType.OperatorToken);const n=this.tokens.get(e);return(null===n||void 0===n?void 0:n.type)!=t&&(this.fail(e,"Invalid operator token ".concat(e," value. Expected: '").concat(t,"' Actual: '").concat(null===n||void 0===n?void 0:n.type,"'")),this.isValid=!1),this}memberAccess(e,t){return this.type(e,r.TokenType.MemberAccessLiteralToken),null!=t&&this.value(e,t),this}comment(e){return this.type(e,r.TokenType.CommentToken),this}quotedString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.validateType(e,r.TokenType.QuotedLiteralToken);return null!=n&&null!=t&&n.value!=t&&(this.fail(e,"Invalid token ".concat(e," value. Expected: '").concat(t,"' Actual: '").concat(null===n||void 0===n?void 0:n.value,"'")),this.isValid=!1),this}numberLiteral(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.validateType(e,r.TokenType.NumberLiteralToken);return null!=n&&null!=t&&n.numberValue!=t&&(this.fail(e,"Invalid token ".concat(e," value. Expected: '").concat(t,"' Actual: '").concat(n.value,"'")),this.isValid=!1),this}boolean(e,t){const n=this.validateType(e,r.TokenType.BooleanLiteralToken);return null!=n&&n.booleanValue!=t&&(this.fail(e,"Invalid token ".concat(e," value. Expected: '").concat(t,"' Actual: '").concat(n.value,"'")),this.isValid=!1),this}dateTime(e,t,n,i,s,o,a){let l=this.validateType(e,r.TokenType.DateTimeLiteralToken),u=new Date(t,n-1,i,s,o,a);return null!=l&&null!=l.dateTimeValue&&l.dateTimeValue.getTime()!=u.getTime()&&(this.fail(e,"Invalid token value at ".concat(e,". Expected: '").concat(u.toISOString(),"' Actual: '").concat(l.dateTimeValue.toISOString(),"'")),this.isValid=!1),this}type(e,t){return this.validateType(e,t),this}isLiteralToken(e){var t;if(!this.checkValidTokenIndex(e,"LiteralToken"))return this;let n=this.tokens.get(e);return null==(n.tokenIsLiteral?n:null)?(this.fail(e,"Invalid token type as ".concat(e,". Expected: 'ILiteralToken' Actual: '").concat(null===(t=this.tokens.get(e))||void 0===t?void 0:t.tokenType,"'")),this.isValid=!1,this):this}validateType(e,t){if(!this.checkValidTokenIndex(e,t.toString()))return null;let n=this.tokens.get(e);return n.tokenType!=t?(this.fail(e,"Invalid token. Expected: '".concat(t,"' Actual: '").concat(n.tokenType,"(").concat(n.value,")'")),this.isValid=!1,null):n}value(e,t){if(!this.checkValidTokenIndex(e,""))return this;const n=this.tokens.get(e);return n.value!=t&&(this.fail(e,"Invalid token value as ".concat(e,". Expected: '").concat(t,"' Actual: '").concat(n.value,"'")),this.isValid=!1),this}checkValidTokenIndex(e,t){return e<this.tokens.length||(this.failReference(this.line.lineEndReference(),"Token expected: '".concat(t,"'")),this.isValid=!1,!1)}failReference(e,t){this.logger.fail(e,"(".concat(this.parserName,") ").concat(t))}fail(e,t){this.logger.fail(this.line.tokenReference(e),"(".concat(this.parserName,") ").concat(t))}assert(){if(!this.isValid)throw new Error(this.logger.formatMessages())}}},33948(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenList=void 0;class n{get(e){return this.values[e]}get length(){return this.values.length}constructor(e){this.values=e}asArray(){return[...this.values]}isComment(){return 1==this.values.length&&"CommentToken"==this.values[0].tokenType}tokenValue(e){return e>=0&&e<=this.values.length-1?this.values[e].value:null}tokensFrom(e){return e==this.values.length?new n([]):(this.checkValidTokenIndex(e),this.tokensRange(e,this.values.length-1))}tokensFromStart(e){return this.tokensRange(0,e-1)}tokensRange(e,t){let r=this.values.slice(e,t+1);return new n(r)}isTokenType(e,t){return e>=0&&e<=this.values.length-1&&this.values[e].tokenType==t}token(e,t){return this.checkValidTokenIndex(e),t(this.values[e])}literalToken(e){return this.checkValidTokenIndex(e),e>=0&&e<=this.values.length-1&&this.values[e].tokenIsLiteral?this.values[e]:null}isLiteralToken(e){return e>=0&&e<=this.values.length-1&&this.values[e].tokenIsLiteral}isQuotedString(e){return e>=0&&e<=this.values.length-1&&"QuotedLiteralToken"==this.values[e].tokenType}isKeyword(e,t){var n;return e>=0&&e<=this.values.length-1&&"KeywordToken"==this.values[e].tokenType&&(null===(n=this.values[e])||void 0===n?void 0:n.value)==t}isOperatorToken(e,t){return e>=0&&e<=this.values.length-1&&"OperatorToken"==this.values[e].tokenType&&this.values[e].type==t}operatorToken(e){return e>=0&&e<=this.values.length-1&&"OperatorToken"==this.values[e].tokenType?this.values[e]:null}toString(){let e=new Array;return this.values.map(t=>{e.push("".concat(t.tokenType,"('").concat(t.value,"') "))}),e.join("")}checkValidTokenIndex(e){if(e<0||e>=this.values.length)throw new Error("Invalid token index ".concat(e," (length: ").concat(this.values.length,")"))}characterPosition(e){return e<0||e>=this.values.length?null:this.values[e].firstCharacter.position}find(e,t){for(let n=0;n<this.values.length;n++){if(this.values[n].tokenType==t)return n}return-1}}t.TokenList=n},34067(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.format=function(e,t){const n=t>0?" ".repeat(2*t):"",r=[];if(r.push("\n"),e)for(const i of e)r.push(n+i+"\n");else r.push(n+"No entries\n");return r.join("")},t.formatLine=function(e,t){const n=[];for(const r of e)n.length>0&&n.push(t),n.push(null===r||void 0===r?void 0:r.toString());return n.join("")}},34632(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AssignmentExpression=void 0,t.instanceOfAssignmentExpression=p,t.asAssignmentExpression=function(e){return p(e)?e:null};const r=n(9313),i=n(42539),s=n(15229),o=n(15459),a=n(69536),l=n(75277),u=n(30097),c=n(43056),d=n(71148);function p(e){return(null===e||void 0===e?void 0:e.nodeType)==o.NodeType.AssignmentExpression}class h extends r.Expression{constructor(e,t,n,r){super(n,r),this.nodeType=o.NodeType.AssignmentExpression,this.variable=e,this.assignment=t}static parse(e,t){let n=e.tokens;if(!h.isValid(n))return(0,i.newParseExpressionFailed)("AssignmentExpression","Invalid expression.");let r=t.parse(n.tokensFromStart(1),e.line);if("success"!=r.state)return r;let s=t.parse(n.tokensFrom(2),e.line);if("success"!=s.state)return s;let o=e.createReference(),a=new h(r.result,s.result,e,o);return(0,i.newParseExpressionSuccess)(a)}static isValid(e){return e.length>=3&&(e.isTokenType(0,d.TokenType.StringLiteralToken)||e.isTokenType(0,d.TokenType.MemberAccessLiteralToken))&&e.isOperatorToken(1,s.OperatorType.Assignment)}getChildren(){return[this.assignment,this.variable]}validate(e){var t;const n=(0,l.asHasVariableReference)(this.variable);if(null==n||null==n.variable)return void e.logger.fail(this.reference,"Unknown variable name: '".concat(this.variable,"'."));const r=n.variable,i=this.assignment.deriveType(e);null==i||(null===(t=r.variableType)||void 0===t?void 0:t.equals(i))||e.logger.fail(this.reference,"Variable '".concat(r,"' of type '").concat(r.variableType,"' is not assignable from expression of type '").concat(i,"'."))}deriveType(e){return this.assignment.deriveType(e)}usedVariables(){const e=(0,l.asHasVariableReference)(this.variable);if(null==e||null==e.variable)return(0,c.getReadVariableUsage)(this.assignment);const t=e.variable;return[new a.VariableUsage(t.path,t.componentType,t.variableType,t.source,u.VariableAccess.Write),...(0,c.getReadVariableUsage)(this.assignment)]}}t.AssignmentExpression=h},35087(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParserLogger=t.LogEntry=void 0;const r=n(45014),i=n(30292),s=n(34067),o=n(65635),a=n(15312);class l{constructor(e,t,n,r){this.reference=e,this.node=t,this.isError=n,this.message=r,this.sortIndex=e.sortIndex}toString(){var e;return null!=this.node?"(".concat(null===(e=this.node)||void 0===e?void 0:e.nodeName,") ").concat(this.message):this.message}}t.LogEntry=l;t.ParserLogger=class{get entries(){return this.logEntries}constructor(e){this.logEntries=[],this.currentNode=null,this.failedMessages=0,this.logger=e}hasErrors(){return this.failedMessages>0}hasComponentErrors(){return(0,r.any)(this.logEntries,this.isComponentError)}logInfo(e){this.logger.logInformation(e)}log(e,t){this.logger.logDebug("".concat(e,": ").concat(t)),this.logEntries.push(new l(e,this.currentNode,!1,"".concat(e,": ").concat(t)))}fail(e,t){this.failedMessages++,this.logger.logError("".concat(e,": ERROR - ").concat(t)),this.logEntries.push(new l(e,this.currentNode,!0,"".concat(e,": ERROR - ").concat(t)))}logNodes(e){if(!this.logger.isEnabled(i.LogLevel.Debug))return;let t=new o.NodesLogger;t.log(e),this.logger.logDebug("Parsed nodes:\n".concat(t.toString()))}hasErrorMessage(e){return(0,r.any)(this.logEntries,t=>t.isError&&t.message.includes(e))}formatMessages(){return"".concat((0,s.format)(this.logEntries,0),"\n")}setCurrentNode(e){this.currentNode=e}resetCurrentNode(){this.currentNode=null}nodeHasErrors(e){return(0,r.any)(this.logEntries,t=>t.isError&&t.node===e)}errorNodeMessages(e){return(0,r.where)(this.logEntries,t=>t.isError&&t.node===e).sort(this.sortEntry).map(e=>e.message)}errorNodesMessages(e){return(0,r.where)(this.logEntries,t=>t.isError&&null!=t.node&&e.indexOf(t.node)>=0).sort(this.sortEntry).map(e=>e.message)}errorComponentMessages(){return(0,r.where)(this.logEntries,this.isComponentError).sort(this.sortEntry).map(e=>e.message)}isComponentError(e){return e.isError&&(null==e.node||(0,a.instanceOfLexyScriptNode)(e.node))}errorMessages(){return(0,r.where)(this.logEntries,e=>e.isError).sort(this.sortEntry).map(e=>e.message)}sortEntry(e,t){return e.sortIndex<t.sortIndex?-1:1}assertNoErrors(){if(this.hasErrors())throw new Error("Parsing failed: ".concat(this.formatMessages()))}}},35223(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Parameters=void 0;const r=n(59715),i=n(15459),s=n(75019),o=n(68492);class a extends r.ParsableNode{constructor(e){super(e),this.assignmentsValue=[],this.nodeType=i.NodeType.ScenarioParameters}parse(e){let t=o.AssignmentDefinitionParser.parse(e);return null==t?this:(this.assignmentsValue.push(t),(0,r.instanceOfParsableNode)(t)?t:this)}getChildren(){return[...this.assignmentsValue]}validate(e){}allAssignments(){return(0,s.flattenAssignments)(this.assignmentsValue)}}t.Parameters=a},35227(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpecificationsLogEntry=void 0;t.SpecificationsLogEntry=class{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this.reference=e,this.node=t,this.isError=n,this.message=r,this.errors=i,this.executionLogging=s}toString(){var e;return null==this.errors?this.message:this.message+"\n"+(null===(e=this.errors)||void 0===e?void 0:e.join("\n"))}}},35284(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(48556),t),i(n(29770),t),i(n(30292),t),i(n(70330),t),i(n(65611),t)},36311(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParsableNodeIndex=void 0;const r=n(58996);t.ParsableNodeIndex=class{constructor(e){this.values=new Array,this.values[0]=e}getCurrentOrDescend(e){let t=this.values[e];return this.clearPreviousChildren(e),t}clearPreviousChildren(e){let t=e+1;for(;t<this.values.length&&null!=this.values[t++];)this.values[t]=null}set(e,t){this.values[e]=t}getParentComponent(e){for(;e>=0;){let t=(0,r.asComponentNode)(this.values[e--]);if(null!=t)return t}throw new Error("Can't find an IComponentNode parent.")}}},36478(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateJavaScriptCode=function(e){switch(e.nodeType){case r.NodeType.Function:return(0,i.createFunctionCode)(e);case r.NodeType.EnumDefinition:return(0,s.createEnumCode)(e);case r.NodeType.Table:return(0,o.createTableCode)(e);case r.NodeType.TypeDefinition:return(0,a.createTypeCode)(e);case r.NodeType.Scenario:const t=(0,l.asScenario)(e);return t&&t.functionNode?(0,i.createFunctionCode)(t.functionNode):null;default:throw new Error("No writer defined: '".concat(e.nodeType,"'"))}};const r=n(15459),i=n(3019),s=n(18),o=n(97365),a=n(13359),l=n(59849)},37381(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemberFunctionCallExpression=void 0,t.instanceOfMemberFunctionCallExpression=a,t.asMemberFunctionCallExpression=function(e){return a(e)?e:null};const r=n(15459),i=n(70330),s=n(60059),o=n(73986);function a(e){return(null===e||void 0===e?void 0:e.nodeType)==r.NodeType.MemberFunctionCallExpression}class l extends s.FunctionCallExpression{get functionCall(){return i.Assert.notNull(this.functionCallValue,"functionCall")}constructor(e,t,n){super(n),this.functionCallValue=null,this.hasNodeDependencies=!0,this.nodeType=r.NodeType.MemberFunctionCallExpression,this.functionPath=i.Assert.notNull(e,"functionPath"),this.args=i.Assert.notNull(t,"args")}getDependencies(e){let t=e.getNode(this.functionPath.rootIdentifier);return null!=t?[t]:[]}getChildren(){return[...this.args]}validate(e){if(0==this.functionPath.parts)return void e.logger.fail(this.reference,"Invalid function name: '".concat(this.functionPath,"'. Invalid number of parts: ").concat(this.functionPath,"."));const t=this.getFunction(e);if(null==t)return void e.logger.fail(this.reference,"Invalid function name: '".concat(this.functionPath,"'. Function is null."));const n=t.validateArguments(e,this.args,this.reference);"success"==n.state&&(this.functionCallValue=n.functionCall)}getFunction(e){const t=e.variableContext.getVariableTypeByPath(this.functionPath.withoutLastPart(),e);if(null!=t)return this.getVariableTypeFunction(e,t);const n=e.componentNodes.getType(this.functionPath.rootIdentifier);return null!=n?this.getVariableTypeFunction(e,n):this.getLibraryFunction(e)}getVariableTypeFunction(e,t){const n=(0,o.asObjectType)(t);return null==n?null:n.getFunction(this.functionPath.lastPart())}getLibraryFunction(e){const t=this.functionPath.withoutLastPart(),n=e.libraries.getLibrary(t),r=this.functionPath.lastPart();return null==n?null:n.getFunction(r)}deriveType(e){const t=this.getFunction(e);return null==t?null:t.getResultsType(this.args)}}t.MemberFunctionCallExpression=l},37532(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringLiteralToken=void 0,t.instanceOfStringLiteralToken=s,t.asStringLiteralToken=function(e){return s(e)?e:null};const r=n(41844),i=n(71148);function s(e){return(null===e||void 0===e?void 0:e.tokenType)==i.TokenType.StringLiteralToken}class o extends r.Token{get typedValue(){return this.value}constructor(e,t){super(t),this.tokenIsLiteral=!0,this.tokenType=i.TokenType.StringLiteralToken,this.value=e}deriveType(e){throw new Error("Not supported. Type should be defined by node or expression.")}toString(){return this.value}}t.StringLiteralToken=o},37954(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectTypeVariable=void 0;t.ObjectTypeVariable=class{constructor(e,t){this.name=e,this.type=t}}},38184(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createVariableClass=function(e,t,n,r){if(r.openScope("class ".concat(t)),n)for(const i of n)y(i,r);(function(e,t,n){if(n.openScope("static ".concat(u.LexyCodeConstants.validateMethod,"(name, value, validationErrors)")),n.writeLine("value = !!value ? value : {};"),t)for(let r=0;r<t.length;r++){g(t[r],n)}n.closeScope()})(0,n,r),r.closeScope(),r.writeLine()},t.renderTypeDefaultExpression=v;const r=n(46384),i=n(54450),s=n(27449),o=n(31200),a=n(88310),l=n(92272),u=n(2013),c=n(70330),d=n(99583),p=n(45375),h=n(82140),f=n(85126),m=n(87274);function y(e,t){t.startLine("".concat(e.name," = ")),function(e,t){null!=e.defaultExpression?t.renderExpression(e.defaultExpression):v(e.type,t)}(e,t),t.endLine(";")}function v(e,t){const n=(0,r.asPrimitiveVariableTypeDeclaration)(e);if(null!=n)return void function(e,t){switch(e.type){case s.TypeNames.number:return void t.write("".concat(u.LexyCodeConstants.environmentVariable,".Decimal(0)"));case s.TypeNames.boolean:return void t.write("false");case s.TypeNames.string:return void t.write('""');case s.TypeNames.date:return void t.write('new Date("0001-01-01T00:00:00")');default:throw new Error("Invalid type: ".concat(e.type))}}(n,t);const c=(0,i.asObjectVariableTypeDeclaration)(e);if(null==c)throw new Error("Wrong VariableTypeDeclaration ".concat(e.nodeType));!function(e,t){var n,r;switch(null===(n=e.variableType)||void 0===n?void 0:n.variableTypeName){case a.VariableTypeName.DeclaredType:return void t.write("new ".concat((0,f.customVariableIdentifier)(e,t),"()"));case a.VariableTypeName.EnumType:const n=(0,o.asEnumType)(e.variableType);if(null==n)throw new Error("declaredType.variableType not enumType");return void t.writeEnvironment(".".concat((0,m.translateType)(n),".").concat(n.firstMemberName()));case a.VariableTypeName.GeneratedType:const i=(0,l.asGeneratedType)(e.variableType);if(null==i)throw new Error("declaredType.variableType not generatedType");return t.write("new "),t.writeEnvironment(".".concat((0,m.translateGeneratedType)(i))),void t.write("()");default:throw new Error("Invalid renderDefaultExpressionSyntax: ".concat(null===(r=e.variableType)||void 0===r?void 0:r.variableTypeName))}}(c,t)}function g(e,t){var n,r;const i=null!=e.defaultExpression;switch(null===(n=e.variableType)||void 0===n?void 0:n.variableTypeName){case a.VariableTypeName.DeclaredType:const n=c.Assert.notNull((0,d.asDeclaredType)(e.variableType),"declaredType");t.writeLine("".concat(u.LexyCodeConstants.environmentVariable,".").concat((0,p.typeClassName)(n.type),".").concat(u.LexyCodeConstants.validateMethod,"(").concat(u.LexyCodeConstants.environmentVariable,'.systemFunctions.identifierPath(name, "').concat(e.name,'"), value["').concat(e.name,'"], validationErrors);'));break;case a.VariableTypeName.EnumType:const f=c.Assert.notNull((0,o.asEnumType)(e.variableType),"enumType");t.writeLine("".concat(u.LexyCodeConstants.environmentVariable,".").concat((0,p.enumClassName)(f.type),".").concat(u.LexyCodeConstants.validateMethod,"(").concat(u.LexyCodeConstants.environmentVariable,'.systemFunctions.identifierPath(name, "').concat(e.name,'"), value["').concat(e.name,'"], ').concat(i,", validationErrors);"));break;case a.VariableTypeName.PrimitiveType:const y=c.Assert.notNull((0,h.asPrimitiveType)(e.variableType),"primitiveType");!function(e,t,n,r){const i=function(e){switch(e.type){case s.TypeNames.string:case s.TypeNames.boolean:case s.TypeNames.date:case s.TypeNames.number:return e.type;default:throw new Error("Invalid primitive type: '".concat(e.type,"'"))}}(n);r.writeLine("".concat(u.LexyCodeConstants.environmentVariable,".validate.").concat(i,"(").concat(u.LexyCodeConstants.environmentVariable,'.systemFunctions.identifierPath(name, "').concat(e,'"), value["').concat(e,'"], ').concat(t,", validationErrors);"))}(e.name,i,y,t);break;case a.VariableTypeName.GeneratedType:const v=c.Assert.notNull((0,l.asGeneratedType)(e.variableType),"generatedType");t.writeLine("".concat(u.LexyCodeConstants.environmentVariable,".").concat((0,m.translateGeneratedType)(v),".").concat(u.LexyCodeConstants.validateMethod,"(").concat(u.LexyCodeConstants.environmentVariable,'.systemFunctions.identifierPath(name, "').concat(e.name,'"), value["').concat(e.name,'"], validationErrors);'));break;default:throw new Error("Unexpected variable type: '".concat(null===(r=e.variableType)||void 0===r?void 0:r.variableTypeName,"'"))}}},38869(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getScenarioParameterValues=function(e,t,n){if(null==t||null==n)return{};const r={};return function(e,t,n,r){for(const i of t)a(e,n,i,r)}(e,t.allAssignments(),n,r),r},t.getTableRowValues=function(e,t,n){const r={};return function(e,t,n,r){for(let i=0;i<n.values.length;i++){const s=t.getColumnByIndex(i),o=n.values[i];null!=s&&l(e,s,o,r)}}(e,t,n,r),r};const r=n(45014),i=n(18207),s=n(70330),o=n(5627);function a(e,t,n,o){var a;const l=s.Assert.notNull((0,i.asAssignmentDefinition)(n),"assignmentDefinition");if(null==(0,r.firstOrDefault)(t.variables,e=>e.name==l.variable.rootIdentifier))throw new Error("Function '".concat(null===(a=null===e||void 0===e?void 0:e.name)||void 0===a?void 0:a.value,"' parameter '").concat(l.variable.rootIdentifier,"' not found."));if(null==l.variableType)throw new Error("parameter.variableType is null");const c=function(e){return e.constantValue.value}(l);u(o,l.variable,c)}function l(e,t,n,i){const s=o.IdentifierPath.parseString(t.name);(function(e,t){return null!=(null===e||void 0===e?void 0:e.parameters)&&(0,r.any)(e.parameters.variables,e=>e.name==t.rootIdentifier)})(e,s)&&u(i,s,n.getValue())}function u(e,t,n){let r=e;for(;t.hasChildIdentifiers;)r[t.rootIdentifier]||(r[t.rootIdentifier]={}),r=r[t.rootIdentifier],t=t.childrenReference();r[t.rootIdentifier]=n}},38952(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newParseExpressionsFailed=function(e,t){return{state:"failed",errorMessage:"(".concat(e,") ").concat(t)}},t.newParseExpressionsSuccess=function(e){return{state:"success",result:e}}},38983(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deepCopy=s;const i=r(n(51507));function s(e){return null===e?null:e instanceof Date?new Date(e):i.default.isDecimal(e)?e.toNumber():"object"!==typeof e?e:Array.isArray(e)?function(e){return e.map(e=>s(e))}(e):function(e){const t={};return Object.keys(e).forEach(n=>{n.startsWith("__")||(t[n]=s(e[n]))}),t}(e)}},39713(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpectExecutionErrors=void 0;const r=n(15459),i=n(3176);class s extends i.ErrorsNode{constructor(e){super(e),this.nodeType=r.NodeType.ScenarioExpectExecutionErrors}}t.ExpectExecutionErrors=s},39841(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Validate=void 0;const i=r(n(51507));t.Validate=class{static number(e,t,n,r){this.isMissing(e,t,"number",n,r)||("[object Decimal]"===toString.call(t)||t instanceof i.default?!t.isNaN()&&t.isFinite()||r.push("'".concat(e,"' should have a 'number' value. Invalid number value: '").concat(t,"'")):r.push("'".concat(e,"' should have a 'number' value. Invalid type: ").concat(toString.call(t),". Use decimal.js.")))}static string(e,t,n,r){this.isMissing(e,t,"string",n,r)||"string"===typeof t||t instanceof String||r.push("'".concat(e,"' should have a 'string' value. Invalid type: '").concat(toString.call(t),"'"))}static date(e,t,n,r){this.isMissing(e,t,"date",n,r)||(t instanceof Date?"Invalid Date"===String(t)&&r.push("'".concat(e,"' should have a 'date' value. Invalid date value: '").concat(t,"'")):r.push("'".concat(e,"' should have a 'date' value. Invalid type: '").concat(toString.call(t),"'")))}static boolean(e,t,n,r){if(this.isMissing(e,t,"boolean",n,r))return;const i=toString.call(t);"[object Boolean]"!==i&&r.push("'".concat(e,"' should have a 'boolean' value. Invalid type: ").concat(i))}static isMissing(e,t,n,r,i){return(null===t||void 0===t)&&(r||i.push("'".concat(e,"' should have a '").concat(n,"' value. Value missing.")),!0)}}},39862(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const n=new Array;return o(0,e,t,n),n.length>0?n:null};const r=n(98400),i=n(18207);function s(e,t,n,s){function a(t){s.push(" ".repeat(2*e)+t)}function l(e,t){const n=(0,r.asObjectAssignmentDefinition)(e);if(null!=n)return t?n.variable.lastPart():n.variable.fullPath();const s=(0,i.asAssignmentDefinition)(e);return t?null===s||void 0===s?void 0:s.variable.lastPart():null===s||void 0===s?void 0:s.variable.fullPath()}function u(e,t){const n=(0,r.asObjectAssignmentDefinition)(t);null!=n?d(!0,e,null,n.assignments):function(e,t){const n=(0,i.asAssignmentDefinition)(t),r=null===n||void 0===n?void 0:n.variable.fullPath(),s=null===n||void 0===n?void 0:n.constantValue.value;(function(e,t){return e instanceof Date?t instanceof Date&&e.toISOString()!=t.toISOString():"[object Decimal]"===toString.call(t)?!t.equals(e):e!=t})(s,e)&&(a("".concat(t.reference," - Invalid variable value: '").concat(r,"'")),a("  Expected: '".concat(s,"'")),a("  Actual: '".concat(e,"'")))}(e,t)}function c(e,t,n){return e?null!=t&&e in t?t[e]:null!=n&&e in n?n[e]:null:null}function d(e,t,n,r){for(let i=0;i<r.length;i++){const s=r[i],o=l(s,e),d=c(o,t,n);null==d?a("".concat(s.reference," - Variable not found: '").concat(o,"'")):u(d,s)}}null==t&&null!=n?a("".concat(n.reference," - Not found: '").concat(n.message,"'")):null!=t&&null==n?a("Log not expected: '".concat(t.message,"'")):null!=t&&null!=n&&(!function(e,t){e.message!=t.message&&(a("Invalid log:"),a("  Expected: '".concat(t.message,"'")),a("  Actual: '".concat(e.message,"'")))}(t,n),o(e+1,t.entries,n.entries,s),d(!1,t.readVariables,t.writeVariables,n.assignments))}function o(e,t,n,r){const i=Math.max(t.length,n.length);for(let o=0;o<i;o++){s(e,o<t.length?t[o]:null,o<n.length?n[o]:null,r)}}},40350(e,t){"use strict";function n(e){return e.charCodeAt(0)}Object.defineProperty(t,"__esModule",{value:!0}),t.TokenValues=void 0;class r{}t.TokenValues=r,r.TableSeparator=n("|"),r.Quote=n('"'),r.Assignment=n("="),r.MemberAccessString=".",r.ArgumentSeparator=n(","),r.DivisionOrComment=n("/"),r.Addition=n("+"),r.Subtraction=n("-"),r.Multiplication=n("*"),r.Modulus=n("%"),r.OpenParentheses=n("("),r.CloseParentheses=n(")"),r.OpenBrackets=n("["),r.CloseBrackets=n("]"),r.GreaterThan=n(">"),r.LessThan=n("<"),r.NotEqualStart=n("!"),r.And=n("&"),r.Or=n("|"),r.Spread=n("."),r.DecimalSeparator=n("."),r.DateTimeStarter="d",r.BooleanTrue="true",r.BooleanFalse="false",r.Dash=n("-"),r.Slash=n("/"),r.Colon=n(":"),r.Space=n(" ")},40693(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LookUpRowFunctionCall=void 0,t.instanceOfLookUpRowFunctionCall=i,t.asLookUpRowFunctionCall=function(e){return i(e)?e:null};const r=n(93109);function i(e){return(null===e||void 0===e?void 0:e.functionCallType)==r.MemberFunctionCallType.LookUpRowFunctionCall}t.LookUpRowFunctionCall=class{constructor(e,t,n,i,s){this.functionCallType=r.MemberFunctionCallType.LookUpRowFunctionCall,this.tableName=e,this.valueExpression=t,this.discriminatorExpression=n,this.searchValueColumn=i,this.discriminatorColumn=s}}},41486(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.VariableSource=void 0,function(e){e.Unknown="Unknown",e.Parameters="Parameters",e.Results="Results",e.Code="Code",e.Type="Type"}(n||(t.VariableSource=n={}))},41844(e,t){"use strict";function n(e){return!!(null===e||void 0===e?void 0:e.tokenType)}Object.defineProperty(t,"__esModule",{value:!0}),t.Token=void 0,t.instanceOfToken=n,t.asToken=function(e){return n(e)?e:null};t.Token=class{constructor(e){this.firstCharacter=e}}},42021(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Table=void 0,t.instanceOfTable=d,t.asTable=function(e){return d(e)?e:null};const r=n(58996),i=n(32346),s=n(74792),o=n(62737),a=n(92272),l=n(15459),u=n(19137),c=n(37954);function d(e){return(null===e||void 0===e?void 0:e.nodeType)==l.NodeType.Table}class p extends r.ComponentNode{get header(){return this.headerValue}get rows(){return this.rowsValue}get nodeName(){return this.name.value}constructor(e,t){super(t),this.invalidHeader=!1,this.rowsValue=[],this.headerValue=null,this.nodeType=l.NodeType.Table,this.name=new i.TableName,this.name.parseName(e)}parse(e){if(this.invalidHeader)return this;if(null==this.headerValue)return this.headerValue=s.TableHeader.parse(e),null==this.headerValue&&(this.invalidHeader=!0),this;const t=o.TableRow.parse(e,this.headerValue);return null!=t&&this.rows.push(t),this}getChildren(){return null!=this.header?[this.header,...this.rows]:[...this.rows]}validate(e){null==this.header&&e.logger.fail(this.reference,"No table header found.")}validateTree(e){const t=e.createVariableScope();try{super.validateTree(e)}finally{t[Symbol.dispose]()}}getRowType(){if(null==this.header)throw new Error("Header not set.");const e=this.header.columns.map(e=>{const t=e.type.variableType;return new c.ObjectTypeVariable(e.name,t)});return new a.GeneratedType(this.name.value,this,u.GeneratedTypeSource.TableRow,e)}}t.Table=p,p.countName="Count",p.rowName="Row"},42163(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScenarioRunner=void 0;const i=n(34067),s=n(45014),o=n(18207),a=n(70330),l=r(n(39862)),u=r(n(53)),c=n(38869),d=n(5627);class p{get failed(){return this.failedValue}constructor(e,t,n,r,i,s,o){this.functionNode=null,this.failedValue=!1,this.fileName=e,this.compiler=t,this.context=i,this.componentNodes=n,this.parserLogger=s,this.dependencies=o,this.scenario=r}countScenarios(){return this.scenario.validationTable?this.scenario.validationTable.rows.length:1}run(){if(this.functionNode=this.getFunctionNode(this.scenario,this.componentNodes),!this.validateScenarioErrors())return;if(!this.validateErrors())return;const e=a.Assert.notNull(this.functionNode,"functionNode"),t=this.dependencies.nodeAndDependencies(e),n=this.compile(t).getFunction(e);if(null!=this.scenario.validationTable)this.runFunctionWithValidationTable(n,e);else{const t=(0,c.getScenarioParameterValues)(e,this.scenario.parameters,e.parameters);this.runFunctionWithValues(t,null,n)}}runFunctionWithValidationTable(e,t){if(null!=this.scenario.validationTable&&null!=this.scenario.validationTable.header)for(const n of this.scenario.validationTable.rows){const r=(0,c.getTableRowValues)(t,this.scenario.validationTable.header,n);this.runFunctionWithValues(r,n,e)}}runFunctionWithValues(e,t,n){const r=this.runFunction(n,e);if(null==r)return;if(!this.validateExecutionLogging(r))return;const i=this.validateResult(r,t);i.length>0?this.fail("Results validation failed.",i,null===t||void 0===t?void 0:t.index):this.context.success(this.scenario,r.logging,null===t||void 0===t?void 0:t.index)}getFunctionNode(e,t){var n;if(null!=e.functionNode)return e.functionNode;if(null===(n=e.functionName)||void 0===n?void 0:n.hasValue){const n=t.getFunction(e.functionName.value);return null==n&&this.fail("Unknown function: "+e.functionName,this.parserLogger.errorNodeMessages(this.scenario)),n}return null}runFunction(e,t){try{return e.run(t)}catch(n){return this.validateExecutionErrors(n)||this.fail("Execution error occurred.",["Error: ",n.stack]),null}}compile(e){try{return this.compiler.compile(e)}catch(t){throw new Error("Exception occurred while compiling scenario '"+this.scenario.name+"' from '"+this.fileName+"'\n"+t.stack)}}parserLogging(){return"------- Filename: ".concat(this.fileName,"\n").concat((0,i.format)(this.parserLogger.errorMessages(),2))}fail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.failedValue=!0,this.context.fail(this.scenario,e,t,n)}validateResult(e,t){const n=[];return null!=t&&this.validateTableResults(t,e,n),null!=this.scenario.results&&p.validateResults(this.scenario.results.allAssignments(),e,n),n}static validateResults(e,t,n){for(const r of e)p.validateResult(r,t,n)}static validateResult(e,t,n){const r=a.Assert.notNull((0,o.asAssignmentDefinition)(e),"assignmentDefinition");if(null==r.variableType)throw new Error("expected.variableType is null");const i=t.getValue(r.variable,n),s=r.constantValue.value;null!=i&&null!=s&&p.compare(i,s)||n.push("'".concat(r.variable,"' should be '").concat(null!==s&&void 0!==s?s:"<null>","' (").concat(null===s||void 0===s?void 0:s.constructor.name,") but is '").concat(null!==i&&void 0!==i?i:"<null>","' (").concat(null===i||void 0===i?void 0:i.constructor.name,")"))}validateTableResults(e,t,n){var r,i;for(let s=0;s<e.values.length;s++){const o=null===(i=null===(r=this.scenario.validationTable)||void 0===r?void 0:r.header)||void 0===i?void 0:i.getColumnByIndex(s);if(null==o)continue;const a=d.IdentifierPath.parseString(o.name);if(!this.isResult(a))continue;const l=e.values[s];p.validateRowValueResult(a,l,t,n)}}isResult(e){var t;if(null!=(null===(t=this.functionNode)||void 0===t?void 0:t.results))return(0,s.any)(this.functionNode.results.variables,t=>t.name==e.rootIdentifier)}static validateRowValueResult(e,t,n,r){let i=n.getValue(e,r),s=t.getValue();null!=i&&null!=s&&p.compare(i,s)||r.push("'".concat(e,"' should be '").concat(null!==s&&void 0!==s?s:"<null>","' (").concat(null===s||void 0===s?void 0:s.constructor.name,") but is '").concat(null!==i&&void 0!==i?i:"<null>","' (").concat(null===i||void 0===i?void 0:i.constructor.name,")"))}getDependenciesErrors(){var e,t,n;const r=null!==(n=null!==(t=null!==(e=this.functionNode)&&void 0!==e?e:this.scenario.functionNode)&&void 0!==t?t:this.scenario.enum)&&void 0!==n?n:this.scenario.table;if(null==r)return this.fail("Scenario has no function, enum or table.",[]),null;const i=this.dependencies.nodeAndDependencies(r);return this.parserLogger.errorNodesMessages(i)}validateScenarioErrors(){const e=this.parserLogger.errorNodeMessages(this.scenario);if(0==e.length)return!0;if(e.length>0&&null!=this.scenario.expectExecutionErrors)return!0;const t=this.getDependenciesErrors(),n=null!==t?[...e,...t]:e,r=this.scenario.expectErrors;return this.validateExpectedErrors("Parsing Scenario",n,null===r||void 0===r?void 0:r.messages)}validateErrors(){var e;if(null===(e=this.scenario.expectComponentErrors)||void 0===e?void 0:e.hasValues)return this.validateComponentErrors();const t=this.getDependenciesErrors();if(null==t)return!1;const n=this.scenario.expectErrors;return this.validateExpectedErrors("Parsing",t,null===n||void 0===n?void 0:n.messages)}validateComponentErrors(){var e;const t=this.parserLogger.errorMessages();return this.validateExpectedErrors("Component",t,null===(e=this.scenario.expectComponentErrors)||void 0===e?void 0:e.messages)}validateExecutionErrors(e){var t;return!this.validateExpectedErrors("Execution",e.message.split("\n"),null===(t=this.scenario.expectExecutionErrors)||void 0===t?void 0:t.messages)}validateExpectedErrors(e,t,n){if(t.length>0&&void 0==n)return this.fail("".concat(e," errors: ").concat(t.length),u.default.new("Actual:").list(t).array()),!1;if(void 0==n||0==n.length)return!0;if(0==t.length)return this.fail("No ".concat(e," errors, but errors expected:"),u.default.new("Expected:").list(n).array()),!1;let r=[...t],i=[];for(const o of n){let e=(0,s.firstOrDefault)(r,e=>e.includes(o));null!=e?r=r.filter(t=>t!==e):i.push(o)}return(0,s.any)(r)||i.length>0?(this.fail("Wrong ".concat(e," error(s) occurred."),u.default.new("Expected:").list(this.markAsFound(n,i)).add("Actual:").list(this.markAsFound(t,r)).array()),!1):(this.context.success(this.scenario,null,null),!1)}markAsFound(e,t){const n=[];for(const r of e)t.indexOf(r)>=0?n.push("(not found) ".concat(r)):n.push("(found)     ".concat(r));return n}validateExecutionLogging(e){if(null==this.scenario.executionLogging)return!0;const t=(0,l.default)(e.logging,this.scenario.executionLogging.entries);return null==t||(t.forEach(e=>this.parserLogger.fail(this.scenario.reference,e)),this.fail("Invalid Execution Logging",t),!1)}static compare(e,t){return(null===t||void 0===t?void 0:t.constructor)==Date&&(null===e||void 0===e?void 0:e.constructor)==Date?e.toISOString()==t.toISOString():e==t}}t.ScenarioRunner=p},42539(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newParseExpressionFailed=function(e,t){return{state:"failed",errorMessage:"(".concat(e,") ").concat(t)}},t.newParseExpressionSuccess=function(e){return{state:"success",result:e}}},42711(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.NumberLibrary=void 0;const i=r(n(51507)),s=n(3378);const o={Parse:{returnType:s.Types.Number,args:[s.Types.String]},Floor:{returnType:s.Types.Number,args:[s.Types.Number]},Abs:{returnType:s.Types.Number,args:[s.Types.Number]}};t.NumberLibrary={name:"Number",functions:{Parse:function(e){return new i.default(e)},Floor:function(e){return e.floor()},Abs:function(e){return e.abs()}},functionsInfo:o}},43056(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getReadVariableUsageNodes=function(e){const t=new Array;return o.NodesWalker.walkNodes(e,e=>{u(l.Assert.is(r.asExpression,e,"node"),t)}),t},t.getReadVariableUsage=function(e){const t=new Array;return o.NodesWalker.walk(e,e=>{u(l.Assert.is(r.asExpression,e,"node"),t)}),t};const r=n(9313),i=n(75277),s=n(30097),o=n(72100),a=n(69536),l=n(70330);function u(e,t){if(null==e)return;const n=(0,i.asHasVariableReference)(e);if(null==n)return;const r=n.variable;if(null!=r){const e=new a.VariableUsage(r.path,r.componentType,r.variableType,r.source,s.VariableAccess.Read);t.push(e)}}},43105(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LookUpFunctionCall=void 0,t.instanceOfLookUpFunctionCall=i,t.asLookUpFunctionCall=function(e){return i(e)?e:null};const r=n(93109);function i(e){return(null===e||void 0===e?void 0:e.functionCallType)==r.MemberFunctionCallType.LookUpFunctionCall}t.LookUpFunctionCall=class{constructor(e,t,n,i,s,o){this.functionCallType=r.MemberFunctionCallType.LookUpFunctionCall,this.tableName=e,this.valueExpression=t,this.discriminatorExpression=n,this.resultColumn=i,this.searchValueColumn=s,this.discriminatorColumn=o}}},43288(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TableValue=void 0;const r=n(59611),i=n(15459);class s extends r.Node{constructor(e,t,n,r){super(r),this.nodeType=i.NodeType.TableValue,this.expression=t,this.index=e,this.tableHeader=n}getChildren(){return[this.expression]}validate(e){const t=this.tableHeader.getColumnByIndex(this.index);if(null==t)return;const n=this.expression.deriveType(e),r=t.type.variableType;1!=(null===r||void 0===r?void 0:r.equals(n))&&e.logger.fail(this.reference,"Invalid value type '".concat(n,"'. Expected '").concat(r,"'."))}}t.TableValue=s},44144(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArgumentList=void 0;const r=n(33948),i=n(10825),s=n(15229),o=n(71148);class a{constructor(){this.result=new Array,this.argumentTokens=new Array,this.countParentheses=0,this.countBrackets=0}}t.ArgumentList=class{static parse(e){if(0==e.length)return(0,i.newArgumentTokenParseSuccess)(new Array);let t=new a;for(let n=0;n<e.length;n++){const r=e.get(n);let i=this.processToken(t,r);if(null!=i)return i}return 0==t.argumentTokens.length?(0,i.newArgumentTokenParseFailed)("Invalid token ','. No tokens before comma."):(t.result.push(new r.TokenList(t.argumentTokens)),(0,i.newArgumentTokenParseSuccess)(t.result))}static processToken(e,t){if(t.tokenType!=o.TokenType.OperatorToken)return e.argumentTokens.push(t),null;const n=t;if(this.countScopeCharacters(e,n),0==e.countParentheses&&0==e.countBrackets&&n.type==s.OperatorType.ArgumentSeparator){if(0==e.argumentTokens.length)return(0,i.newArgumentTokenParseFailed)("Invalid token ','. No tokens before comma.");e.result.push(new r.TokenList(e.argumentTokens)),e.argumentTokens=new Array}else e.argumentTokens.push(t);return null}static countScopeCharacters(e,t){switch(t.type){case s.OperatorType.OpenParentheses:e.countParentheses++;break;case s.OperatorType.CloseParentheses:e.countParentheses--;break;case s.OperatorType.OpenBrackets:e.countBrackets++;break;case s.OperatorType.CloseBrackets:e.countBrackets--}}}},45014(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.any=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(const n of e)if(null==t||t(n))return!0;return!1},t.firstOrDefault=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null==t)return e.length>0?e[0]:null;for(const n of e)if(t(n))return n;return null},t.singleOrDefault=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null==t){if(e.length>1)throw new Error("More as one element found in array.");return 1==e.length?e[0]:null}let n=null;for(const r of e)if(t(r)){if(null!=n)throw new Error("More as one element found in array.");n=r}return n},t.lastOrDefault=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null==t)return e.length>0?e[e.length-1]:null;for(let n=e.length-1;n>=0;n--){const r=e[n];if(t(r))return r}return null},t.forEach=function(e,t){for(const n of e)t(n);return e},t.contains=function(e,t){for(const n of e)if(n==t)return!0;return!1},t.where=function(e,t){const n=[];for(const r of e)t(r)&&n.push(r);return n},t.whereSelect=function(e,t){const n=[];for(const r of e){let e=t(r);null!=e&&n.push(e)}return n},t.count=function(e,t){let n=0;for(const r of e)t(r)&&n++;return n},t.sum=function(e,t){let n=0;for(const r of e){n+=t(r)}return n},t.unique=function(e,t){const n={},r=[];for(const i of e){const e=t(i);n[e]||(r.push(i),n[e]=!0)}return r},t.selectMany=function(e,t){const n=[];for(const r of e){t(r).forEach(e=>n.push(e))}return n},t.addRange=function(e,t,n){for(const r of t){n(r).forEach(t=>e.push(t))}},t.take=function(e,t){return e.slice(0,t)},t.castType=function(e){const t=[];for(const n of e){if(null==n)return null;t.push(n)}return t}},45072(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionCallExpressionParser=void 0;const r=n(42539),i=n(90223),s=n(44144),o=n(60059),a=n(27556),l=n(89637),u=n(15909),c=n(1246),d=n(46587),p=n(38952),h=n(37532),f=n(20749),m=n(5627),y=n(87963),v=n(37381);class g{static parse(e,t){let n=e.tokens;if(!o.FunctionCallExpression.isValid(n))return(0,r.newParseExpressionFailed)("FunctionCallExpression","Not valid.");let s=i.ParenthesizedExpression.findMatchingClosingParenthesis(n);if(-1==s)return(0,r.newParseExpressionFailed)("FunctionCallExpression","No closing parentheses found.");let a=n.get(0);if(!a)return(0,r.newParseExpressionFailed)("FunctionCallExpression","Invalid token.");let l=g.getArgumentTokens(e,t,n,s);if("success"!=l.state)return(0,r.newParseExpressionFailed)("FunctionCallExpression",l.errorMessage);let u=g.parseToken(a,e,l.result);return"success"!=u.state?(0,r.newParseExpressionFailed)("FunctionCallExpression",u.errorMessage):(0,r.newParseExpressionSuccess)(u.result)}static getArgumentTokens(e,t,n,r){let i=n.tokensRange(2,r-1),o=s.ArgumentList.parse(i);if("success"!=o.state)return(0,p.newParseExpressionsFailed)("FunctionCallExpression",o.errorMessage);let a=new Array;return o.result.forEach(n=>{let r=t.parse(n,e.line);if("success"!=r.state)return(0,d.newParseFunctionCallExpressionsFailed)(r.errorMessage);a.push(r.result)}),(0,p.newParseExpressionsSuccess)(a)}static parseToken(e,t,n){let r=(0,h.asStringLiteralToken)(e);if(null!=r)return g.parseStringLiteralFunctionCall(t,n,r);const i=(0,f.asMemberAccessLiteralToken)(e);if(null!=i)return g.createMemberFunctionCallExpression(t,n,i);throw new Error("Invalid token type: ".concat(e.tokenType))}static parseStringLiteralFunctionCall(e,t,n){const r=n.value,i=g.SystemFunctions[r];if(null!=i)return i(e,t);const s=g.createLexyFunctionCallExpression(r,e,t);return(0,c.newParseExpressionFunctionsSuccess)(s)}static createMemberFunctionCallExpression(e,t,n){const r=new m.IdentifierPath(n.parts),i=new v.MemberFunctionCallExpression(r,t,e);return(0,c.newParseExpressionFunctionsSuccess)(i)}static createLexyFunctionCallExpression(e,t,n){return new y.LexyFunctionCallExpression(e,n,t)}static forFirstArgument(e){return(t,n)=>{if(1!=n.length)return(0,c.newParseExpressionFunctionsFailed)("Invalid number of args. 1 argument expected.");var r=e(t,n[0]);return(0,c.newParseExpressionFunctionsSuccess)(r)}}}t.FunctionCallExpressionParser=g,g.SystemFunctions={[a.NewFunctionExpression.functionName]:g.forFirstArgument(a.NewFunctionExpression.create),[l.FillParametersFunctionExpression.functionName]:g.forFirstArgument(l.FillParametersFunctionExpression.create),[u.ExtractResultsFunctionExpression.functionName]:g.forFirstArgument(u.ExtractResultsFunctionExpression.create)}},45120(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceReference=void 0;t.SourceReference=class{get sortIndex(){const e=(1e8*this.lineNumber+this.characterNumber).toString();return"".concat(this.file.fileName,"/").concat("0".repeat(16-e.toString().length)).concat(e,"}")}constructor(e,t,n){this.file=e,this.lineNumber=t,this.characterNumber=n}toString(){return"".concat(this.file.fileName,"(").concat(this.lineNumber,", ").concat(this.characterNumber,")")}}},45129(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionParameters=void 0;const r=n(59715),i=n(76178),s=n(41486),o=n(15459);class a extends r.ParsableNode{get variables(){return this.variablesValue}constructor(e){super(e),this.variablesValue=[],this.nodeType=o.NodeType.FunctionParameters}parse(e){let t=i.VariableDefinition.parse(s.VariableSource.Parameters,e);return null!=t&&this.variablesValue.push(t),this}getChildren(){return[...this.variables]}validate(e){}}t.FunctionParameters=a},45375(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.functionClassName=function(e){return o(e,i.LexyCodeConstants.functionClassPrefix)},t.tableClassName=function(e){return o(e,i.LexyCodeConstants.tableClassPrefix)},t.enumClassName=function(e){return o(e,i.LexyCodeConstants.enumClassPrefix)},t.typeClassName=function(e){return o(e,i.LexyCodeConstants.typeClassPrefix)},t.normalize=o;const r=n(95318),i=n(2013),s="_".charCodeAt(0);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null!=t?[t]:[];for(let r=0;r<e.length;r++){const t=e.charCodeAt(r);a(t)&&n.push(String.fromCharCode(t))}return n.join("")}function a(e){return(0,r.isDigitOrLetter)(e)||e==s}},45641(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderVariableReference=function(e,t){if(null==e)throw new Error("Invalid VariableReference: ".concat(e));const n=(0,r.translateParentVariableClassName)(e,t),o=function(e,t){switch(e){case i.VariableSource.Parameters:return"".concat(s.LexyCodeConstants.parameterVariable,".").concat(t);case i.VariableSource.Results:return"".concat(s.LexyCodeConstants.resultsVariable,".").concat(t);case i.VariableSource.Code:case i.VariableSource.Type:return t;case i.VariableSource.Unknown:default:throw new Error("source: {source}")}}(e.source,n);t.write(o);let a=e.path;for(;a.hasChildIdentifiers;)a=a.childrenReference(),t.write("."),t.write(a.rootIdentifier)};const r=n(82751),i=n(41486),s=n(2013)},45797(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchExpression=void 0,t.instanceOfSwitchExpression=l,t.asSwitchExpression=function(e){return l(e)?e:null};const r=n(9313),i=n(24069),s=n(42539),o=n(77148),a=n(15459);function l(e){return(null===e||void 0===e?void 0:e.nodeType)==a.NodeType.SwitchExpression}class u extends r.Expression{constructor(e,t,n,r){super(t,n),this.isParsableNode=!0,this.nodeType=a.NodeType.SwitchExpression,this.conditionType=null,this.cases=[],this.condition=e,this.factory=r}parse(e){let t=e.line,n=this.factory.parse(t.tokens,t);if("success"!=n.state)return e.logger.fail(t.lineStartReference(),n.errorMessage),this;const r=(0,i.asCaseExpression)(n.result);return null!=r?(this.cases.push(r),r):(e.logger.fail(n.result.reference,"Invalid expression. 'case' or 'default' expected."),this)}getChildren(){const e=[this.condition];return this.cases.forEach(t=>e.push(t)),e}static parse(e,t){let n=e.tokens;if(!u.isValid(n))return(0,s.newParseExpressionFailed)("SwitchExpression","Not valid.");if(1==n.length)return(0,s.newParseExpressionFailed)("SwitchExpression","No condition found");let r=n.tokensFrom(1),i=t.parse(r,e.line);if("success"!=i.state)return i;let o=e.createReference(),a=new u(i.result,e,o,t);return(0,s.newParseExpressionSuccess)(a)}static isValid(e){return e.isKeyword(0,o.Keywords.Switch)}validate(e){this.conditionType=this.condition.deriveType(e),null==this.conditionType||"PrimitiveType"!=this.conditionType.variableTypeName&&"EnumType"!=this.conditionType.variableTypeName?e.logger.fail(this.reference,"'Switch' condition expression should have a primitive or enum type. Not: '".concat(this.conditionType,"'.")):this.cases.forEach(t=>{var n;if(t.isDefault)return;let r=t.deriveType(e);null!=r&&(null===(n=this.conditionType)||void 0===n?void 0:n.equals(r))||e.logger.fail(this.reference,"'case' condition expression should be of type '".concat(this.conditionType,"', is of wrong type '").concat(r,"'."))})}deriveType(e){return null}}t.SwitchExpression=u},46364(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BinaryExpression=void 0,t.instanceOfBinaryExpression=y,t.asBinaryExpression=function(e){return y(e)?e:null};const r=n(9313),i=n(15229),s=n(68305),o=n(45120),a=n(42539),l=n(15459),u=n(82140),c=n(45014),d=n(31200),p=n(8644),h=n(24535);class f{constructor(e,t){this.operatorType=e,this.expressionOperator=t}}class m{constructor(e,t,n){this.index=e,this.operatorType=t,this.expressionOperator=n}}function y(e){return(null===e||void 0===e?void 0:e.nodeType)==l.NodeType.BinaryExpression}class v extends r.Expression{static EnumType(){return new d.EnumType("*",new p.EnumDefinition("*",new o.SourceReference(new h.SourceFile("*"),1,1)))}constructor(e,t,n,r,i){super(r,i),this.nodeType=l.NodeType.BinaryExpression,this.leftVariableType=null,this.rightVariableType=null,this.left=e,this.right=t,this.operator=n}static parse(e,t){let n=e.tokens,r=v.getCurrentLevelSupportedTokens(n),i=v.getLowestPriorityOperation(r);if(null==i)return(0,a.newParseExpressionFailed)("BinaryExpression","No valid Operator token found.");let s=n.tokensRange(0,i.index-1);if(0==s.length)return(0,a.newParseExpressionFailed)("BinaryExpression","No tokens left from: ".concat(i.index," (").concat(n,")"));let o=n.tokensFrom(i.index+1);if(0==o.length)return(0,a.newParseExpressionFailed)("BinaryExpression","No tokens right from: ".concat(i.index," (").concat(n,")"));let l=t.parse(s,e.line);if("success"!=l.state)return l;let u=t.parse(o,e.line);if("success"!=u.state)return u;let c=i.expressionOperator,d=e.createReference(i.index),p=new v(l.result,u.result,c,e,d);return(0,a.newParseExpressionSuccess)(p)}static getLowestPriorityOperation(e){for(let t=v.SupportedOperatorsByPriority.length-1;t>=0;t--){const n=v.SupportedOperatorsByPriority[t];for(let t=0;t<e.length;t++){const r=e[t];if(n.operatorType==r.operatorType)return r}}return null}static isValid(e){return v.getCurrentLevelSupportedTokens(e).length>0}static getCurrentLevelSupportedTokens(e){let t=new Array,n=0,r=0;for(let s=0;s<e.length;s++){let o=e.get(s);if("OperatorToken"!=o.tokenType)continue;const a=o;switch(a.type){case i.OperatorType.OpenParentheses:n++;break;case i.OperatorType.CloseParentheses:n--;break;case i.OperatorType.OpenBrackets:r++;break;case i.OperatorType.CloseBrackets:r--}if(0!=r||0!=n)continue;let l=this.isSupported(a.type);null!=l&&t.push(new m(s,a.type,l.expressionOperator))}return t}static isSupported(e){for(let t=v.SupportedOperatorsByPriority.length-1;t>=0;t--){const n=v.SupportedOperatorsByPriority[t];if(n.operatorType==e)return n}return null}getChildren(){return[this.left,this.right]}validate(e){this.leftVariableType=this.left.deriveType(e),this.rightVariableType=this.right.deriveType(e),null!=this.leftVariableType&&null!=this.rightVariableType?this.isAllowedOperation(this.leftVariableType,this.rightVariableType)||e.logger.fail(this.reference,"Invalid operator '".concat(this.operator,"'. Left type: '").concat(this.leftVariableType,"' and right type '").concat(this.rightVariableType,"' not supported.")):e.logger.fail(this.reference,"Invalid operator '".concat(this.operator,"'. Can't derive type."))}isAllowedOperation(e,t){return(0,c.any)(v.AllowedOperationCombinations,n=>{if(n.operator!=this.operator)return!1;let r=(0,d.instanceOfEnumType)(e),i=(0,d.instanceOfEnumType)(t),s=(0,d.instanceOfEnumType)(n.leftType),o=(0,d.instanceOfEnumType)(n.rightType);return s&&o?r&&i&&null!=e&&e.equals(t):s?r&&n.rightType.equals(t):o?n.leftType.equals(e)&&i:n.leftType.equals(e)&&n.rightType.equals(t)})}deriveType(e){if((0,c.any)(v.ComparisonOperators,e=>e==this.operator))return u.PrimitiveType.boolean;let t=this.left.deriveType(e),n=this.right.deriveType(e);return(null===t||void 0===t?void 0:t.equals(n))?t:null}}t.BinaryExpression=v,v.ComparisonOperators=[s.ExpressionOperator.GreaterThan,s.ExpressionOperator.GreaterThanOrEqual,s.ExpressionOperator.LessThan,s.ExpressionOperator.LessThanOrEqual,s.ExpressionOperator.Equals,s.ExpressionOperator.NotEqual],v.AllowedOperationCombinations=[{leftType:u.PrimitiveType.string,rightType:u.PrimitiveType.string,operator:s.ExpressionOperator.Equals},{leftType:u.PrimitiveType.number,rightType:u.PrimitiveType.number,operator:s.ExpressionOperator.Equals},{leftType:u.PrimitiveType.boolean,rightType:u.PrimitiveType.boolean,operator:s.ExpressionOperator.Equals},{leftType:u.PrimitiveType.date,rightType:u.PrimitiveType.date,operator:s.ExpressionOperator.Equals},{leftType:v.EnumType(),rightType:v.EnumType(),operator:s.ExpressionOperator.Equals},{leftType:u.PrimitiveType.string,rightType:u.PrimitiveType.string,operator:s.ExpressionOperator.NotEqual},{leftType:u.PrimitiveType.number,rightType:u.PrimitiveType.number,operator:s.ExpressionOperator.NotEqual},{leftType:u.PrimitiveType.boolean,rightType:u.PrimitiveType.boolean,operator:s.ExpressionOperator.NotEqual},{leftType:u.PrimitiveType.date,rightType:u.PrimitiveType.date,operator:s.ExpressionOperator.NotEqual},{leftType:v.EnumType(),rightType:v.EnumType(),operator:s.ExpressionOperator.NotEqual},{leftType:u.PrimitiveType.string,rightType:u.PrimitiveType.string,operator:s.ExpressionOperator.Addition},{leftType:u.PrimitiveType.string,rightType:u.PrimitiveType.number,operator:s.ExpressionOperator.Addition},{leftType:u.PrimitiveType.string,rightType:u.PrimitiveType.boolean,operator:s.ExpressionOperator.Addition},{leftType:u.PrimitiveType.string,rightType:u.PrimitiveType.date,operator:s.ExpressionOperator.Addition},{leftType:u.PrimitiveType.string,rightType:v.EnumType(),operator:s.ExpressionOperator.Addition},{leftType:u.PrimitiveType.number,rightType:u.PrimitiveType.number,operator:s.ExpressionOperator.Addition},{leftType:u.PrimitiveType.number,rightType:u.PrimitiveType.number,operator:s.ExpressionOperator.Subtraction},{leftType:u.PrimitiveType.number,rightType:u.PrimitiveType.number,operator:s.ExpressionOperator.Multiplication},{leftType:u.PrimitiveType.number,rightType:u.PrimitiveType.number,operator:s.ExpressionOperator.Division},{leftType:u.PrimitiveType.number,rightType:u.PrimitiveType.number,operator:s.ExpressionOperator.Modulus},{leftType:u.PrimitiveType.string,rightType:u.PrimitiveType.string,operator:s.ExpressionOperator.GreaterThan},{leftType:u.PrimitiveType.string,rightType:u.PrimitiveType.string,operator:s.ExpressionOperator.GreaterThanOrEqual},{leftType:u.PrimitiveType.string,rightType:u.PrimitiveType.string,operator:s.ExpressionOperator.LessThan},{leftType:u.PrimitiveType.string,rightType:u.PrimitiveType.string,operator:s.ExpressionOperator.LessThanOrEqual},{leftType:u.PrimitiveType.number,rightType:u.PrimitiveType.number,operator:s.ExpressionOperator.GreaterThan},{leftType:u.PrimitiveType.number,rightType:u.PrimitiveType.number,operator:s.ExpressionOperator.GreaterThanOrEqual},{leftType:u.PrimitiveType.number,rightType:u.PrimitiveType.number,operator:s.ExpressionOperator.LessThan},{leftType:u.PrimitiveType.number,rightType:u.PrimitiveType.number,operator:s.ExpressionOperator.LessThanOrEqual},{leftType:u.PrimitiveType.date,rightType:u.PrimitiveType.date,operator:s.ExpressionOperator.GreaterThan},{leftType:u.PrimitiveType.date,rightType:u.PrimitiveType.date,operator:s.ExpressionOperator.GreaterThanOrEqual},{leftType:u.PrimitiveType.date,rightType:u.PrimitiveType.date,operator:s.ExpressionOperator.LessThan},{leftType:u.PrimitiveType.date,rightType:u.PrimitiveType.date,operator:s.ExpressionOperator.LessThanOrEqual},{leftType:u.PrimitiveType.boolean,rightType:u.PrimitiveType.boolean,operator:s.ExpressionOperator.And},{leftType:u.PrimitiveType.boolean,rightType:u.PrimitiveType.boolean,operator:s.ExpressionOperator.Or}],v.SupportedOperatorsByPriority=[new f(i.OperatorType.Multiplication,s.ExpressionOperator.Multiplication),new f(i.OperatorType.Division,s.ExpressionOperator.Division),new f(i.OperatorType.Modulus,s.ExpressionOperator.Modulus),new f(i.OperatorType.Addition,s.ExpressionOperator.Addition),new f(i.OperatorType.Subtraction,s.ExpressionOperator.Subtraction),new f(i.OperatorType.GreaterThan,s.ExpressionOperator.GreaterThan),new f(i.OperatorType.GreaterThanOrEqual,s.ExpressionOperator.GreaterThanOrEqual),new f(i.OperatorType.LessThan,s.ExpressionOperator.LessThan),new f(i.OperatorType.LessThanOrEqual,s.ExpressionOperator.LessThanOrEqual),new f(i.OperatorType.Equals,s.ExpressionOperator.Equals),new f(i.OperatorType.NotEqual,s.ExpressionOperator.NotEqual),new f(i.OperatorType.And,s.ExpressionOperator.And),new f(i.OperatorType.Or,s.ExpressionOperator.Or)]},46384(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PrimitiveVariableTypeDeclaration=void 0,t.instanceOfPrimitiveVariableTypeDeclaration=o,t.asPrimitiveVariableTypeDeclaration=function(e){return o(e)?e:null};const r=n(32639),i=n(82140),s=n(15459);function o(e){return(null===e||void 0===e?void 0:e.nodeType)==s.NodeType.PrimitiveVariableTypeDeclaration}class a extends r.VariableTypeDeclaration{constructor(e,t){super(t),this.nodeType=s.NodeType.PrimitiveVariableTypeDeclaration,this.type=e}equals(e){return this.type==e.type}toString(){return this.type}validateVariableType(e){return i.PrimitiveType.parse(this.type)}getChildren(){return[]}}t.PrimitiveVariableTypeDeclaration=a},46587(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newParseFunctionCallExpressionsFailed=function(e){return{state:"failed",errorMessage:e}},t.newParseFunctionCallExpressionsSuccess=function(e){return{state:"success",result:e}}},47222(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParserResult=void 0;t.ParserResult=class{constructor(e,t,n,r){this.rootNode=e,this.componentNodes=t,this.logger=n,this.dependencies=r}}},47760(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtractFunctionStatement=void 0;const r=n(60059),i=n(15909),s=n(70330),o=n(5338);class a{static matches(e){const t=(0,r.asFunctionCallExpression)(e);return null!=t&&(0,i.instanceOfExtractResultsFunctionExpression)(t)}static render(e,t){const n=s.Assert.is(i.asExtractResultsFunctionExpression,e,"functionCallExpression");return a.renderExtract(s.Assert.notNull(n.mapping,"extractResultsFunction.mapping"),s.Assert.notNull(n.functionResultVariable,"extractResultsFunction.functionResultVariable"),t)}static renderExtract(e,t,n){for(const r of e.values)this.renderMapping(t,r,n)}static renderMapping(e,t,n){n.startLine(),(0,o.renderVariableMappingVariableSyntax)(t,n),n.write(" = "),n.endLine("".concat(e,".").concat(t.variableName,";"))}}t.ExtractFunctionStatement=a},48556(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createParser=function(e,t,n){const o=new r.ExpressionFactory,a=new i.Tokenizer;return new s.LexyParser(e,a,t,o,n)},t.createCompiler=function(e,t,n){return new o.LexyCompiler(e,t,n)};const r=n(11671),i=n(12268),s=n(65611),o=n(29770)},48577(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeywordToken=void 0,t.instanceOfKeywordToken=s,t.asKeywordToken=function(e){return s(e)?e:null};const r=n(41844),i=n(71148);function s(e){return(null===e||void 0===e?void 0:e.tokenType)==i.TokenType.KeywordToken}class o extends r.Token{constructor(e,t){super(t),this.tokenIsLiteral=!1,this.tokenType=i.TokenType.KeywordToken,this.value=e}}t.KeywordToken=o},50094(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IfExpression=void 0,t.instanceOfIfExpression=f,t.asIfExpression=function(e){return f(e)?e:null};const r=n(9313),i=n(59715),s=n(50917),o=n(16736),a=n(42539),l=n(77148),u=n(82140),c=n(15459),d=n(43056),p=n(4707),h=n(45014);function f(e){return(null===e||void 0===e?void 0:e.nodeType)==c.NodeType.IfExpression}class m extends r.Expression{get trueExpressions(){return this.trueExpressionsValues.asArray()}get elseExpressions(){return this.elseExpressionsValues}constructor(e,t,n,r){super(t,n),this.elseExpressionsValues=[],this.isParentExpression=!0,this.isParsableNode=!0,this.nodeType=c.NodeType.IfExpression,this.condition=e,this.trueExpressionsValues=new s.ExpressionList(n,r)}parse(e){let t=this.trueExpressionsValues.parse(e);if("success"!=t.state)return this;const n=(0,i.asParsableNode)(t.result);return null!=n?n:this}getChildren(){return[this.condition,this.trueExpressionsValues,...this.elseExpressions]}static parse(e,t){let n=e.tokens;if(!m.isValid(n))return(0,a.newParseExpressionFailed)("IfExpression","Not valid.");if(1==n.length)return(0,a.newParseExpressionFailed)("IfExpression","No condition found");let r=n.tokensFrom(1),i=t.parse(r,e.line);if("success"!=i.state)return i;let s=e.createReference(),o=new m(i.result,e,s,t);return(0,a.newParseExpressionSuccess)(o)}static isValid(e){return e.isKeyword(0,l.Keywords.If)}validate(e){let t=this.condition.deriveType(e);null!=t&&t.equals(u.PrimitiveType.boolean)||e.logger.fail(this.reference,"'if' condition expression should be 'boolean', is of wrong type '".concat(t,"'."))}deriveType(e){return null}linkChildExpression(e){if(!(0,o.instanceOfElseExpression)(e)&&!(0,p.instanceOfElseifExpression)(e))throw new Error("Invalid node type: ".concat(e.nodeType));let t=(0,h.lastOrDefault)(this.elseExpressions);if((0,o.instanceOfElseExpression)(t))throw new Error("'else' already defined.");this.elseExpressionsValues.push(e)}usedVariables(){return(0,d.getReadVariableUsage)(this.condition)}}t.IfExpression=m},50099(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoidType=void 0;const r=n(77945),i=n(88310);class s extends r.VariableType{constructor(){super(...arguments),this.variableTypeName=i.VariableTypeName.VoidType}isAssignableFrom(e){return this.equals(e)}equals(e){return this.variableTypeName==(null===e||void 0===e?void 0:e.variableTypeName)}}t.VoidType=s},50917(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionList=void 0;const r=n(59611),i=n(86898),s=n(45014),o=n(15459);class a extends r.Node{get length(){return this.values.length}constructor(e,t){super(e),this.values=[],this.nodeType=o.NodeType.ExpressionList,this.factory=t}asArray(){return[...this.values]}get(e){return this.values[e]}getChildren(){return this.values}validate(e){}validateTree(e){const t=e.createVariableScope();try{super.validateTree(e)}finally{t[Symbol.dispose]()}}parse(e){let t=e.line,n=this.factory.parse(t.tokens,t);return"success"!=n.state?(e.logger.fail(t.lineStartReference(),n.errorMessage),n):(this.add(n.result,e),n)}add(e,t){const n=(0,i.asChildExpression)(e);null!=n?this.addToParent(n,t):this.values.push(e)}addToParent(e,t){const n=(0,i.asParentExpression)((0,s.lastOrDefault)(this.values));e.validateParentExpression(n,t)&&(null===n||void 0===n||n.linkChildExpression(e))}}t.ExpressionList=a},51173(e,t,n){"use strict";t.Z=void 0;const r=n(34067),i=n(31632),s=n(35227);t.Z=class{get logEntries(){return this.logEntriesValue}constructor(e){this.fileRunnersValue=[],this.logEntriesValue=[],this.failedValues=0,this.startTimestamp=new Date,this.logger=e}get failed(){return this.failedValues}get fileRunners(){return this.fileRunnersValue}fail(e,t,n,r){this.failedValues++;const i=null!=r?"[".concat(r,"]"):"",o=new s.SpecificationsLogEntry(e.reference,e,!0,"FAILED - ".concat(e.name).concat(i,": ").concat(t),n);this.logEntriesValue.push(o),this.logger.logError("- FAILED - ".concat(e.name).concat(i,": ").concat(t)),null!=n&&n.forEach(e=>this.logger.logInformation("  ".concat(e)))}logGlobal(e){const t=new s.SpecificationsLogEntry(null,null,!1,e);this.logEntriesValue.push(t),this.logger.logInformation(e)}logTimeSpent(){const e=(0,i.milliseconds)(new Date,this.startTimestamp),t="Time: ".concat(e," milliseconds"),n=new s.SpecificationsLogEntry(null,null,!1,t);this.logEntriesValue.push(n),this.logger.logInformation(t)}success(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;const r=null!=n?"[".concat(n,"]"):"",i=new s.SpecificationsLogEntry(e.reference,e,!1,"SUCCESS - ".concat(e.name).concat(r),null,t);this.logEntriesValue.push(i),this.logger.logInformation("- SUCCESS - ".concat(e.name).concat(r))}add(e){this.fileRunners.push(e)}failedScenariosRunners(){const e=[];return this.fileRunners.forEach(t=>t.scenarioRunners.forEach(t=>{t.failed&&e.push(t)})),e}countScenarios(){let e=0;return this.fileRunners.map(t=>e+=t.countScenarioRunners()),e}formatGlobalLog(){return(0,r.format)(this.logEntriesValue,2)}}},51507(e,t,n){var r;!function(){"use strict";var i,s,o,a=9e15,l=1e9,u="0123456789abcdef",c="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",d="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",p={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-a,maxE:a,crypto:!1},h=!0,f="[DecimalError] ",m=f+"Invalid argument: ",y=f+"Precision limit exceeded",v=f+"crypto unavailable",g="[object Decimal]",T=Math.floor,b=Math.pow,w=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,x=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,E=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,V=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,N=1e7,k=c.length-1,C=d.length-1,P={toStringTag:g};function O(e){var t,n,r,i=e.length-1,s="",o=e[0];if(i>0){for(s+=o,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(s+=q(n)),s+=r;(n=7-(r=(o=e[t])+"").length)&&(s+=q(n))}else if(0===o)return"0";for(;o%10===0;)o/=10;return s+o}function L(e,t,n){if(e!==~~e||e<t||e>n)throw Error(m+e)}function S(e,t,n,r){var i,s,o,a;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=7,i=0):(i=Math.ceil((t+1)/7),t%=7),s=b(10,7-t),a=e[i]%s|0,null==r?t<3?(0==t?a=a/100|0:1==t&&(a=a/10|0),o=n<4&&99999==a||n>3&&49999==a||5e4==a||0==a):o=(n<4&&a+1==s||n>3&&a+1==s/2)&&(e[i+1]/s/100|0)==b(10,t-2)-1||(a==s/2||0==a)&&0==(e[i+1]/s/100|0):t<4?(0==t?a=a/1e3|0:1==t?a=a/100|0:2==t&&(a=a/10|0),o=(r||n<4)&&9999==a||!r&&n>3&&4999==a):o=((r||n<4)&&a+1==s||!r&&n>3&&a+1==s/2)&&(e[i+1]/s/1e3|0)==b(10,t-3)-1,o}function F(e,t,n){for(var r,i,s=[0],o=0,a=e.length;o<a;){for(i=s.length;i--;)s[i]*=t;for(s[0]+=u.indexOf(e.charAt(o++)),r=0;r<s.length;r++)s[r]>n-1&&(void 0===s[r+1]&&(s[r+1]=0),s[r+1]+=s[r]/n|0,s[r]%=n)}return s.reverse()}P.absoluteValue=P.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),_(e)},P.ceil=function(){return _(new this.constructor(this),this.e+1,2)},P.clampedTo=P.clamp=function(e,t){var n=this,r=n.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(m+t);return n.cmp(e)<0?e:n.cmp(t)>0?t:new r(n)},P.comparedTo=P.cmp=function(e){var t,n,r,i,s=this,o=s.d,a=(e=new s.constructor(e)).d,l=s.s,u=e.s;if(!o||!a)return l&&u?l!==u?l:o===a?0:!o^l<0?1:-1:NaN;if(!o[0]||!a[0])return o[0]?l:a[0]?-u:0;if(l!==u)return l;if(s.e!==e.e)return s.e>e.e^l<0?1:-1;for(t=0,n=(r=o.length)<(i=a.length)?r:i;t<n;++t)if(o[t]!==a[t])return o[t]>a[t]^l<0?1:-1;return r===i?0:r>i^l<0?1:-1},P.cosine=P.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r,i;if(t.isZero())return t;r=t.d.length,r<32?i=(1/Q(4,n=Math.ceil(r/3))).toString():(n=16,i="2.3283064365386962890625e-10");e.precision+=n,t=$(e,1,t.times(i),new e(1));for(var s=n;s--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=n,t}(r,Y(r,n)),r.precision=e,r.rounding=t,_(2==o||3==o?n.neg():n,e,t,!0)):new r(1):new r(NaN)},P.cubeRoot=P.cbrt=function(){var e,t,n,r,i,s,o,a,l,u,c=this,d=c.constructor;if(!c.isFinite()||c.isZero())return new d(c);for(h=!1,(s=c.s*b(c.s*c,1/3))&&Math.abs(s)!=1/0?r=new d(s.toString()):(n=O(c.d),(s=((e=c.e)-n.length+1)%3)&&(n+=1==s||-2==s?"0":"00"),s=b(n,1/3),e=T((e+1)/3)-(e%3==(e<0?-1:2)),(r=new d(n=s==1/0?"5e"+e:(n=s.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=c.s),o=(e=d.precision)+3;;)if(u=(l=(a=r).times(a).times(a)).plus(c),r=M(u.plus(c).times(a),u.plus(l),o+2,1),O(a.d).slice(0,o)===(n=O(r.d)).slice(0,o)){if("9999"!=(n=n.slice(o-3,o+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(_(r,e+1,1),t=!r.times(r).times(r).eq(c));break}if(!i&&(_(a,e+1,0),a.times(a).times(a).eq(c))){r=a;break}o+=4,i=1}return h=!0,_(r,e,d.rounding,t)},P.decimalPlaces=P.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=7*((e=t.length-1)-T(this.e/7)),e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},P.dividedBy=P.div=function(e){return M(this,new this.constructor(e))},P.dividedToIntegerBy=P.divToInt=function(e){var t=this.constructor;return _(M(this,new t(e),0,1,1),t.precision,t.rounding)},P.equals=P.eq=function(e){return 0===this.cmp(e)},P.floor=function(){return _(new this.constructor(this),this.e+1,3)},P.greaterThan=P.gt=function(e){return this.cmp(e)>0},P.greaterThanOrEqualTo=P.gte=function(e){var t=this.cmp(e);return 1==t||0===t},P.hyperbolicCosine=P.cosh=function(){var e,t,n,r,i,s=this,o=s.constructor,a=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return a;n=o.precision,r=o.rounding,o.precision=n+Math.max(s.e,s.sd())+4,o.rounding=1,(i=s.d.length)<32?t=(1/Q(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),s=$(o,1,s.times(t),new o(1),!0);for(var l,u=e,c=new o(8);u--;)l=s.times(s),s=a.minus(l.times(c.minus(l.times(c))));return _(s,o.precision=n,o.rounding=r,!0)},P.hyperbolicSine=P.sinh=function(){var e,t,n,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(t=s.precision,n=s.rounding,s.precision=t+Math.max(i.e,i.sd())+4,s.rounding=1,(r=i.d.length)<3)i=$(s,2,i,i,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,i=$(s,2,i=i.times(1/Q(5,e)),i,!0);for(var o,a=new s(5),l=new s(16),u=new s(20);e--;)o=i.times(i),i=i.times(a.plus(o.times(l.times(o).plus(u))))}return s.precision=t,s.rounding=n,_(i,t,n,!0)},P.hyperbolicTangent=P.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,M(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},P.inverseCosine=P.acos=function(){var e=this,t=e.constructor,n=e.abs().cmp(1),r=t.precision,i=t.rounding;return-1!==n?0===n?e.isNeg()?R(t,r,i):new t(0):new t(NaN):e.isZero()?R(t,r+4,i).times(.5):(t.precision=r+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=r,t.rounding=i,e.times(2))},P.inverseHyperbolicCosine=P.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,h=!1,n=n.times(n).minus(1).sqrt().plus(n),h=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},P.inverseHyperbolicSine=P.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,h=!1,n=n.times(n).plus(1).sqrt().plus(n),h=!0,r.precision=e,r.rounding=t,n.ln())},P.inverseHyperbolicTangent=P.atanh=function(){var e,t,n,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=s.precision,t=s.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?_(new s(i),e,t,!0):(s.precision=n=r-i.e,i=M(i.plus(1),new s(1).minus(i),n+e,1),s.precision=e+4,s.rounding=1,i=i.ln(),s.precision=e,s.rounding=t,i.times(.5))):new s(NaN)},P.inverseSine=P.asin=function(){var e,t,n,r,i=this,s=i.constructor;return i.isZero()?new s(i):(t=i.abs().cmp(1),n=s.precision,r=s.rounding,-1!==t?0===t?((e=R(s,n+4,r).times(.5)).s=i.s,e):new s(NaN):(s.precision=n+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=r,i.times(2)))},P.inverseTangent=P.atan=function(){var e,t,n,r,i,s,o,a,l,u=this,c=u.constructor,d=c.precision,p=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&d+4<=C)return(o=R(c,d+4,p).times(.25)).s=u.s,o}else{if(!u.s)return new c(NaN);if(d+4<=C)return(o=R(c,d+4,p).times(.5)).s=u.s,o}for(c.precision=a=d+10,c.rounding=1,e=n=Math.min(28,a/7+2|0);e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(h=!1,t=Math.ceil(a/7),r=1,l=u.times(u),o=new c(u),i=u;-1!==e;)if(i=i.times(l),s=o.minus(i.div(r+=2)),i=i.times(l),void 0!==(o=s.plus(i.div(r+=2))).d[t])for(e=t;o.d[e]===s.d[e]&&e--;);return n&&(o=o.times(2<<n-1)),h=!0,_(o,c.precision=d,c.rounding=p,!0)},P.isFinite=function(){return!!this.d},P.isInteger=P.isInt=function(){return!!this.d&&T(this.e/7)>this.d.length-2},P.isNaN=function(){return!this.s},P.isNegative=P.isNeg=function(){return this.s<0},P.isPositive=P.isPos=function(){return this.s>0},P.isZero=function(){return!!this.d&&0===this.d[0]},P.lessThan=P.lt=function(e){return this.cmp(e)<0},P.lessThanOrEqualTo=P.lte=function(e){return this.cmp(e)<1},P.logarithm=P.log=function(e){var t,n,r,i,s,o,a,l,u=this,c=u.constructor,d=c.precision,p=c.rounding;if(null==e)e=new c(10),t=!0;else{if(n=(e=new c(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(n=u.d,u.s<0||!n||!n[0]||u.eq(1))return new c(n&&!n[0]?-1/0:1!=u.s?NaN:n?0:1/0);if(t)if(n.length>1)s=!0;else{for(i=n[0];i%10===0;)i/=10;s=1!==i}if(h=!1,o=K(u,a=d+5),r=t?I(c,a+10):K(e,a),S((l=M(o,r,a,1)).d,i=d,p))do{if(o=K(u,a+=10),r=t?I(c,a+10):K(e,a),l=M(o,r,a,1),!s){+O(l.d).slice(i+1,i+15)+1==1e14&&(l=_(l,d+1,0));break}}while(S(l.d,i+=10,p));return h=!0,_(l,d,p)},P.minus=P.sub=function(e){var t,n,r,i,s,o,a,l,u,c,d,p,f=this,m=f.constructor;if(e=new m(e),!f.d||!e.d)return f.s&&e.s?f.d?e.s=-e.s:e=new m(e.d||f.s!==e.s?f:NaN):e=new m(NaN),e;if(f.s!=e.s)return e.s=-e.s,f.plus(e);if(u=f.d,p=e.d,a=m.precision,l=m.rounding,!u[0]||!p[0]){if(p[0])e.s=-e.s;else{if(!u[0])return new m(3===l?-0:0);e=new m(f)}return h?_(e,a,l):e}if(n=T(e.e/7),c=T(f.e/7),u=u.slice(),s=c-n){for((d=s<0)?(t=u,s=-s,o=p.length):(t=p,n=c,o=u.length),s>(r=Math.max(Math.ceil(a/7),o)+2)&&(s=r,t.length=1),t.reverse(),r=s;r--;)t.push(0);t.reverse()}else{for((d=(r=u.length)<(o=p.length))&&(o=r),r=0;r<o;r++)if(u[r]!=p[r]){d=u[r]<p[r];break}s=0}for(d&&(t=u,u=p,p=t,e.s=-e.s),o=u.length,r=p.length-o;r>0;--r)u[o++]=0;for(r=p.length;r>s;){if(u[--r]<p[r]){for(i=r;i&&0===u[--i];)u[i]=N-1;--u[i],u[r]+=N}u[r]-=p[r]}for(;0===u[--o];)u.pop();for(;0===u[0];u.shift())--n;return u[0]?(e.d=u,e.e=D(u,n),h?_(e,a,l):e):new m(3===l?-0:0)},P.modulo=P.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?_(new r(n),r.precision,r.rounding):(h=!1,9==r.modulo?(t=M(n,e.abs(),0,3,1)).s*=e.s:t=M(n,e,0,r.modulo,1),t=t.times(e),h=!0,n.minus(t))},P.naturalExponential=P.exp=function(){return G(this)},P.naturalLogarithm=P.ln=function(){return K(this)},P.negated=P.neg=function(){var e=new this.constructor(this);return e.s=-e.s,_(e)},P.plus=P.add=function(e){var t,n,r,i,s,o,a,l,u,c,d=this,p=d.constructor;if(e=new p(e),!d.d||!e.d)return d.s&&e.s?d.d||(e=new p(e.d||d.s===e.s?d:NaN)):e=new p(NaN),e;if(d.s!=e.s)return e.s=-e.s,d.minus(e);if(u=d.d,c=e.d,a=p.precision,l=p.rounding,!u[0]||!c[0])return c[0]||(e=new p(d)),h?_(e,a,l):e;if(s=T(d.e/7),r=T(e.e/7),u=u.slice(),i=s-r){for(i<0?(n=u,i=-i,o=c.length):(n=c,r=s,o=u.length),i>(o=(s=Math.ceil(a/7))>o?s+1:o+1)&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((o=u.length)-(i=c.length)<0&&(i=o,n=c,c=u,u=n),t=0;i;)t=(u[--i]=u[i]+c[i]+t)/N|0,u[i]%=N;for(t&&(u.unshift(t),++r),o=u.length;0==u[--o];)u.pop();return e.d=u,e.e=D(u,r),h?_(e,a,l):e},P.precision=P.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(m+e);return n.d?(t=j(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},P.round=function(){var e=this,t=e.constructor;return _(new t(e),e.e+1,t.rounding)},P.sine=P.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:$(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=t.times(1/Q(5,n)),t=$(e,2,t,t);for(var i,s=new e(5),o=new e(16),a=new e(20);n--;)i=t.times(t),t=t.times(s.plus(i.times(o.times(i).minus(a))));return t}(r,Y(r,n)),r.precision=e,r.rounding=t,_(o>2?n.neg():n,e,t,!0)):new r(NaN)},P.squareRoot=P.sqrt=function(){var e,t,n,r,i,s,o=this,a=o.d,l=o.e,u=o.s,c=o.constructor;if(1!==u||!a||!a[0])return new c(!u||u<0&&(!a||a[0])?NaN:a?o:1/0);for(h=!1,0==(u=Math.sqrt(+o))||u==1/0?(((t=O(a)).length+l)%2==0&&(t+="0"),u=Math.sqrt(t),l=T((l+1)/2)-(l<0||l%2),r=new c(t=u==1/0?"5e"+l:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+l)):r=new c(u.toString()),n=(l=c.precision)+3;;)if(r=(s=r).plus(M(o,s,n+2,1)).times(.5),O(s.d).slice(0,n)===(t=O(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(_(r,l+1,1),e=!r.times(r).eq(o));break}if(!i&&(_(s,l+1,0),s.times(s).eq(o))){r=s;break}n+=4,i=1}return h=!0,_(r,l,c.rounding,e)},P.tangent=P.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=M(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,_(2==o||4==o?n.neg():n,e,t,!0)):new r(NaN)},P.times=P.mul=function(e){var t,n,r,i,s,o,a,l,u,c=this,d=c.constructor,p=c.d,f=(e=new d(e)).d;if(e.s*=c.s,!p||!p[0]||!f||!f[0])return new d(!e.s||p&&!p[0]&&!f||f&&!f[0]&&!p?NaN:p&&f?0*e.s:e.s/0);for(n=T(c.e/7)+T(e.e/7),(l=p.length)<(u=f.length)&&(s=p,p=f,f=s,o=l,l=u,u=o),s=[],r=o=l+u;r--;)s.push(0);for(r=u;--r>=0;){for(t=0,i=l+r;i>r;)a=s[i]+f[r]*p[i-r-1]+t,s[i--]=a%N|0,t=a/N|0;s[i]=(s[i]+t)%N|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=D(s,n),h?_(e,d.precision,d.rounding):e},P.toBinary=function(e,t){return J(this,2,e,t)},P.toDecimalPlaces=P.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(L(e,0,l),void 0===t?t=r.rounding:L(t,0,8),_(n,e+n.e+1,t))},P.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=A(r,!0):(L(e,0,l),void 0===t?t=i.rounding:L(t,0,8),n=A(r=_(new i(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},P.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return void 0===e?n=A(i):(L(e,0,l),void 0===t?t=s.rounding:L(t,0,8),n=A(r=_(new s(i),e+i.e+1,t),!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},P.toFraction=function(e){var t,n,r,i,s,o,a,l,u,c,d,p,f=this,y=f.d,v=f.constructor;if(!y)return new v(f);if(u=n=new v(1),r=l=new v(0),o=(s=(t=new v(r)).e=j(y)-f.e-1)%7,t.d[0]=b(10,o<0?7+o:o),null==e)e=s>0?t:u;else{if(!(a=new v(e)).isInt()||a.lt(u))throw Error(m+a);e=a.gt(t)?s>0?t:u:a}for(h=!1,a=new v(O(y)),c=v.precision,v.precision=s=7*y.length*2;d=M(a,t,0,1,1),1!=(i=n.plus(d.times(r))).cmp(e);)n=r,r=i,i=u,u=l.plus(d.times(i)),l=i,i=t,t=a.minus(d.times(i)),a=i;return i=M(e.minus(n),r,0,1,1),l=l.plus(i.times(u)),n=n.plus(i.times(r)),l.s=u.s=f.s,p=M(u,r,s,1).minus(f).abs().cmp(M(l,n,s,1).minus(f).abs())<1?[u,r]:[l,n],v.precision=c,h=!0,p},P.toHexadecimal=P.toHex=function(e,t){return J(this,16,e,t)},P.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:L(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(h=!1,n=M(n,e,0,t,1).times(e),h=!0,_(n)):(e.s=n.s,n=e),n},P.toNumber=function(){return+this},P.toOctal=function(e,t){return J(this,8,e,t)},P.toPower=P.pow=function(e){var t,n,r,i,s,o,a=this,l=a.constructor,u=+(e=new l(e));if(!a.d||!e.d||!a.d[0]||!e.d[0])return new l(b(+a,u));if((a=new l(a)).eq(1))return a;if(r=l.precision,s=l.rounding,e.eq(1))return _(a,r,s);if((t=T(e.e/7))>=e.d.length-1&&(n=u<0?-u:u)<=9007199254740991)return i=U(l,a,n,r),e.s<0?new l(1).div(i):_(i,r,s);if((o=a.s)<0){if(t<e.d.length-1)return new l(NaN);if(0==(1&e.d[t])&&(o=1),0==a.e&&1==a.d[0]&&1==a.d.length)return a.s=o,a}return(t=0!=(n=b(+a,u))&&isFinite(n)?new l(n+"").e:T(u*(Math.log("0."+O(a.d))/Math.LN10+a.e+1)))>l.maxE+1||t<l.minE-1?new l(t>0?o/0:0):(h=!1,l.rounding=a.s=1,n=Math.min(12,(t+"").length),(i=G(e.times(K(a,r+n)),r)).d&&S((i=_(i,r+5,1)).d,r,s)&&(t=r+10,+O((i=_(G(e.times(K(a,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=_(i,r+1,0))),i.s=o,h=!0,l.rounding=s,_(i,r,s))},P.toPrecision=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=A(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(L(e,1,l),void 0===t?t=i.rounding:L(t,0,8),n=A(r=_(new i(r),e,t),e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},P.toSignificantDigits=P.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(L(e,1,l),void 0===t?t=n.rounding:L(t,0,8)),_(new n(this),e,t)},P.toString=function(){var e=this,t=e.constructor,n=A(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},P.truncated=P.trunc=function(){return _(new this.constructor(this),this.e+1,1)},P.valueOf=P.toJSON=function(){var e=this,t=e.constructor,n=A(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var M=function(){function e(e,t,n){var r,i=0,s=e.length;for(e=e.slice();s--;)r=e[s]*t+i,e[s]=r%n|0,i=r/n|0;return i&&e.unshift(i),e}function t(e,t,n,r){var i,s;if(n!=r)s=n>r?1:-1;else for(i=s=0;i<n;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,o,a,l,u){var c,d,p,h,f,m,y,v,g,b,w,x,E,V,k,C,P,O,L,S,F=r.constructor,M=r.s==i.s?1:-1,A=r.d,D=i.d;if(!A||!A[0]||!D||!D[0])return new F(r.s&&i.s&&(A?!D||A[0]!=D[0]:D)?A&&0==A[0]||!D?0*M:M/0:NaN);for(u?(f=1,d=r.e-i.e):(u=N,f=7,d=T(r.e/f)-T(i.e/f)),L=D.length,P=A.length,b=(g=new F(M)).d=[],p=0;D[p]==(A[p]||0);p++);if(D[p]>(A[p]||0)&&d--,null==o?(V=o=F.precision,a=F.rounding):V=l?o+(r.e-i.e)+1:o,V<0)b.push(1),m=!0;else{if(V=V/f+2|0,p=0,1==L){for(h=0,D=D[0],V++;(p<P||h)&&V--;p++)k=h*u+(A[p]||0),b[p]=k/D|0,h=k%D|0;m=h||p<P}else{for((h=u/(D[0]+1)|0)>1&&(D=e(D,h,u),A=e(A,h,u),L=D.length,P=A.length),C=L,x=(w=A.slice(0,L)).length;x<L;)w[x++]=0;(S=D.slice()).unshift(0),O=D[0],D[1]>=u/2&&++O;do{h=0,(c=t(D,w,L,x))<0?(E=w[0],L!=x&&(E=E*u+(w[1]||0)),(h=E/O|0)>1?(h>=u&&(h=u-1),1==(c=t(y=e(D,h,u),w,v=y.length,x=w.length))&&(h--,n(y,L<v?S:D,v,u))):(0==h&&(c=h=1),y=D.slice()),(v=y.length)<x&&y.unshift(0),n(w,y,x,u),-1==c&&(c=t(D,w,L,x=w.length))<1&&(h++,n(w,L<x?S:D,x,u)),x=w.length):0===c&&(h++,w=[0]),b[p++]=h,c&&w[0]?w[x++]=A[C]||0:(w=[A[C]],x=1)}while((C++<P||void 0!==w[0])&&V--);m=void 0!==w[0]}b[0]||b.shift()}if(1==f)g.e=d,s=m;else{for(p=1,h=b[0];h>=10;h/=10)p++;g.e=p+d*f-1,_(g,l?o+g.e+1:o,a,m)}return g}}();function _(e,t,n,r){var i,s,o,a,l,u,c,d,p,f=e.constructor;e:if(null!=t){if(!(d=e.d))return e;for(i=1,a=d[0];a>=10;a/=10)i++;if((s=t-i)<0)s+=7,o=t,l=(c=d[p=0])/b(10,i-o-1)%10|0;else if((p=Math.ceil((s+1)/7))>=(a=d.length)){if(!r)break e;for(;a++<=p;)d.push(0);c=l=0,i=1,o=(s%=7)-7+1}else{for(c=a=d[p],i=1;a>=10;a/=10)i++;l=(o=(s%=7)-7+i)<0?0:c/b(10,i-o-1)%10|0}if(r=r||t<0||void 0!==d[p+1]||(o<0?c:c%b(10,i-o-1)),u=n<4?(l||r)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||r||6==n&&(s>0?o>0?c/b(10,i-o):0:d[p-1])%10&1||n==(e.s<0?8:7)),t<1||!d[0])return d.length=0,u?(t-=e.e+1,d[0]=b(10,(7-t%7)%7),e.e=-t||0):d[0]=e.e=0,e;if(0==s?(d.length=p,a=1,p--):(d.length=p+1,a=b(10,7-s),d[p]=o>0?(c/b(10,i-o)%b(10,o)|0)*a:0),u)for(;;){if(0==p){for(s=1,o=d[0];o>=10;o/=10)s++;for(o=d[0]+=a,a=1;o>=10;o/=10)a++;s!=a&&(e.e++,d[0]==N&&(d[0]=1));break}if(d[p]+=a,d[p]!=N)break;d[p--]=0,a=1}for(s=d.length;0===d[--s];)d.pop()}return h&&(e.e>f.maxE?(e.d=null,e.e=NaN):e.e<f.minE&&(e.e=0,e.d=[0])),e}function A(e,t,n){if(!e.isFinite())return z(e);var r,i=e.e,s=O(e.d),o=s.length;return t?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+q(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):i<0?(s="0."+q(-i-1)+s,n&&(r=n-o)>0&&(s+=q(r))):i>=o?(s+=q(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+q(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=q(r))),s}function D(e,t){var n=e[0];for(t*=7;n>=10;n/=10)t++;return t}function I(e,t,n){if(t>k)throw h=!0,n&&(e.precision=n),Error(y);return _(new e(c),t,1,!0)}function R(e,t,n){if(t>C)throw Error(y);return _(new e(d),t,n,!0)}function j(e){var t=e.length-1,n=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function q(e){for(var t="";e--;)t+="0";return t}function U(e,t,n,r){var i,s=new e(1),o=Math.ceil(r/7+4);for(h=!1;;){if(n%2&&X((s=s.times(t)).d,o)&&(i=!0),0===(n=T(n/2))){n=s.d.length-1,i&&0===s.d[n]&&++s.d[n];break}X((t=t.times(t)).d,o)}return h=!0,s}function B(e){return 1&e.d[e.d.length-1]}function H(e,t,n){for(var r,i,s=new e(t[0]),o=0;++o<t.length;){if(!(i=new e(t[o])).s){s=i;break}((r=s.cmp(i))===n||0===r&&s.s===n)&&(s=i)}return s}function G(e,t){var n,r,i,s,o,a,l,u=0,c=0,d=0,p=e.constructor,f=p.rounding,m=p.precision;if(!e.d||!e.d[0]||e.e>17)return new p(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(h=!1,l=m):l=t,a=new p(.03125);e.e>-2;)e=e.times(a),d+=5;for(l+=r=Math.log(b(2,d))/Math.LN10*2+5|0,n=s=o=new p(1),p.precision=l;;){if(s=_(s.times(e),l,1),n=n.times(++c),O((a=o.plus(M(s,n,l,1))).d).slice(0,l)===O(o.d).slice(0,l)){for(i=d;i--;)o=_(o.times(o),l,1);if(null!=t)return p.precision=m,o;if(!(u<3&&S(o.d,l-r,f,u)))return _(o,p.precision=m,f,h=!0);p.precision=l+=10,n=s=a=new p(1),c=0,u++}o=a}}function K(e,t){var n,r,i,s,o,a,l,u,c,d,p,f=1,m=e,y=m.d,v=m.constructor,g=v.rounding,T=v.precision;if(m.s<0||!y||!y[0]||!m.e&&1==y[0]&&1==y.length)return new v(y&&!y[0]?-1/0:1!=m.s?NaN:y?0:m);if(null==t?(h=!1,c=T):c=t,v.precision=c+=10,r=(n=O(y)).charAt(0),!(Math.abs(s=m.e)<15e14))return u=I(v,c+2,T).times(s+""),m=K(new v(r+"."+n.slice(1)),c-10).plus(u),v.precision=T,null==t?_(m,T,g,h=!0):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=O((m=m.times(e)).d)).charAt(0),f++;for(s=m.e,r>1?(m=new v("0."+n),s++):m=new v(r+"."+n.slice(1)),d=m,l=o=m=M(m.minus(1),m.plus(1),c,1),p=_(m.times(m),c,1),i=3;;){if(o=_(o.times(p),c,1),O((u=l.plus(M(o,new v(i),c,1))).d).slice(0,c)===O(l.d).slice(0,c)){if(l=l.times(2),0!==s&&(l=l.plus(I(v,c+2,T).times(s+""))),l=M(l,new v(f),c,1),null!=t)return v.precision=T,l;if(!S(l.d,c-10,g,a))return _(l,v.precision=T,g,h=!0);v.precision=c+=10,u=o=m=M(d.minus(1),d.plus(1),c,1),p=_(m.times(m),c,1),i=a=1}l=u,i+=2}}function z(e){return String(e.s*e.s/0)}function W(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";e.d.push(+t),h&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Z(e,t){var n,r,s,o,a,l,u,c,d;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),V.test(t))return W(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(x.test(t))n=16,t=t.toLowerCase();else if(w.test(t))n=2;else{if(!E.test(t))throw Error(m+t);n=8}for((o=t.search(/p/i))>0?(u=+t.slice(o+1),t=t.substring(2,o)):t=t.slice(2),a=(o=t.indexOf("."))>=0,r=e.constructor,a&&(o=(l=(t=t.replace(".","")).length)-o,s=U(r,new r(n),o,2*o)),o=d=(c=F(t,n,N)).length-1;0===c[o];--o)c.pop();return o<0?new r(0*e.s):(e.e=D(c,d),e.d=c,h=!1,a&&(e=M(e,s,4*l)),u&&(e=e.times(Math.abs(u)<54?b(2,u):i.pow(2,u))),h=!0,e)}function $(e,t,n,r,i){var s,o,a,l,u=e.precision,c=Math.ceil(u/7);for(h=!1,l=n.times(n),a=new e(r);;){if(o=M(a.times(l),new e(t++*t++),u,1),a=i?r.plus(o):r.minus(o),r=M(o.times(l),new e(t++*t++),u,1),void 0!==(o=a.plus(r)).d[c]){for(s=c;o.d[s]===a.d[s]&&s--;);if(-1==s)break}s=a,a=r,r=o,o=s}return h=!0,o.d.length=c+1,o}function Q(e,t){for(var n=e;--t;)n*=e;return n}function Y(e,t){var n,r=t.s<0,i=R(e,e.precision,1),s=i.times(.5);if((t=t.abs()).lte(s))return o=r?4:1,t;if((n=t.divToInt(i)).isZero())o=r?3:2;else{if((t=t.minus(n.times(i))).lte(s))return o=B(n)?r?2:3:r?4:1,t;o=B(n)?r?1:4:r?3:2}return t.minus(i).abs()}function J(e,t,n,r){var i,o,a,c,d,p,h,f,m,y=e.constructor,v=void 0!==n;if(v?(L(n,1,l),void 0===r?r=y.rounding:L(r,0,8)):(n=y.precision,r=y.rounding),e.isFinite()){for(v?(i=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):i=t,(a=(h=A(e)).indexOf("."))>=0&&(h=h.replace(".",""),(m=new y(1)).e=h.length-a,m.d=F(A(m),10,i),m.e=m.d.length),o=d=(f=F(h,10,i)).length;0==f[--d];)f.pop();if(f[0]){if(a<0?o--:((e=new y(e)).d=f,e.e=o,f=(e=M(e,m,n,r,0,i)).d,o=e.e,p=s),a=f[n],c=i/2,p=p||void 0!==f[n+1],p=r<4?(void 0!==a||p)&&(0===r||r===(e.s<0?3:2)):a>c||a===c&&(4===r||p||6===r&&1&f[n-1]||r===(e.s<0?8:7)),f.length=n,p)for(;++f[--n]>i-1;)f[n]=0,n||(++o,f.unshift(1));for(d=f.length;!f[d-1];--d);for(a=0,h="";a<d;a++)h+=u.charAt(f[a]);if(v){if(d>1)if(16==t||8==t){for(a=16==t?4:3,--d;d%a;d++)h+="0";for(d=(f=F(h,i,t)).length;!f[d-1];--d);for(a=1,h="1.";a<d;a++)h+=u.charAt(f[a])}else h=h.charAt(0)+"."+h.slice(1);h=h+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)h="0"+h;h="0."+h}else if(++o>d)for(o-=d;o--;)h+="0";else o<d&&(h=h.slice(0,o)+"."+h.slice(o))}else h=v?"0p+0":"0";h=(16==t?"0x":2==t?"0b":8==t?"0o":"")+h}else h=z(e);return e.s<0?"-"+h:h}function X(e,t){if(e.length>t)return e.length=t,!0}function ee(e){return new this(e).abs()}function te(e){return new this(e).acos()}function ne(e){return new this(e).acosh()}function re(e,t){return new this(e).plus(t)}function ie(e){return new this(e).asin()}function se(e){return new this(e).asinh()}function oe(e){return new this(e).atan()}function ae(e){return new this(e).atanh()}function le(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,s=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?R(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=R(this,s,1).times(.5)).s=e.s:t.s<0?(this.precision=s,this.rounding=1,n=this.atan(M(e,t,s,1)),t=R(this,s,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(M(e,t,s,1)):(n=R(this,s,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function ue(e){return new this(e).cbrt()}function ce(e){return _(e=new this(e),e.e+1,2)}function de(e,t,n){return new this(e).clamp(t,n)}function pe(e){if(!e||"object"!==typeof e)throw Error(f+"Object expected");var t,n,r,i=!0===e.defaults,s=["precision",1,l,"rounding",0,8,"toExpNeg",-a,0,"toExpPos",0,a,"maxE",0,a,"minE",-a,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(n=s[t],i&&(this[n]=p[n]),void 0!==(r=e[n])){if(!(T(r)===r&&r>=s[t+1]&&r<=s[t+2]))throw Error(m+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=p[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(m+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(v);this[n]=!0}else this[n]=!1}return this}function he(e){return new this(e).cos()}function fe(e){return new this(e).cosh()}function me(e,t){return new this(e).div(t)}function ye(e){return new this(e).exp()}function ve(e){return _(e=new this(e),e.e+1,3)}function ge(){var e,t,n=new this(0);for(h=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return h=!0,new this(1/0);n=t}return h=!0,n.sqrt()}function Te(e){return e instanceof i||e&&e.toStringTag===g||!1}function be(e){return new this(e).ln()}function we(e,t){return new this(e).log(t)}function xe(e){return new this(e).log(2)}function Ee(e){return new this(e).log(10)}function Ve(){return H(this,arguments,-1)}function Ne(){return H(this,arguments,1)}function ke(e,t){return new this(e).mod(t)}function Ce(e,t){return new this(e).mul(t)}function Pe(e,t){return new this(e).pow(t)}function Oe(e){var t,n,r,i,s=0,o=new this(1),a=[];if(void 0===e?e=this.precision:L(e,1,l),r=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));s<r;)(i=t[s])>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:a[s++]=i%1e7;else{if(!crypto.randomBytes)throw Error(v);for(t=crypto.randomBytes(r*=4);s<r;)(i=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((127&t[s+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,s):(a.push(i%1e7),s+=4);s=r/4}else for(;s<r;)a[s++]=1e7*Math.random()|0;for(e%=7,(r=a[--s])&&e&&(i=b(10,7-e),a[s]=(r/i|0)*i);0===a[s];s--)a.pop();if(s<0)n=0,a=[0];else{for(n=-1;0===a[0];n-=7)a.shift();for(r=1,i=a[0];i>=10;i/=10)r++;r<7&&(n-=7-r)}return o.e=n,o.d=a,o}function Le(e){return _(e=new this(e),e.e+1,this.rounding)}function Se(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Fe(e){return new this(e).sin()}function Me(e){return new this(e).sinh()}function _e(e){return new this(e).sqrt()}function Ae(e,t){return new this(e).sub(t)}function De(){var e=0,t=arguments,n=new this(t[e]);for(h=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return h=!0,_(n,this.precision,this.rounding)}function Ie(e){return new this(e).tan()}function Re(e){return new this(e).tanh()}function je(e){return _(e=new this(e),e.e+1,1)}i=function e(t){var n,r,i;function s(e){var t,n,r,i=this;if(!(i instanceof s))return new s(e);if(i.constructor=s,Te(e))return i.s=e.s,void(h?!e.d||e.e>s.maxE?(i.e=NaN,i.d=null):e.e<s.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"===(r=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(h?t>s.maxE?(i.e=NaN,i.d=null):t<s.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!==0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):W(i,e.toString())}if("string"===r)return 45===(n=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===n&&(e=e.slice(1)),i.s=1),V.test(e)?W(i,e):Z(i,e);if("bigint"===r)return e<0?(e=-e,i.s=-1):i.s=1,W(i,e.toString());throw Error(m+e)}if(s.prototype=P,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=pe,s.clone=e,s.isDecimal=Te,s.abs=ee,s.acos=te,s.acosh=ne,s.add=re,s.asin=ie,s.asinh=se,s.atan=oe,s.atanh=ae,s.atan2=le,s.cbrt=ue,s.ceil=ce,s.clamp=de,s.cos=he,s.cosh=fe,s.div=me,s.exp=ye,s.floor=ve,s.hypot=ge,s.ln=be,s.log=we,s.log10=Ee,s.log2=xe,s.max=Ve,s.min=Ne,s.mod=ke,s.mul=Ce,s.pow=Pe,s.random=Oe,s.round=Le,s.sign=Se,s.sin=Fe,s.sinh=Me,s.sqrt=_e,s.sub=Ae,s.sum=De,s.tan=Ie,s.tanh=Re,s.trunc=je,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return s.config(t),s}(p),i.prototype.constructor=i,i.default=i.Decimal=i,c=new i(c),d=new i(d),void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}()},51612(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentNodeList=void 0;const r=n(22697),i=n(42021),s=n(8644),o=n(45014),a=n(90424),l=n(59849),u=n(23249),c=n(93649),d=n(31200),p=n(99583);t.ComponentNodeList=class{get values(){return this.valuesList}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.index=new Map,this.valuesList=null!=e?e:[];for(const t in this.values)this.index.set(t,this.values[t])}get length(){return this.values.length}add(e){this.valuesList.push(e),this.index.set(e.nodeName,e)}containsEnum(e){let t=this.index.get(e);return!!t&&(0,s.instanceOfEnumDefinition)(t)}getNode(e){if(null==e)return null;let t=this.index.get(e);return t||null}contains(e){return this.index.has(e)}getFunction(e){return(0,r.asFunction)(this.index.get(e))}getTable(e){return(0,i.asTable)(this.index.get(e))}getDeclaredType(e){return(0,a.asTypeDefinition)(this.index.get(e))}getScenarios(){return(0,o.where)(this.values,e=>(0,l.instanceOfScenario)(e)).map(e=>(0,l.asScenario)(e))}getEnum(e){return(0,s.asEnumDefinition)(this.index.get(e))}addIfNew(e){this.index.has(e.nodeName)||(this.valuesList.push(e),this.index.set(e.nodeName,e))}getType(e){let t=this.getNode(e),n=(0,i.asTable)(t);if(null!=n)return new u.TableType(e,n);let o=(0,r.asFunction)(t);if(null!=o)return new c.FunctionType(e,o);let l=(0,s.asEnumDefinition)(t);if(null!=l)return new d.EnumType(e,l);let h=(0,a.asTypeDefinition)(t);return null!=h?new p.DeclaredType(e,h):null}}},52581(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Results=void 0;const r=n(59715),i=n(15459),s=n(75019),o=n(68492);class a extends r.ParsableNode{constructor(e){super(e),this.assignmentsValue=[],this.nodeType=i.NodeType.ScenarioResults}parse(e){let t=o.AssignmentDefinitionParser.parse(e);return null==t?this:(this.assignmentsValue.push(t),(0,r.instanceOfParsableNode)(t)?t:this)}getChildren(){return[...this.assignmentsValue]}validate(e){}allAssignments(){return(0,s.flattenAssignments)(this.assignmentsValue)}}t.Results=a},53150(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnumName=void 0;const r=n(59611),i=n(67314),s=n(95318),o=n(15459),a=n(70330);class l extends r.Node{get value(){return a.Assert.notNull(this.valueValue,"value")}constructor(e,t){super(t),this.valueValue=null,this.nodeType=o.NodeType.EnumName,this.valueValue=e}getChildren(){return[]}validate(e){(0,i.isNullOrEmpty)(this.value)?e.logger.fail(this.reference,"Invalid enum name: ".concat(this.value,". name should not be empty.")):(0,s.isValidIdentifier)(this.value)||e.logger.fail(this.reference,"Invalid enum name: ".concat(this.value,"."))}static parseName(e,t){return new l(e,t)}}t.EnumName=l},53622(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VariableReference=void 0;t.VariableReference=class{constructor(e,t,n,r){this.path=e,this.componentType=t,this.variableType=n,this.source=r}toString(){return this.path.toString()}}},53756(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.functionName=void 0;const r=n(59611),i=n(67314),s=n(95318),o=n(15459),a=n(70330);class l extends r.Node{get hasValue(){return null!=this.valueValue}get value(){return a.Assert.notNull(this.valueValue,"value")}constructor(e,t){super(t),this.valueValue=null,this.nodeType=o.NodeType.ScenarioFunctionName,this.valueValue=e}static parse(e,t){const n=e.line.tokens.tokenValue(1);return n?new l(n,t):(e.logger.fail(t,"No function functionName found."),null)}getChildren(){return[]}validate(e){(0,i.isNullOrEmpty)(this.valueValue)||(0,s.isValidIdentifier)(this.valueValue)||e.logger.fail(this.reference,"Invalid scenario function name: '".concat(this.valueValue,"'."))}isEmpty(){return(0,i.isNullOrEmpty)(this.valueValue)}toString(){return this.valueValue}}t.functionName=l},53946(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImplicitVariableTypeDeclaration=void 0,t.instanceOfImplicitVariableTypeDeclaration=s,t.asImplicitVariableTypeDeclaration=function(e){return s(e)?e:null};const r=n(32639),i=n(15459);function s(e){return(null===e||void 0===e?void 0:e.nodeType)==i.NodeType.ImplicitVariableTypeDeclaration}class o extends r.VariableTypeDeclaration{constructor(e){super(e),this.nodeType=i.NodeType.ImplicitVariableTypeDeclaration}validateVariableType(e){if(null==this.variableType)throw new Error("Not supported. Nodes should be Validated first.");return this.variableType}define(e){super.setVariableType(e)}getChildren(){return[]}validate(e){}}t.ImplicitVariableTypeDeclaration=o},54304(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TableLibrary=void 0;const i=r(n(51507));class s{static lookUp(e,t,n,r,i,o){let a="Lookup '".concat(i,"' by '").concat(e,"' from table '").concat(n,"'");return s.lookUpIntern(r,()=>!0,e,t,o,a)[i]}static lookUpRow(e,t,n,r,i){let o="Lookup row by '".concat(e,"' from table '").concat(n,"'");return s.lookUpIntern(r,()=>!0,e,t,i,o)}static lookUpBy(e,t,n,r,i,o,a,l){let u="Lookup '".concat(a,"' by discriminator '").concat(e,"' and value '").concat(n,"' from table '").concat(i,"'");return s.lookUpIntern(o,n=>{let r=n[e];return s.equals(r,t)},n,r,l,u)[a]}static lookUpRowBy(e,t,n,r,i,o,a){let l="Lookup row by discriminator '".concat(e,"' and value '").concat(n,"' from table '").concat(i,"'");return s.lookUpIntern(o,n=>{let r=n[e];return s.equals(r,t)},n,r,a,l)}static lookUpIntern(e,t,n,r,i,s){let o=null;for(let a=0;a<e.length;a++){let l=e[a];if(!t(l))continue;let u=l[n];if(this.equals(u,r))return i.logChild("".concat(s," returned value from row: ").concat(a+1)),l;if(this.greaterThan(u,r)){if(i.logChild("".concat(s," returned value from previous row: ").concat(a)),null==o)throw new Error("".concat(s," failed. Search value '").concat(r,"' not found."));return o}o=l}if(null==o)throw new Error("".concat(s," failed. Search value '").concat(r,"' not found."));return i.logChild("".concat(s," returned value from last row: ").concat(e.length)),o}static equals(e,t){return"[object Decimal]"===toString.call(e)||e instanceof i.default?e.equals(t):e==t}static greaterThan(e,t){return"[object Decimal]"===toString.call(e)||e instanceof i.default?e.greaterThan(t):e>t}}t.TableLibrary=s},54450(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectVariableTypeDeclaration=void 0,t.instanceOfObjectVariableTypeDeclaration=c,t.asObjectVariableTypeDeclaration=function(e){return c(e)?e:null};const r=n(32639),i=n(15459),s=n(88310),o=n(99583),a=n(92272),l=n(31200),u=n(70330);function c(e){return(null===e||void 0===e?void 0:e.nodeType)==i.NodeType.ObjectVariableTypeDeclaration}class d extends r.VariableTypeDeclaration{constructor(e,t){super(t),this.nodeType=i.NodeType.ObjectVariableTypeDeclaration,this.hasNodeDependencies=!0,this.type=e}toString(){return this.type}getDependencies(e){const t=this.getVariableType(e);switch(null===t||void 0===t?void 0:t.variableTypeName){case s.VariableTypeName.DeclaredType:return[u.Assert.notNull((0,o.asDeclaredType)(t),"type as DeclaredType").typeDefinition];case s.VariableTypeName.GeneratedType:return[u.Assert.notNull((0,a.asGeneratedType)(t),"type as GeneratedType").node];case s.VariableTypeName.EnumType:return[u.Assert.notNull((0,l.asEnumType)(t),"type as EnumType").enum];default:return[]}}validateVariableType(e){const t=this.getVariableType(e.componentNodes);return null==t&&e.logger.fail(this.reference,"Invalid type: '".concat(this.type,"'")),t}getVariableType(e){if(!this.type.includes("."))return e.getType(this.type);const t=this.type.split(".");if(t.length>2)return null;const n=e.getType(t[0]);return null==n?null:n.memberType(t[1],e)}getNode(e){if(!this.type.includes("."))return e.getNode(this.type);const t=this.type.split(".");return t.length>2?null:e.getNode(t[0])}getChildren(){return[]}}t.ObjectVariableTypeDeclaration=d},54487(e,t,n){"use strict";t.u=void 0;const r=n(31632),i=n(42711),s=n(14782),o=n(86667);t.u=class{constructor(e){this.libraryObjects={},this.addSystemLibraries(),null===e||void 0===e||e.forEach(e=>this.addLibrary(e))}addSystemLibraries(){this.addLibrary(r.DateLibrary),this.addLibrary(s.MathLibrary),this.addLibrary(i.NumberLibrary)}addLibrary(e){const t=o.Library.build(e);this.libraryObjects[t.name]=t}getLibrary(e){var t;return null!==(t=this.libraryObjects[e.fullPath()])&&void 0!==t?t:null}runtimes(){const e=new Array;for(const t in this.libraryObjects){const n=this.libraryObjects[t];e.push(n.runTime)}return e}}},55469(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatLine=function(e,t){return e.join(t)}},57159(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpreadAssignmentExpression=void 0,t.instanceOfSpreadAssignmentExpression=c,t.asSpreadAssignmentExpression=function(e){return c(e)?e:null};const r=n(9313),i=n(42539),s=n(15229),o=n(15459),a=n(43056),l=n(92272),u=n(15909);function c(e){return(null===e||void 0===e?void 0:e.nodeType)==o.NodeType.SpreadAssignmentExpression}class d extends r.Expression{constructor(e,t,n){super(t,n),this.nodeType=o.NodeType.SpreadAssignmentExpression,this.assignment=e,this.mapping=null}static parse(e,t){let n=e.tokens;if(!d.isValid(n))return(0,i.newParseExpressionFailed)("AssignmentExpression","Invalid expression.");let r=t.parse(n.tokensFrom(2),e.line);if("success"!=r.state)return r;let s=e.createReference(),o=new d(r.result,e,s);return(0,i.newParseExpressionSuccess)(o)}static isValid(e){return e.length>=2&&e.isOperatorToken(0,s.OperatorType.Spread)&&e.isOperatorToken(1,s.OperatorType.Assignment)}getChildren(){return[this.assignment]}validate(e){const t=this.assignment.deriveType(e),n=(0,l.asGeneratedType)(t);null!=n?this.mapping=u.ExtractResultsFunctionExpression.getMapping(this.reference,e,n):e.logger.fail(this.reference,"Couldn't determine type of assignment.")}deriveType(e){return this.assignment.deriveType(e)}usedVariables(){return(0,a.getReadVariableUsage)(this.assignment)}}t.SpreadAssignmentExpression=d},58996(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentNode=void 0,t.instanceOfComponentNode=i,t.asComponentNode=function(e){return i(e)?e:null};const r=n(59715);function i(e){return 1==(null===e||void 0===e?void 0:e.isComponentNode)}class s extends r.ParsableNode{constructor(e){super(e),this.isComponentNode=!0}}t.ComponentNode=s},59127(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderExpressionStatement=function(e){return(0,o.firstOrDefault)(l.all,t=>t.matches(e))};const r=n(16758),i=n(47760),s=n(4230),o=n(45014),a=n(67569);class l{static get all(){return null==l.allValues&&(l.allValues=l.initialize()),this.allValues}constructor(e,t){this.matches=e,this.render=t}static initialize(){return[u(a.NewFunctionExpressionStatement.matches,a.NewFunctionExpressionStatement.render),u(r.FillFunctionStatement.matches,r.FillFunctionStatement.render),u(i.ExtractFunctionStatement.matches,i.ExtractFunctionStatement.render),u(s.AutoMapLexyFunctionStatement.matches,s.AutoMapLexyFunctionStatement.render)]}}function u(e,t){return new l(e,function(e,n){return t(e,n)})}},59164(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParseLineContext=void 0;const r=n(33129);t.ParseLineContext=class{constructor(e,t,n){this.line=e,this.logger=t,this.expressionFactory=n}validateTokens(e){return new r.TokenValidator(e,this.line,this.logger)}failed(e,t){return"Success"!=e.state&&(this.logger.fail(t,e.errorMessage),!0)}}},59611(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Node=void 0;t.Node=class{get reference(){return this.referenceValue}constructor(e){this.referenceValue=e}validateTree(e){e.visitor.enter(this),this.validateChildren(e),this.validate(e),e.visitor.leave(this)}validateChildren(e){this.getChildren().forEach(t=>this.validateChild(e,t))}validateChild(e,t){if(null==t)throw new Error("(".concat(this.nodeType,") Child is null"));t.validateTree(e)}}},59715(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParsableNode=void 0,t.instanceOfParsableNode=i,t.asParsableNode=function(e){return i(e)?e:null};const r=n(59611);function i(e){return 1==(null===e||void 0===e?void 0:e.isParsableNode)}class s extends r.Node{constructor(e){super(e),this.isParsableNode=!0}}t.ParsableNode=s},59849(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scenario=void 0,t.instanceOfScenario=w,t.asScenario=function(e){return w(e)?e:null};const r=n(22697),i=n(58996),s=n(30438),o=n(8644),a=n(42021),l=n(2393),u=n(14276),c=n(52581),d=n(35223),p=n(53756),h=n(23303),f=n(77148),m=n(41486),y=n(15459),v=n(39713),g=n(25848),T=n(71148),b=n(64466);function w(e){return(null===e||void 0===e?void 0:e.nodeType)==y.NodeType.Scenario}class x extends i.ComponentNode{get functionName(){return this.functionNameValue}get functionNode(){return this.functionNodeValue}get enum(){return this.enumValue}get parameters(){return this.parametersValue}get results(){return this.resultsValue}get executionLogging(){return this.executionLoggingValue}get table(){return this.tableValue}get validationTable(){return this.validationTableValue}get expectErrors(){return this.expectErrorsValue}get expectComponentErrors(){return this.expectComponentErrorsValue}get expectExecutionErrors(){return this.expectExecutionErrorsValue}get nodeName(){return this.name.value}constructor(e,t){super(t),this.functionNodeValue=null,this.enumValue=null,this.tableValue=null,this.functionNameValue=null,this.parametersValue=null,this.resultsValue=null,this.validationTableValue=null,this.executionLoggingValue=null,this.expectErrorsValue=null,this.expectComponentErrorsValue=null,this.expectExecutionErrorsValue=null,this.nodeType=y.NodeType.Scenario,this.hasNodeDependencies=!0,this.name=s.ScenarioName.parseName(e,t)}static parse(e,t){return new x(e,t)}parse(e){let t=e.line,n=t.tokens.tokenValue(0),r=t.lineStartReference();if(!t.tokens.isTokenType(0,T.TokenType.KeywordToken))return e.logger.fail(r,"Invalid token '".concat(n,"'. Keyword expected.")),this;switch(n){case f.Keywords.Function:return this.parseFunction(e,r);case f.Keywords.EnumKeyword:return this.parseEnum(e,r);case f.Keywords.TableKeyword:return this.parseTable(e,r);case f.Keywords.Parameters:return this.parametersValue=new d.Parameters(r);case f.Keywords.Results:return this.resultsValue=new c.Results(r);case f.Keywords.ValidationTable:return this.validationTableValue=new b.ValidationTable("".concat(this.name.value,"Table"),r);case f.Keywords.ExecutionLogging:return this.executionLoggingValue=new g.ExecutionLogging(r);case f.Keywords.ExpectErrors:return this.expectErrorsValue=new l.ExpectErrors(r);case f.Keywords.ExpectComponentErrors:return this.expectComponentErrorsValue=new u.ExpectComponentErrors(r);case f.Keywords.ExpectExecutionErrors:return this.expectExecutionErrorsValue=new v.ExpectExecutionErrors(r);default:return this.invalidToken(e,n,r)}}parseFunction(e,t){if(null!=this.functionNodeValue)return e.logger.fail(t,"Duplicated inline Function '".concat(this.nodeName,"'.")),this.functionNodeValue;let n=h.NodeName.parse(e);return null!=n&&null!=n.name?this.parseFunctionName(e,t):(this.functionNodeValue=r.Function.create("".concat(this.name.value,"Function"),!0,t,e.expressionFactory),e.logger.setCurrentNode(this.functionNodeValue),this.functionNodeValue)}parseFunctionName(e,t){return this.functionNameValue=p.functionName.parse(e,t),this}parseEnum(e,t){if(null!=this.enum)return e.logger.fail(t,"Duplicated inline Enum '".concat(this.nodeName,"'.")),this.enum;let n=h.NodeName.parse(e);return null==n||null==n.name?this:(this.enumValue=o.EnumDefinition.parse(n.name,t),e.logger.setCurrentNode(this.enumValue),this.enumValue)}parseTable(e,t){if(null!=this.tableValue)return e.logger.fail(t,"Duplicated inline table '".concat(this.nodeName,"'.")),this.tableValue;let n=h.NodeName.parse(e);return null==n||null==n.name?this:(this.tableValue=new a.Table(n.name,t),e.logger.setCurrentNode(this.tableValue),this.tableValue)}invalidToken(e,t,n){return e.logger.fail(n,"Invalid token '".concat(t,"'.")),this}getChildren(){const e=[];return null!=this.functionNodeValue&&e.push(this.functionNodeValue),null!=this.enumValue&&e.push(this.enumValue),null!=this.tableValue&&e.push(this.tableValue),e.push(this.name),null!=this.functionName&&e.push(this.functionName),null!=this.parameters&&e.push(this.parameters),null!=this.results&&e.push(this.results),null!=this.validationTable&&e.push(this.validationTable),null!=this.expectErrors&&e.push(this.expectErrors),null!=this.expectComponentErrors&&e.push(this.expectComponentErrors),e}validateChild(e,t){t==this.functionNode?super.validateChild(e,t):this.validateWithFunctionVariables(e,t)}validateWithFunctionVariables(e,t){const n=e.createVariableScope();try{this.addFunctionParametersAndResultsForValidation(e),super.validateChild(e,t)}finally{n[Symbol.dispose]()}}addFunctionParametersAndResultsForValidation(e){var t,n,r,i;let s=null!==(t=this.functionNode)&&void 0!==t?t:(null===(n=this.functionName)||void 0===n?void 0:n.hasValue)?e.componentNodes.getFunction(this.functionName.value):null;null!=s&&(x.addVariablesForValidation(e,null===(r=s.parameters)||void 0===r?void 0:r.variables,m.VariableSource.Parameters),x.addVariablesForValidation(e,null===(i=s.results)||void 0===i?void 0:i.variables,m.VariableSource.Results))}static addVariablesForValidation(e,t,n){if(null!=t)for(const r of t){let t=r.type.variableType;null!=t&&e.variableContext.addVariable(r.name,t,n)}}validate(e){var t,n;null!=this.functionName&&!(null===(t=this.functionName)||void 0===t?void 0:t.isEmpty())||null!=this.functionNode||null!=this.enum||null!=this.table||null!=this.expectComponentErrors&&(null===(n=this.expectComponentErrors)||void 0===n?void 0:n.hasValues)||e.logger.fail(this.reference,"Scenario has no function, enum, table or expect errors.")}getDependencies(e){var t;const n=[];if(null!=this.functionNode&&n.push(this.functionNode),null===(t=this.functionName)||void 0===t?void 0:t.hasValue){let t=e.getFunction(this.functionName.value);null!=t&&n.push(t)}return null!=this.enum&&n.push(this.enum),null!=this.tableValue&&n.push(this.tableValue),n}}t.Scenario=x},59986(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Line=void 0;const r=n(24535),i=n(45120),s=n(89377);t.Line=class{get tokens(){if(!this.tokensValues)throw new Error("Tokens not set");return this.tokensValues}constructor(e,t,n){this.tokensValues=null,this.index=e,this.content=t,this.file=n}indent(e){let t=0,n=0,r=0;for(;r<this.content.length;){let e=this.content[r];if(" "==e)t++;else{if("\t"!=e)break;n++}r++}return t>0&&n>0?(e.fail(this.lineReference(r),"Don't mix spaces and tabs for indentations. Use 2 spaces or tabs."),null):t%2!=0?(e.fail(this.lineReference(r),"Wrong number of indent spaces ".concat(t,". Should be multiplication of 2.")),null):n>0?n:t/2}toString(){return"".concat(this.index+1,": ").concat(this.content)}isEmpty(){return null!=this.tokens&&0==this.tokens.length}firstCharacter(){for(let e=0;e<this.content.length;e++)if(" "!=this.content[e]&&"\\"!=this.content[e])return e;return 0}tokenReference(e){var t;return new i.SourceReference(this.file,this.index+1,null!=this.tokens?(null!==(t=this.tokens.characterPosition(e))&&void 0!==t?t:0)+1:1)}lineEndReference(){return new i.SourceReference(this.file,this.index+1,this.content.length)}lineStartReference(){let e=this.firstCharacter();return new i.SourceReference(this.file,this.index+1,e+1)}lineReference(e){var t;return new i.SourceReference(null!==(t=this.file)&&void 0!==t?t:new r.SourceFile("runtime"),this.index+1,e+1)}tokenize(e){let t=e.tokenize(this);return"success"==t.state&&(this.tokensValues=t.result),t}character(e){let t=this.content.charCodeAt(e);return new s.TokenCharacter(t,e)}}},60059(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionCallExpression=void 0,t.instanceOfFunctionCallExpression=l,t.asFunctionCallExpression=function(e){return l(e)?e:null};const r=n(9313),i=n(15229),s=n(43056),o=n(71148),a=n(45014);function l(e){return 1==(null===e||void 0===e?void 0:e.isFunctionCallExpression)}class u extends r.Expression{constructor(e){super(e,e.createReference()),this.isFunctionCallExpression=!0}equals(e){return this.nodeType==(null===e||void 0===e?void 0:e.nodeType)}static isValid(e){return(e.isTokenType(0,o.TokenType.StringLiteralToken)||e.isTokenType(0,o.TokenType.MemberAccessLiteralToken))&&e.isOperatorToken(1,i.OperatorType.OpenParentheses)}usedVariables(){return[...(0,s.getReadVariableUsageNodes)((0,a.whereSelect)(this.getChildren(),e=>(0,r.asExpression)(e)))]}}t.FunctionCallExpression=u},60516(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OperatorToken=void 0,t.instanceOfOperatorToken=p,t.asOperatorToken=function(e){return p(e)?e:null};const r=n(6248),i=n(15229),s=n(40350),o=n(68784),a=n(2329),l=n(95318),u=n(71148);var c;!function(e){e[e.Invalid=0]="Invalid",e[e.Incomplete=1]="Incomplete",e[e.Complete=2]="Complete",e[e.CompleteNotProcessed=3]="CompleteNotProcessed"}(c||(c={}));class d{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.type=e,this.firstChar=t,this.secondChar=n,this.thirdChar=r,this.chars=null!=r?3:null!=n?2:1}matches(e,t,n){if(e!=this.firstChar)return c.Invalid;if(null==t)return 1==this.chars?c.Complete:c.Invalid;if(null==n){if(3==this.chars)return t==this.secondChar?c.Incomplete:c.Invalid;if(2==this.chars)return t==this.secondChar?c.Complete:c.Invalid;if(1==this.chars)return c.CompleteNotProcessed}return n==this.thirdChar&&t==this.secondChar?c.Complete:c.Invalid}}function p(e){return(null===e||void 0===e?void 0:e.tokenType)==u.TokenType.OperatorToken}class h extends r.ParsableToken{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e),this.tokenIsLiteral=!1,this.tokenType=u.TokenType.OperatorToken,this.type=i.OperatorType.NotSet,t&&(this.type=t)}parse(e){const t=e.value,n=this.value.charCodeAt(0),r=2==this.value.length?this.value.charCodeAt(1):t,i=2==this.value.length?t:null;for(let s=0;s<h.operatorCombinations.length;s++){const e=h.operatorCombinations[s],o=e.matches(n,r,i);if(o!=c.Invalid)return this.parseToken(o,e,t)}return((0,l.isDigitOrLetter)(t)||this.terminatorValuesContains(t))&&1==this.value.length&&this.value.charCodeAt(0)==s.TokenValues.TableSeparator?{state:"finished",charProcessed:!1,newToken:new a.TableSeparatorToken(this.firstCharacter)}:(0,o.newParseTokenInvalidResult)("Invalid token at ".concat(e.position,": '").concat(t,"'"))}terminatorValuesContains(e){return h.terminatorValues.findIndex(t=>t==e)>=0}parseToken(e,t,n){return e==c.Incomplete?(this.appendValue(n),(0,o.newParseTokenInProgressResult)()):(this.type=t.type,e==c.Complete&&this.appendValue(n),(0,o.newParseTokenFinishedResult)(e==c.Complete))}endOfLine(){if(1==this.value.length&&this.value.charCodeAt(0)==s.TokenValues.TableSeparator)return(0,o.newParseTokenFinishedResult)(!1,new a.TableSeparatorToken(this.firstCharacter));const e=this.value.charCodeAt(0),t=this.value.length>1?this.value.charCodeAt(1):null,n=this.value.length>2?this.value.charCodeAt(2):null;for(let r=0;r<h.operatorCombinations.length;r++){let i=h.operatorCombinations[r],s=i.matches(e,t,n);if(s==c.Complete||s==c.CompleteNotProcessed)return this.type=i.type,(0,o.newParseTokenFinishedResult)(!0)}return(0,o.newParseTokenInvalidResult)("Incomplete token: '".concat(this.value,"'"))}}t.OperatorToken=h,h.terminatorValues=[s.TokenValues.Space,s.TokenValues.ArgumentSeparator,s.TokenValues.Subtraction,s.TokenValues.OpenParentheses,s.TokenValues.OpenBrackets,s.TokenValues.CloseParentheses,s.TokenValues.CloseBrackets],h.operatorCombinations=[new d(i.OperatorType.GreaterThanOrEqual,s.TokenValues.GreaterThan,s.TokenValues.Assignment),new d(i.OperatorType.LessThanOrEqual,s.TokenValues.LessThan,s.TokenValues.Assignment),new d(i.OperatorType.Equals,s.TokenValues.Assignment,s.TokenValues.Assignment),new d(i.OperatorType.NotEqual,s.TokenValues.NotEqualStart,s.TokenValues.Assignment),new d(i.OperatorType.Assignment,s.TokenValues.Assignment),new d(i.OperatorType.Addition,s.TokenValues.Addition),new d(i.OperatorType.Subtraction,s.TokenValues.Subtraction),new d(i.OperatorType.Multiplication,s.TokenValues.Multiplication),new d(i.OperatorType.Modulus,s.TokenValues.Modulus),new d(i.OperatorType.OpenParentheses,s.TokenValues.OpenParentheses),new d(i.OperatorType.CloseParentheses,s.TokenValues.CloseParentheses),new d(i.OperatorType.OpenBrackets,s.TokenValues.OpenBrackets),new d(i.OperatorType.CloseBrackets,s.TokenValues.CloseBrackets),new d(i.OperatorType.GreaterThan,s.TokenValues.GreaterThan),new d(i.OperatorType.LessThan,s.TokenValues.LessThan),new d(i.OperatorType.ArgumentSeparator,s.TokenValues.ArgumentSeparator),new d(i.OperatorType.And,s.TokenValues.And,s.TokenValues.And),new d(i.OperatorType.Or,s.TokenValues.Or,s.TokenValues.Or),new d(i.OperatorType.Spread,s.TokenValues.Spread,s.TokenValues.Spread,s.TokenValues.Spread)]},60885(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuotedLiteralToken=void 0,t.instanceOfQuotedLiteralToken=l,t.asQuotedLiteralToken=function(e){return l(e)?e:null};const r=n(6248),i=n(40350),s=n(68784),o=n(82140),a=n(71148);function l(e){return(null===e||void 0===e?void 0:e.tokenType)==a.TokenType.QuotedLiteralToken}class u extends r.ParsableToken{constructor(e){if(super(e,""),this.quoteClosed=!1,this.tokenIsLiteral=!0,this.tokenType=a.TokenType.QuotedLiteralToken,e.value!=i.TokenValues.Quote)throw new Error("QuotedLiteralToken should start with a quote")}get typedValue(){return this.value}deriveType(e){return o.PrimitiveType.string}parse(e){let t=e.value;if(this.quoteClosed)throw new Error("No characters allowed after closing quote.");return t==i.TokenValues.Quote?(this.quoteClosed=!0,(0,s.newParseTokenFinishedResult)(!0)):(this.appendValue(t),(0,s.newParseTokenInProgressResult)())}endOfLine(){if(!this.quoteClosed)return(0,s.newParseTokenInvalidResult)("Closing quote expected.");throw new Error("Token should be finished by the Parse method before reaching end of line")}toString(){return this.value}}t.QuotedLiteralToken=u},61187(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommentToken=void 0,t.instanceOfCommentToken=o,t.asCommentToken=function(e){return o(e)?e:null};const r=n(6248),i=n(68784),s=n(71148);function o(e){return(null===e||void 0===e?void 0:e.tokenType)==s.TokenType.CommentToken}class a extends r.ParsableToken{constructor(e,t){super(e),this.tokenIsLiteral=!1,this.tokenType=s.TokenType.CommentToken,this.appendString(t)}parse(e){return this.appendValue(e.value),(0,i.newParseTokenInProgressResult)()}endOfLine(){return(0,i.newParseTokenFinishedResult)(!0)}}t.CommentToken=a},61388(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderExpressions=P,t.renderValueExpression=function(e,t){function n(n,r){const i=n(e);if(null==i)throw new Error("Invalid expression type: '".concat(e.nodeType,"' cast is null"));r(i,t)}switch(e.nodeType){case r.NodeType.LiteralExpression:return n(s.asLiteralExpression,F);case r.NodeType.IdentifierExpression:return n(h.asIdentifierExpression,S);case r.NodeType.MemberAccessExpression:return n(i.asMemberAccessExpression,L);default:throw new Error("Invalid expression type: ".concat(e.nodeType))}},t.renderExpression=O;const r=n(15459),i=n(32045),s=n(92310),o=n(34632),a=n(46364),l=n(6180),u=n(90223),c=n(50094),d=n(45797),p=n(68305),h=n(9026),f=n(20429),m=n(38184),y=n(60059),v=n(78433),g=n(71148),T=n(72928),b=n(81841),w=n(45641),x=n(2013),E=n(4707),V=n(16736),N=n(82140),k=n(59127);function C(e,t){(0,b.logLineAndVariables)(t,e);const n=e.currentLine;e.startLine();const r=(0,k.renderExpressionStatement)(t);null!=r?r.render(t,e):(O(t,e),n==e.currentLine&&e.endLine(";")),(0,b.logAssignmentVariables)(t,e),e.writeLine()}function P(e,t,n){if(void 0!=e){t&&n.writeLine("".concat(x.LexyCodeConstants.contextVariable,".useLastNodeAsScope();"));for(const t of e)C(n,t);t&&n.writeLine("".concat(x.LexyCodeConstants.contextVariable,".revertToParentScope();"))}}function O(e,t){function n(n,r){const i=n(e);if(null==i)throw new Error("Invalid expression type: '".concat(e.nodeType,"' cast is null"));r(i,t)}switch(e.nodeType){case r.NodeType.AssignmentExpression:return n(o.asAssignmentExpression,M);case r.NodeType.BinaryExpression:return n(a.asBinaryExpression,A);case r.NodeType.BracketedExpression:return n(l.asBracketedExpression,D);case r.NodeType.IfExpression:return n(c.asIfExpression,I);case r.NodeType.LiteralExpression:return n(s.asLiteralExpression,F);case r.NodeType.IdentifierExpression:return n(h.asIdentifierExpression,S);case r.NodeType.ParenthesizedExpression:return n(u.asParenthesizedExpression,q);case r.NodeType.SwitchExpression:return n(d.asSwitchExpression,H);case r.NodeType.MemberAccessExpression:return n(i.asMemberAccessExpression,L);case r.NodeType.VariableDeclarationExpression:return n(f.asVariableDeclarationExpression,G)}if(null!=(0,y.asFunctionCallExpression)(e))return n(y.asFunctionCallExpression,v.renderFunctionCall);throw new Error("Invalid expression type: ".concat(e.nodeType))}function L(e,t){if(null==e.variable||e.variable.path.parts<2)throw new Error("Invalid MemberAccessExpression: ".concat(e));(0,w.renderVariableReference)(e.variable,t)}function S(e,t){if(null==e.variable)throw new Error("Invalid IdentifierExpression: ".concat(e));(0,w.renderVariableReference)(e.variable,t)}function F(e,t){function n(e,t){let n=t.toString();for(;n.length<e;)n="0"+n;return n}if(e.literal.tokenType==g.TokenType.QuotedLiteralToken)t.write('"'.concat(e.literal.value,'"'));else if(e.literal.tokenType==g.TokenType.DateTimeLiteralToken){const r=(0,T.asDateTimeLiteral)(e.literal),i=null===r||void 0===r?void 0:r.dateTimeValue;if(null==i)throw new Error("DateTimeLiteralToken.dateTimeValue expected");t.write('new Date("'.concat(n(4,i.getFullYear()),"-").concat(n(2,i.getMonth()+1),"-").concat(n(2,i.getDate()),"T").concat(n(2,i.getHours()),":").concat(n(2,i.getMinutes()),":").concat(n(2,i.getSeconds()),'")'))}else e.literal.tokenType==g.TokenType.NumberLiteralToken?t.write("".concat(x.LexyCodeConstants.environmentVariable,".Decimal(").concat(e.literal.value,")")):t.write(e.literal.value)}function M(e,t){O(e.variable,t),t.write(" = "),O(e.assignment,t)}function _(e,t){const n=function(e){switch(e){case p.ExpressionOperator.Addition:return{name:"add"};case p.ExpressionOperator.Subtraction:return{name:"sub"};case p.ExpressionOperator.Multiplication:return{name:"mul"};case p.ExpressionOperator.Division:return{name:"div"};case p.ExpressionOperator.Modulus:return{name:"mod"};case p.ExpressionOperator.GreaterThan:return{name:"greaterThan"};case p.ExpressionOperator.GreaterThanOrEqual:return{name:"greaterThanOrEqualTo"};case p.ExpressionOperator.LessThan:return{name:"lessThan"};case p.ExpressionOperator.LessThanOrEqual:return{name:"lessThanOrEqualTo"};case p.ExpressionOperator.Equals:return{name:"eq"};case p.ExpressionOperator.NotEqual:return{name:"eq",negate:!0};default:return null}}(e.operator);return null!=n&&(n.negate&&t.write("!"),O(e.left,t),t.write("."+n.name+"("),O(e.right,t),t.write(")"),!0)}function A(e,t){var n,r,i,s,o,a;(null===(n=e.leftVariableType)||void 0===n?void 0:n.equals(N.PrimitiveType.number))&&(null===(r=e.rightVariableType)||void 0===r?void 0:r.equals(N.PrimitiveType.number))&&_(e,t)||(O(e.left,t),(null===(i=e.leftVariableType)||void 0===i?void 0:i.equals(N.PrimitiveType.date))&&t.write(".getTime()"),t.write(function(e){switch(e){case p.ExpressionOperator.Addition:return" + ";case p.ExpressionOperator.Subtraction:return" - ";case p.ExpressionOperator.Multiplication:return" * ";case p.ExpressionOperator.Division:return" / ";case p.ExpressionOperator.Modulus:return" % ";case p.ExpressionOperator.GreaterThan:return" > ";case p.ExpressionOperator.GreaterThanOrEqual:return" >= ";case p.ExpressionOperator.LessThan:return" < ";case p.ExpressionOperator.LessThanOrEqual:return" <= ";case p.ExpressionOperator.And:return" && ";case p.ExpressionOperator.Or:return" || ";case p.ExpressionOperator.Equals:return" == ";case p.ExpressionOperator.NotEqual:return" != ";default:throw new Error("Invalid operator: "+e)}}(e.operator)),(null===(s=e.leftVariableType)||void 0===s?void 0:s.equals(N.PrimitiveType.string))&&(null===(o=e.rightVariableType)||void 0===o?void 0:o.equals(N.PrimitiveType.date))?(t.write("".concat(x.LexyCodeConstants.environmentVariable,".libraries.Date.functions.Format(")),O(e.right,t),t.write(")")):(O(e.right,t),(null===(a=e.rightVariableType)||void 0===a?void 0:a.equals(N.PrimitiveType.date))&&t.write(".getTime()")))}function D(e,t){t.write("["),O(e.expression,t),t.write("]")}function I(e,t){t.write("if ("),O(e.condition,t),t.openInlineScope(")"),P(e.trueExpressions,!0,t);for(const n of e.elseExpressions){const e=(0,V.asElseExpression)(n);if(null!=e){R(e,t);continue}const r=(0,E.asElseifExpression)(n);null!=r&&j(r,t)}t.closeScope()}function R(e,t){t.writeLine("} else {"),(0,b.logLineAndVariables)(e,t),P(e.falseExpressions,!0,t)}function j(e,t){t.startLine("} else if ("),O(e.condition,t),t.endLine(" ) {"),P(e.trueExpressions,!0,t)}function q(e,t){t.write("("),O(e.expression,t),t.write(")")}function U(e,t){null==e.value?t.openScope("default:"):(t.startLine("case "),B(e.value,e.valueType,t),t.openInlineScope(":")),(0,b.logLineAndVariables)(e,t),P(e.expressions,!0,t),t.writeLine("break;"),t.closeScope()}function B(e,t,n){O(e,n),(null===t||void 0===t?void 0:t.equals(N.PrimitiveType.number))&&n.write(".toNumber()")}function H(e,t){t.write("switch("),B(e.condition,e.conditionType,t),t.openInlineScope(")");for(const n of e.cases)U(n,t);t.closeScope()}function G(e,t){t.write("let ".concat(e.name," = ")),null!=e.assignment?O(e.assignment,t):(0,m.renderTypeDefaultExpression)(e.type,t)}},61461(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateTypeAndDefault=function(e,t,n,l){const p=(0,r.asObjectVariableTypeDeclaration)(n);if(null!=p)return void function(e,t,n,r){const i=c.IdentifierPath.parseString(n.type),a=e.variableContext.createVariableReference(t,i,e);let l=null===a||void 0===a?void 0:a.variableType;if(null==l||l.variableTypeName!=u.VariableTypeName.EnumType&&l.variableTypeName!=u.VariableTypeName.DeclaredType&&l.variableTypeName!=u.VariableTypeName.GeneratedType)return;if(null==r)return;if(!(0,s.instanceOfEnumType)(l))return void e.logger.fail(t,"Invalid default value '".concat(r,"'. (type: '").concat(n.type,"') does not support a default value."));const d=(0,o.asMemberAccessExpression)(r);if(null==d||null==d.identifierPath)return void e.logger.fail(t,"Invalid default value '".concat(r,"'. (type: '").concat(n.type,"')"));const p=d.identifierPath;2!=p.parts&&e.logger.fail(t,"Invalid default value '".concat(r,"'. (type: '").concat(n.type,"')"));p.rootIdentifier!=n.type&&e.logger.fail(t,"Invalid default value '".concat(r,"'. Invalid enum type. (type: '").concat(n.type,"')"));const h=e.componentNodes.getEnum(p.rootIdentifier);null!=h&&h.containsMember(p.path[1])||e.logger.fail(t,"Invalid default value '".concat(r,"'. Invalid member. (type: '").concat(n.type,"')"))}(e,t,p,l);const h=(0,i.asPrimitiveVariableTypeDeclaration)(n);if(null!=h)return void function(e,t,n,r){if(null==r)return;switch(n.type){case a.TypeNames.number:d("NumberLiteralToken",e,t,n,r);break;case a.TypeNames.string:d("QuotedLiteralToken",e,t,n,r);break;case a.TypeNames.boolean:d("BooleanLiteralToken",e,t,n,r);break;case a.TypeNames.date:d("DateTimeLiteralToken",e,t,n,r);break;default:throw new Error("Unexpected type: ".concat(n.type))}}(e,t,h,l);throw new Error("Invalid Type: ".concat(n.nodeType))};const r=n(54450),i=n(46384),s=n(31200),o=n(32045),a=n(27449),l=n(92310),u=n(88310),c=n(5627);function d(e,t,n,r,i){const s=(0,l.asLiteralExpression)(i);null!=s?s.literal.tokenType!=e&&t.logger.fail(n,"Invalid default value '".concat(i,"'. (type: '").concat(r.type,"')")):t.logger.fail(n,"Invalid default value '".concat(i,"'. (type: '").concat(r.type,"')"))}},61491(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LibraryFunctionCall=void 0,t.instanceOfLibraryFunctionCall=i,t.asLibraryFunctionCall=function(e){return i(e)?e:null};const r=n(93109);function i(e){return(null===e||void 0===e?void 0:e.functionCallType)==r.MemberFunctionCallType.LibraryFunctionCall}t.LibraryFunctionCall=class{constructor(e,t,n){this.functionCallType=r.MemberFunctionCallType.LibraryFunctionCall,this.libraryName=e,this.functionName=t,this.returnType=n}}},62737(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TableRow=void 0;const r=n(59611),i=n(41844),s=n(33948),o=n(15459),a=n(71148),l=n(43288);class u extends r.Node{get values(){return this.valuesValue}constructor(e,t,n){super(n),this.nodeType=o.NodeType.TableRow,this.valuesValue=t,this.tableHeader=e}static parse(e,t){let n=0;if(!e.validateTokens("TableRow").type(n,a.TokenType.TableSeparatorToken).isValid)return null;let r=new Array,i=e.line.tokens;for(;++n<i.length;){const s=u.parseValue(e,t,i,n++,r.length);if(null==s)return null;r.push(s)}return new u(t,r,e.line.lineStartReference())}static parseValue(e,t,n,r,o){if(!e.validateTokens("TableRow").isLiteralToken(r).type(r+1,a.TokenType.TableSeparatorToken).isValid)return null;var u=e.line.tokenReference(r);let c=n.token(r++,i.asToken);if(null==c)return null;let d=e.expressionFactory.parse(new s.TokenList([c]),e.line);return"failed"==d.state?(e.logger.fail(u,d.errorMessage),null):new l.TableValue(o,d.result,t,u)}getChildren(){return[...this.values]}validate(e){this.tableHeader.columns.length!=this.values.length&&e.logger.fail(this.reference,"Invalid number of values ".concat(this.values.length,". Expected ").concat(this.tableHeader.columns.length,"."))}}t.TableRow=u},63155(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DependencyNode=void 0;t.DependencyNode=class{get dependencies(){return this.dependenciesValue}get node(){return this.nodeValue}constructor(e,t,n){this.dependenciesValue=[],this.nodeValue=t,this.name=e,this.dependenciesValue=n}hasDependency(e){return this.dependenciesValue.indexOf(e.name)>=0}}},64466(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationTable=void 0;const r=n(15459),i=n(20380),s=n(31517),o=n(96251),a=n(59715);class l extends a.ParsableNode{get header(){return this.headerValue}get rows(){return this.rowsValue}constructor(e,t){super(t),this.invalidHeader=!1,this.rowsValue=[],this.headerValue=null,this.nodeType=r.NodeType.ValidationTable,this.name=new s.ValidationTableName,this.name.parseName(e)}parse(e){if(this.invalidHeader)return this;if(null==this.headerValue)return this.headerValue=o.ValidationTableHeader.parse(e),null==this.headerValue&&(this.invalidHeader=!0),this;const t=i.ValidationTableRow.parse(e,this.rows.length,this.headerValue);return null!=t&&this.rows.push(t),this}getChildren(){return null!=this.header?[this.header,...this.rows]:[...this.rows]}validate(e){null==this.header&&e.logger.fail(this.reference,"No table header found.")}validateTree(e){const t=e.createVariableScope();try{super.validateTree(e)}finally{t[Symbol.dispose]()}}}t.ValidationTable=l},64467(e,t,n){"use strict";n.d(t,{A:()=>i});var r=n(20816);function i(e,t,n){return(t=(0,r.A)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},65043(e,t,n){"use strict";n(14202)},65611(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.LexyParser=void 0;const i=n(47222),s=n(36311),o=n(59164),a=n(71196),l=n(97461),u=n(9897),c=n(72540),d=n(91485),p=n(70330),h=n(58996);t.LexyParser=class{constructor(e,t,n,r,i){this.baseLogger=e,this.tokenizer=t,this.fileSystem=n,this.expressionFactory=r,this.sourceCode=new u.SourceCodeDocument,this.libraries=p.Assert.notNull(i,"libraries")}parseFile(e,t){return r(this,void 0,void 0,function*(){const n=this.fileSystem.isPathRooted(e)?e:this.fileSystem.getFullPath(e);this.baseLogger.logInformation("Parse file: "+n);const r=yield this.fileSystem.readAllLines(n);return yield this.parse(r,e,t)})}parse(e,t,n){return r(this,void 0,void 0,function*(){const r=new c.ParserContext(this.baseLogger,this.fileSystem,this.expressionFactory,this.libraries,n);r.addFileIncluded(t),r.setFileLineFilter(t),yield this.parseDocument(r,e,t),r.logger.logNodes(r.nodes.values);const s=this.sortByDependencyAndCheckCircularDependencies(r);return s.hasCircularReferences||(r.rootNode.sortByDependency(s.sortedNodes),this.validateNodesTree(r)),1!=r.options.suppressException&&r.logger.assertNoErrors(),new i.ParserResult(r.rootNode,r.nodes,r.logger,s)})}parseDocument(e,t,n){return r(this,void 0,void 0,function*(){var r,i;this.sourceCode.setCode(t,this.fileSystem.getFileName(n));let o=0,a=new s.ParsableNodeIndex(e.rootNode);for(;this.sourceCode.hasMoreLines();){if(!this.tokenizeLine(e)){o=null!==(i=null===(r=this.sourceCode.currentLine)||void 0===r?void 0:r.indent(e.logger))&&void 0!==i?i:o;continue}const t=this.sourceCode.currentLine,n=this.getIndent(e,t);if(!n.success)continue;const s=n.value;if(s>o){e.logger.fail(t.lineStartReference(),"Invalid indent: ".concat(s));continue}let l=a.getCurrentOrDescend(s);l=this.parseLine(e,l,a,s),o=s+1,a.set(o,l)}this.reset(e),yield this.loadIncludedFiles(e,n)})}getIndent(e,t){if(t.isEmpty())return{success:!1,value:0};let n=t.indent(e.logger);return null==n?{success:!1,value:0}:{success:!0,value:n}}tokenizeLine(e){let t=this.sourceCode.nextLine();if(!e.lineFilter.useLine(t.content))return e.logger.log(t.lineStartReference(),"Skip line by filter: '".concat(t.content,"'")),!1;e.logger.log(t.lineStartReference(),"'".concat(t.content,"'"));let n=t.tokenize(this.tokenizer);if("success"!=n.state)return e.logger.fail(n.reference,n.errorMessage),!1;const r=this.sourceCode.currentLine.tokens.asArray().map(e=>"".concat(e.tokenType,"(").concat(e.value,")")).join(" ");return e.logger.log(t.lineStartReference()," Tokens: "+r),!0}loadIncludedFiles(e,t){return r(this,void 0,void 0,function*(){let n=e.rootNode.getDueIncludes();for(const r of n)yield this.includeFiles(e,t,r)})}includeFiles(e,t,n){return r(this,void 0,void 0,function*(){let r=yield n.process(t,e);if(null==r)return;if(e.isFileIncluded(r))return;e.logger.logInfo("Parse file: "+r);const i=yield this.fileSystem.readAllLines(r);e.addFileIncluded(r),yield this.parseDocument(e,i,r)})}validateNodesTree(e){let t=new d.TrackLoggingCurrentNodeVisitor(e.logger),n=new a.ValidationContext(e.logger,e.nodes,t,e.libraries);e.rootNode.validateTree(n)}sortByDependencyAndCheckCircularDependencies(e){let t=l.DependencyGraphFactory.create(e.nodes);if(t.hasCircularReferences)for(const n of t.circularReferences)e.logger.setCurrentNode(n),e.logger.fail(n.reference,"Circular reference detected in: '".concat(n.nodeName,"'"));return t}reset(e){this.sourceCode.reset(),e.logger.resetCurrentNode()}parseLine(e,t,n,r){if(null==t)throw new Error("Current node can't be null. Line: ".concat(this.sourceCode.currentLine));let i=new o.ParseLineContext(this.sourceCode.currentLine,e.logger,this.expressionFactory),s=t.parse(i);if(!s)throw new Error("(".concat(t,") Parse should return child node or itself."));const a=(0,h.asComponentNode)(s);if(null!=a)e.logger.setCurrentNode(a);else{const t=n.getParentComponent(r);e.logger.setCurrentNode(t)}return s}}},65635(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodesLogger=void 0;t.NodesLogger=class{constructor(){this.builder=[],this.indent=0}log(e){for(const t of e)this.logNode(t)}logNode(e){if(this.builder.push(" ".repeat(this.indent)),null==e)throw new Error("node.getChildren should never return null.");{const t=this.asComponentNode(e);null!=t?this.builder.push("".concat(t.nodeType,": ").concat(t.nodeName)):this.builder.push(e.nodeType)}this.builder.push("\n");const t=e.getChildren();this.indent+=2,this.log(t),this.indent-=2}toString(){return this.builder.join("")}instanceOfComponentNode(e){return 1==(null===e||void 0===e?void 0:e.isComponentNode)}asComponentNode(e){return this.instanceOfComponentNode(e)?e:null}}},67314(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNullOrEmpty=function(e){return null==e||""==e}},67569(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NewFunctionExpressionStatement=void 0;const r=n(60059),i=n(20429),s=n(27556),o=n(87274);t.NewFunctionExpressionStatement=class{static matches(e){const t=(0,i.asVariableDeclarationExpression)(e);if(null==t)return!1;const n=(0,r.asFunctionCallExpression)(t.assignment);return null!=n&&(0,s.instanceOfNewFunctionExpression)(n)}static render(e,t){if(null==e.type.variableType)throw new Error("assignmentExpression.type.variableType should not be null");const n=(0,r.asFunctionCallExpression)(e.assignment);if(null==n)throw new Error("assignmentExpression.assignment should be FunctionCallExpression");if(null==(0,s.asNewFunctionExpression)(n))throw new Error("functionCallExpression.FunctionCallExpression should be NewFunctionExpression");(0,o.translateType)(e.type.variableType);t.write("const "+e.name+" = new "),t.writeEnvironment(".".concat((0,o.translateType)(e.type.variableType))),t.endLine("();")}}},68305(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionOperator=void 0,function(e){e.Addition="Addition",e.Subtraction="Subtraction",e.Multiplication="Multiplication",e.Division="Division",e.Modulus="Modulus",e.GreaterThan="GreaterThan",e.GreaterThanOrEqual="GreaterThanOrEqual",e.LessThan="LessThan",e.LessThanOrEqual="LessThanOrEqual",e.And="And",e.Or="Or",e.Equals="Equals",e.NotEqual="NotEqual"}(n||(t.ExpressionOperator=n={}))},68492(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AssignmentDefinitionParser=void 0;const r=n(98400),i=n(15229),s=n(71148),o=n(89981),a=n(98145),l=n(18207);class u{static parse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=e.line,c=n.tokens,d=n.lineStartReference(),p=c.find(e=>e.type==i.OperatorType.Assignment,s.TokenType.OperatorToken);if(p<=0)return e.logger.fail(d,"Invalid assignment. Expected: 'Variable = Value'"),null;let h=c.tokensFromStart(p);null!=t&&(h=l.AssignmentDefinition.addParentVariableAccessor(t,h));const f=e.expressionFactory.parse(h,n);if("failed"==f.state)return e.logger.fail(d,f.errorMessage),null;const m=o.VariablePathExpressionParser.parseExpression(f.result);if("failed"==m.state)return e.logger.fail(d,m.errorMessage),null;if(p==c.length-1)return new r.ObjectAssignmentDefinition(m.result,d,u.parse);const y=e.expressionFactory.parse(c.tokensFrom(p+1),n);if("failed"==y.state)return e.logger.fail(d,y.errorMessage),null;const v=a.ConstantValueParser.parse(y.result);return"failed"==v.state?(e.logger.fail(d,v.errorMessage),null):new l.AssignmentDefinition(m.result,v.result,f.result,y.result,d)}}t.AssignmentDefinitionParser=u},68784(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newParseTokenInvalidResult=function(e){return{state:"invalid",validationError:e}},t.newParseTokenFinishedResult=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{state:"finished",charProcessed:e,newToken:t}},t.newParseTokenInProgressResult=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{state:"inProgress",newToken:e}}},69297(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LibraryFunctionCallRenderer=void 0;const r=n(2013),i=n(37381),s=n(61491),o=n(70330);class a{static matches(e){return(0,i.instanceOfMemberFunctionCallExpression)(e)&&(0,s.instanceOfLibraryFunctionCall)(e.functionCall)}static render(e,t){const n=o.Assert.notNull((0,s.asLibraryFunctionCall)(e.functionCall),"functionCall as LibraryFunctionCall");return a.renderFunctionCall(n.libraryName,n.functionName,e.args,t)}static renderFunctionCall(e,t,n,i){i.writeEnvironment(".libraries.".concat(e,".functions.").concat(t)),i.write("(");for(const r in n){const e=n[r];i.renderExpression(e),i.write(", ")}i.write("".concat(r.LexyCodeConstants.contextVariable,")"))}}t.LibraryFunctionCallRenderer=a},69445(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeWriter=void 0;const r=n(67314),i=n(2013);t.CodeWriter=class{get currentLine(){return this.currentLineValue}constructor(e){this.builder=[],this.indent=0,this.currentLineValue=0,this.renderExpressionHandler=e}startLine(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!=e?this.builder.push(this.indentString()+e):this.builder.push(this.indentString())}endLine(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!=e?this.builder.push(e+"\n"):this.builder.push("\n"),this.currentLineValue++}writeLine(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null==e?this.builder.push("\n"):this.builder.push(this.indentString()+e+"\n"),this.currentLineValue++}write(e){this.builder.push(e)}writeEnvironment(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!=e?this.builder.push(i.LexyCodeConstants.environmentVariable+e):this.builder.push(i.LexyCodeConstants.environmentVariable)}openScope(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!=e?this.writeLine(e+" {"):this.writeLine(" {"),this.indent++}openInlineScope(e){this.endLine(e+" {"),this.indent++}closeScope(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.indent--,null!=e?this.writeLine("}"+e):this.writeLine("}")}openBrackets(e){this.writeLine(e+" ["),this.indent++}closeBrackets(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.indent--,null!=e?this.writeLine("]"+e):this.writeLine("]")}toString(){return this.builder.join("")}indentString(){return" ".repeat(2*this.indent)}identifierFromEnvironment(e){if((0,r.isNullOrEmpty)(e))throw new Error("Value is null or empty");return"".concat(i.LexyCodeConstants.environmentVariable,".").concat(e)}renderExpression(e){this.renderExpressionHandler(e,this)}}},69474(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LexyFunctionCallRenderer=void 0;const r=n(45375),i=n(2013),s=n(87963),o=n(92272),a=n(19137),l=n(70330),u=n(74182),c=n(87274),d=n(5338);class p{static matches(e){return(0,s.instanceOfLexyFunctionCallExpression)(e)}static render(e,t){return p.renderRunFunction(e.functionName,e.args,e.parametersTypes,e.parametersMapping,t)}static renderRunFunction(e,t,n,s,o){o.writeEnvironment("."+(0,r.functionClassName)(e));if(p.isInline(e,n)&&o.write("."+i.LexyCodeConstants.inlineMethod),o.write("("),1==t.length&&(0,u.instanceOfSpreadExpression)(t[0]))p.renderMappedParametersObject(l.Assert.notNull(s,"mapping"),o);else for(const r of t)o.renderExpression(r),o.write(", ");o.write("".concat(i.LexyCodeConstants.contextVariable,")"))}static isInline(e,t){if(!t)return!1;if(1!=t.length)return!0;const n=(0,o.asGeneratedType)(t[0]);return null==n||n.source!=a.GeneratedTypeSource.FunctionParameters&&n.node.nodeName!=e}static renderMappedParametersObject(e,t){t.write("function() {"),t.write("var "+i.LexyCodeConstants.resultsVariable+" = new "),t.writeEnvironment(".".concat((0,c.translateType)(e.mappingType))),t.write("();");for(const n of e.values)t.write("".concat(i.LexyCodeConstants.resultsVariable,".").concat(n.variableName," = ")),(0,d.renderVariableMappingVariableSyntax)(n,t),t.write(";");t.write("return ".concat(i.LexyCodeConstants.resultsVariable,"; }(), "))}}t.LexyFunctionCallRenderer=p},69536(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VariableUsage=void 0;const r=n(30097),i=n(53622);class s extends i.VariableReference{constructor(e,t,n,r,i){super(e,t,n,r),this.access=i}static read(e){return new s(e.path,e.componentType,e.variableType,e.source,r.VariableAccess.Read)}static write(e){return new s(e.path,e.componentType,e.variableType,e.source,r.VariableAccess.Write)}}t.VariableUsage=s},69889(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VariableContext=void 0;const r=n(73986),i=n(91330),s=n(41486),o=n(53622);t.VariableContext=class{constructor(e,t,n){this.variables={},this.logger=t,this.componentNodes=e,this.parentContext=n}addVariable(e,t,n){this.containsName(e)||(this.variables[e]=new i.VariableEntry(t,n))}registerVariableAndVerifyUnique(e,t,n,r){this.containsName(t)?this.logger.fail(e,"Duplicated variable name: '".concat(t,"'")):this.variables[t]=new i.VariableEntry(n,r)}containsName(e){return e in this.variables||null!=this.parentContext&&this.parentContext.containsName(e)}containsPath(e,t){let n=this.getVariable(e.rootIdentifier);return null!=n&&(!e.hasChildIdentifiers||this.containsChild(n.variableType,e.childrenReference(),t))}createVariableReference(e,t,n){function r(e,r){const i=e(t,n);if(null!=i)return i;const s=r(t,n);return null!=s?s:null}const i=t.parts>1,s=this.createVariableReferenceFromTypeSystem.bind(this),o=this.createVariableReferenceFromRegisteredVariables.bind(this);return i?r(s,o):r(o,s)}createVariableReferenceFromRegisteredVariables(e,t){const n=this.getVariable(e.rootIdentifier);if(null==n)return null;const r=this.getVariableTypeByPath(e,t);return null==r?null:new o.VariableReference(e,null,r,n.variableSource)}createVariableReferenceFromTypeSystem(e,t){if(e.parts>2)return null;const n=this.componentNodes.getType(e.rootIdentifier);if(null==n)return null;if(1==e.parts)return new o.VariableReference(e,n,n,s.VariableSource.Type);const r=e.lastPart();let i=n.memberType(r,t.componentNodes);return null==i?null:new o.VariableReference(e,n,i,s.VariableSource.Type)}getVariableTypeByName(e){return e in this.variables?this.variables[e].variableType:null!=this.parentContext?this.parentContext.getVariableTypeByName(e):null}getVariableTypeByPath(e,t){let n=this.getVariableTypeByName(e.rootIdentifier);return null!=n&&e.hasChildIdentifiers?this.getVariableType(n,e.childrenReference(),t):n}getVariable(e){return e in this.variables?this.variables[e]:null!=this.parentContext?this.parentContext.getVariable(e):null}containsChild(e,t,n){let r=1==e.objectType?e:null,i=null!=r?r.memberType(t.rootIdentifier,n.componentNodes):null;return null!=i&&(!t.hasChildIdentifiers||this.containsChild(i,t.childrenReference(),n))}getVariableType(e,t,n){let i=(0,r.asObjectType)(e);if(null==i)return null;let s=i.memberType(t.rootIdentifier,n.componentNodes);return null==s?null:t.hasChildIdentifiers?this.getVariableType(s,t.childrenReference(),n):s}}},70330(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Assert=void 0;class n{static notNull(e,t){if(!e)throw new Error("Value '".concat(t,"' is null."));return e}static is(e,t,r){n.notNull(t,r);if(!e(t))throw new Error("Value '".concat(r,"' is not of correct type."));return t}}t.Assert=n},70372(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TableLookUpFunctionCallRenderer=void 0;const r=n(45375),i=n(2013),s=n(37381),o=n(70330),a=n(43105);t.TableLookUpFunctionCallRenderer=class{static matches(e){return(0,s.instanceOfMemberFunctionCallExpression)(e)&&(0,a.instanceOfLookUpFunctionCall)(e.functionCall)}static render(e,t){const n=o.Assert.notNull((0,a.asLookUpFunctionCall)(e.functionCall),"expression.functionCall as LookUpFunction");t.writeEnvironment(),n.discriminatorColumn&&n.discriminatorExpression?(t.write(".tableLibrary.lookUpBy("),t.write('"'.concat(n.discriminatorColumn,'", ')),t.renderExpression(n.discriminatorExpression),t.write(", ")):t.write(".tableLibrary.lookUp("),t.write('"'.concat(n.searchValueColumn,'", ')),t.renderExpression(n.valueExpression),t.write(', "'.concat(n.tableName,'", ')),t.writeEnvironment(".".concat((0,r.tableClassName)(n.tableName),".__values, ")),t.write('"'.concat(n.resultColumn,'", ')),t.write("".concat(i.LexyCodeConstants.contextVariable,")"))}}},71143(e,t){"use strict";function n(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}Object.defineProperty(t,"__esModule",{value:!0}),t.escapeRegExp=n,t.replaceAll=function(e,t,r){return e.replace(new RegExp(n(t),"g"),r)}},71148(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TokenType=void 0,function(e){e.BooleanLiteralToken="BooleanLiteralToken",e.BuildLiteralToken="BuildLiteralToken",e.BuildCommentOrDivisionToken="BuildCommentOrDivisionToken",e.CommentToken="CommentToken",e.DateTimeLiteralToken="DateTimeLiteralToken",e.KeywordToken="KeywordToken",e.MemberAccessLiteralToken="MemberAccessLiteralToken",e.NumberLiteralToken="NumberLiteralToken",e.OperatorToken="OperatorToken",e.QuotedLiteralToken="QuotedLiteralToken",e.StringLiteralToken="StringLiteralToken",e.TableSeparatorToken="TableSeparatorToken",e.WhitespaceToken="WhitespaceToken"}(n||(t.TokenType=n={}))},71196(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationContext=void 0;const r=n(69889),i=n(87770),s=n(70330);t.ValidationContext=class{get variableContext(){if(null==this.variableContextValue)throw new Error("FunctionCodeContext not set.");return this.variableContextValue}get visitor(){return this.visitorValue}constructor(e,t,n,r){this.contexts=new i.Stack,this.variableContextValue=null,this.logger=s.Assert.notNull(e,"logger"),this.componentNodes=s.Assert.notNull(t,"componentNodes"),this.visitorValue=s.Assert.notNull(n,""),this.libraries=r}createVariableScope(){return this.storeCurrentVariableContext(),this.variableContextValue=new r.VariableContext(this.componentNodes,this.logger,this.variableContextValue),{[Symbol.dispose]:()=>this.revertToPreviousVariableContext()}}storeCurrentVariableContext(){null!=this.variableContextValue&&this.contexts.push(this.variableContextValue)}revertToPreviousVariableContext(){const e=this.contexts.pop();this.variableContextValue=e||null}validateType(e,t,n,r,i,s){let o=e.deriveType(this);return null!=o&&o.equals(r)||this.logger.fail(i,"Invalid argument ".concat(t,". '").concat(n,"' should be of type '").concat(r,"' but is '").concat(o,"'. ").concat(s)),this}}},71954(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionResult=void 0;t.FunctionResult=class{get value(){return this.valueObject}get logging(){return this.loggingValue}constructor(e,t){this.valueObject=e,this.loggingValue=t}number(e){return this.valueObject[e]}string(e){return this.valueObject[e]}object(e){return this.valueObject[e]}getValue(e,t){let n=e,r=this.valueObject[e.rootIdentifier];for(;n.hasChildIdentifiers;){if(n=n.childrenReference(),null==r)return t.push("Can't get variable: '".concat(e,"'. Values: '").concat(JSON.stringify(this.valueObject,null,4),"'")),null;r=r[n.rootIdentifier]}return r}}},72100(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodesWalker=void 0;class n{static walkNodes(e,t){for(const r of e)n.walk(r,t)}static walk(e,t){t(e);let r=e.getChildren();n.walkNodes(r,t)}}t.NodesWalker=n},72540(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParserContext=void 0;const r=n(35087),i=n(15312),s=n(45014),o=n(70330);t.ParserContext=class{get nodes(){return this.rootNode.componentNodes}get lineFilter(){return this.lineFilterValue}constructor(e,t,n,s,a){this.includedFiles=[],this.defaultLexyLineFilter={useLine:()=>!0},this.options=null!==a&&void 0!==a?a:{},this.logger=new r.ParserLogger(e),this.libraries=o.Assert.notNull(s,"libraries"),this.fileSystem=t,this.rootNode=new i.LexyScriptNode(n),this.lineFilterValue=this.defaultLexyLineFilter}addFileIncluded(e){let t=this.normalizePath(e);this.includedFiles.push(t)}isFileIncluded(e){return(0,s.contains)(this.includedFiles,this.normalizePath(e))}normalizePath(e){return this.fileSystem.getFullPath(e)}setFileLineFilter(e){this.lineFilterValue=e.endsWith("md")?this.newMarkdownLineFilter():this.defaultLexyLineFilter}newMarkdownLineFilter(){let e=!1;return{useLine:t=>"```"===t.trim()?(e=!e,!1):e}}}},72928(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateTimeLiteralToken=void 0,t.instanceOfDateTimeLiteral=c,t.asDateTimeLiteral=function(e){return c(e)?e:null};const r=n(6248),i=n(68784),s=n(40350),o=n(55469),a=n(95318),l=n(82140),u=n(71148);function c(e){return(null===e||void 0===e?void 0:e.tokenType)==u.TokenType.DateTimeLiteralToken}const d="T".charCodeAt(0);class p extends r.ParsableToken{constructor(e){super(e,""),this.index=0,this.dateTimeValue=null,this.tokenIsLiteral=!0,this.tokenType=u.TokenType.DateTimeLiteralToken,this.validators=[e=>this.validate(e,(0,a.isDigit)(e),p.DigitIndexes),e=>this.validateExactMultiple(e,[s.TokenValues.Dash,s.TokenValues.Slash],p.DashIndexes),e=>this.validateExact(e,s.TokenValues.Colon,p.ColonIndexes),e=>this.validateExactMultiple(e,[d,s.TokenValues.Space],p.SeparatorIndexes)]}get typedValue(){return this.dateTimeValue}deriveType(e){return l.PrimitiveType.date}parse(e){let t=e.value;if(t==s.TokenValues.Quote)return p.ValidLengths.findIndex(e=>e==this.value.length)<0?(0,i.newParseTokenInvalidResult)("Invalid date time format length '".concat(this.value.length,"'. \n          Expected: '").concat((0,o.formatLine)(p.ValidLengths,","),"'")):(this.dateTimeValue=p.parseValue(this.value),(0,i.newParseTokenFinishedResult)(!0));for(let n=0;n<this.validators.length;n++){let e=(0,this.validators[n])(t);if(null!=e)return this.appendValue(t),this.index++,e}return(0,i.newParseTokenInvalidResult)("Unexpected character: '".concat(String.fromCharCode(t),'\'. Format: d""2024-12-18T14:17:30""'))}static parseValue(e){if(19!=e.length)return null;const t="".concat(e.substring(0,4),"-").concat(e.substring(5,7),"-").concat(e.substring(8,10),"T").concat(e.substring(11,13),":").concat(e.substring(14,16),":").concat(e.substring(17,19)),n=new Date(t);if("Invalid Date"===String(n))throw new Error("Invalid date: '"+t+"'. Model validation should prevent this.");return n}validateExact(e,t,n){return this.validate(e,e==t,n)}validateExactMultiple(e,t,n){return this.validate(e,t.indexOf(e)>=0,n)}validate(e,t,n){return t?n.findIndex(e=>e==this.index)<0?(0,i.newParseTokenInvalidResult)("Unexpected character: '".concat(String.fromCharCode(e),'\'. Format: d"2024-12-18T14:17:30"')):(0,i.newParseTokenInProgressResult)():null}endOfLine(){return(0,i.newParseTokenInvalidResult)('Unexpected end of line. Closing quote expected. Format: d"2024-12-18T14:17:30"')}toString(){return null!=this.dateTimeValue?this.dateTimeValue.toISOString():""}}t.DateTimeLiteralToken=p,p.DigitIndexes=[0,1,2,3,5,6,8,9,11,12,14,15,17,18],p.DashIndexes=[4,7],p.SeparatorIndexes=[10],p.ColonIndexes=[13,16],p.ValidLengths=[19]},73986(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectType=void 0,t.instanceOfObjectType=i,t.asObjectType=s;const r=n(77945);function i(e){return 1==(null===e||void 0===e?void 0:e.objectType)}function s(e){return i(e)?e:null}class o extends r.VariableType{constructor(){super(...arguments),this.objectType=!0}getVariables(){return[]}getFunctions(){return[]}isAssignableFrom(e){const t=s(e);return null!=t&&this.variablesAssignableFrom(t)}variablesAssignableFrom(e){const t=e.getVariables();for(const n of t){const e=this.getVariable(n.name);if(null==e||null==n.type||null==e.type||!n.type.isAssignableFrom(e.type))return!1}return!0}}t.ObjectType=o},74182(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpreadExpression=void 0,t.instanceOfSpreadExpression=a,t.asSpreadExpression=function(e){return a(e)?e:null};const r=n(9313),i=n(42539),s=n(15229),o=n(15459);function a(e){return(null===e||void 0===e?void 0:e.nodeType)==o.NodeType.SpreadExpression}class l extends r.Expression{constructor(e,t){super(e,t),this.nodeType=o.NodeType.SpreadExpression}static parse(e,t){let n=e.tokens;if(!l.isValid(n))return(0,i.newParseExpressionFailed)("SpreadExpression","Invalid expression.");let r=e.createReference(),s=new l(e,r);return(0,i.newParseExpressionSuccess)(s)}static isValid(e){return 1==e.length&&e.isOperatorToken(0,s.OperatorType.Spread)}getChildren(){return[]}validate(e){}deriveType(e){return e.logger.fail(this.reference,"Invalid spread operator. The spread operator '...' can only be used in an Lexy function call with as a single argument."),null}}t.SpreadExpression=l},74792(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TableHeader=void 0;const r=n(59611),i=n(87354),s=n(45014),o=n(15459),a=n(71148);class l extends r.Node{get columns(){return this.columnsValue}constructor(e,t){super(t),this.nodeType=o.NodeType.TableHeader,this.columnsValue=e}static parse(e){return e.validateTokens("TableHeader").type(0,a.TokenType.TableSeparatorToken).isValid?l.parseWithColumnType(e):null}static parseWithColumnType(e){let t=0,n=new Array,r=e.line.tokens;for(;++t<r.length;){if(!e.validateTokens("TableHeader").type(t,a.TokenType.StringLiteralToken).type(t+1,a.TokenType.StringLiteralToken).type(t+2,a.TokenType.TableSeparatorToken).isValid)return null;let s=r.tokenValue(t),o=r.tokenValue(++t),l=e.line.tokenReference(t);if(null==s||null==o)return null;let u=i.ColumnHeader.parse(o,s,l);n.push(u),++t}return new l(n,e.line.lineStartReference())}getChildren(){return[...this.columnsValue]}validate(e){}get(e){if(e.parts<2)return null;let t=e.path[1];return this.getColumn(t)}getColumnByIndex(e){return e>=0&&e<this.columns.length?this.columns[e]:null}getColumn(e){return(0,s.firstOrDefault)(this.columnsValue,t=>t.name==e)}}t.TableHeader=l},74863(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExecutionLogEntry=void 0;const r=n(38983);t.ExecutionLogEntry=class{get writeVariables(){return this.writeVariablesValue}get entries(){return this.entriesValue}constructor(e,t,n,i,s){this.entriesValue=[],this.writeVariablesValue=null,this.fileName=t,this.lineNumber=n,this.message=i,this.logVariables=e,this.readVariables=(0,r.deepCopy)(s)}addEntry(e){this.entriesValue.push(e)}addVariables(e){this.writeVariablesValue=(0,r.deepCopy)(e),this.logVariables(e)}}},75019(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenAssignments=function(e){const t=[];for(const n of e)n.flatten(t);return t}},75277(e,t){"use strict";function n(e){return 1==(null===e||void 0===e?void 0:e.hasVariableReference)}Object.defineProperty(t,"__esModule",{value:!0}),t.instanceOfHasVariableReference=n,t.asHasVariableReference=function(e){return n(e)?e:null}},76107(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TableFunction=void 0;const r=n(70330),i=n(32045);t.TableFunction=class{constructor(e){this.table=r.Assert.notNull(e,"table")}validateTable(e,t){return!(null==this.table.header||this.table.header.columns.length<2)||(e.logger.fail(t,"At least 2 columns expected for table '".concat(this.table.name,"'. ").concat(this.functionHelp)),!1)}validateColumnValueType(e,t,n,i,s,o){let a=t[n].deriveType(e);this.validateColumnValueTypeValue(e,n,i,s.name,a,r.Assert.notNull(s.type.variableType,"columnHeader.type.variableType"),o)}validateColumnValueTypeValue(e,t,n,r,i,s,o){null==i?e.logger.fail(o,"Invalid argument ".concat(t+1,". Should be ").concat(n," column. ").concat(this.functionHelp)):i.equals(s)||e.logger.fail(o,"Invalid column type '".concat(r,"': '").concat(s,"' doesn't match condition type '").concat(i,"'. ").concat(this.functionHelp))}validateDiscriminator(e,t,n,r){if(null==r.discriminator)return null;const i=null!=r.defaultDiscriminatorColumn?this.getColumn(e,t,r.discriminatorColumnArgument,r.defaultDiscriminatorColumn,n):null;return null==i?null:(this.validateColumnValueType(e,t,r.discriminator,"Discriminator",i,n),i)}getColumn(e,t,n,r,s){if(null==n){if(null==r)throw new Error("Default column should not be null");return this.table.header?this.table.header.getColumnByIndex(r):null}let o=(0,i.asMemberAccessExpression)(t[n]);return null==o?(e.logger.fail(s,"Invalid column at argument '".concat(n+1,"'. ").concat(this.functionHelp)),null):this.getColumnHeader(e,n,o,s)}getColumnHeader(e,t,n,r){var i;if(!this.validateColumn(e,n.identifierPath,t,r))return null;var s=null===(i=this.table.header)||void 0===i?void 0:i.get(n.identifierPath);return s||(e.logger.fail(r,"Invalid argument ".concat(t,". Column name '").concat(n,"' not found in table '").concat(this.table.name,"'. ").concat(this.functionHelp)),null)}validateColumn(e,t,n,r){return t.rootIdentifier==this.table.name.value&&2==t.parts||(e.logger.fail(r,"Invalid argument {index}. Result column table '".concat(t.rootIdentifier,"' should be table name '").concat(this.table.name,"'. ").concat(this.functionHelp)),!1)}}},76178(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VariableDefinition=void 0,t.instanceOfVariableDefinition=d,t.asVariableDefinition=function(e){return d(e)?e:null};const r=n(59611),i=n(15229),s=n(60516),o=n(61461),a=n(15459),l=n(71148),u=n(23107),c=n(5932);function d(e){return(null===e||void 0===e?void 0:e.nodeType)==a.NodeType.VariableDefinition}class p extends r.Node{get variableType(){return this.variableTypeValue}constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;super(r),this.hasNodeDependencies=!0,this.nodeType=a.NodeType.VariableDefinition,this.variableTypeValue=null,this.type=t,this.name=e,this.defaultExpression=i,this.source=n}getDependencies(e){const t=(0,u.asHasNodeDependencies)(this.type);return t?t.getDependencies(e):[]}static parse(e,t){var n;const r=t.line,o=r.tokens;if(!t.validateTokens("VariableDefinition").countMinimum(2).stringLiteral(1).isValid)return null;if(!o.isTokenType(0,l.TokenType.StringLiteralToken)&&!o.isTokenType(0,l.TokenType.MemberAccessLiteralToken))return t.logger.fail(r.tokenReference(0),"Unexpected token."),null;const a=o.tokenValue(1),u=o.tokenValue(0);if(null==a||null==u)return null;const d=c.VariableTypeDeclarationParser.parse(u,r.tokenReference(0));if(null==d)return null;if(2==o.length)return new p(a,d,e,r.lineStartReference());if((null===(n=o.token(2,s.asOperatorToken))||void 0===n?void 0:n.type)!=i.OperatorType.Assignment)return t.logger.fail(r.tokenReference(2),"Invalid variable declaration token. Expected '='."),null;if(4!=o.length)return t.logger.fail(r.lineEndReference(),"Invalid variable declaration. Expected literal token."),null;const h=t.expressionFactory.parse(o.tokensFrom(3),r);return"failed"==h.state?(t.logger.fail(r.tokenReference(3),h.errorMessage),null):new p(a,d,e,r.lineStartReference(),h.result)}getChildren(){return null!=this.defaultExpression?[this.defaultExpression,this.type]:[this.type]}validate(e){this.variableTypeValue=this.type.variableType,e.variableContext.registerVariableAndVerifyUnique(this.reference,this.name,this.variableTypeValue,this.source),(0,o.validateTypeAndDefault)(e,this.reference,this.type,this.defaultExpression)}}t.VariableDefinition=p},76389(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LookUpFunction=void 0;const r=n(76107),i=n(32045),s=n(78430),o=n(43105);class a{constructor(e,t,n,r,i,s,o){this.discriminator=e,this.lookUpValue=t,this.discriminatorColumnArgument=n,this.defaultDiscriminatorColumn=r,this.searchColumnArgument=i,this.defaultSearchColumn=s,this.resultColumnArgument=o}}class l extends r.TableFunction{get functionHelp(){return l.functionHelpValue}constructor(e){super(e)}getResultsType(e){var t;const n=l.getArgumentColumns(null,e,null);if(!n)return null;const r=e[n.resultColumnArgument],s=(0,i.asMemberAccessExpression)(r);if(null==s)return null;const o=null===(t=this.table.header)||void 0===t?void 0:t.get(s.identifierPath);return o?o.type.variableType:null}validateArguments(e,t,n){if(!this.validateTable(e,n))return(0,s.newValidateMemberFunctionArgumentsFailed)();const r=l.getArgumentColumns(e,t,n);if(!r)return(0,s.newValidateMemberFunctionArgumentsFailed)();const i=this.getColumn(e,t,r.searchColumnArgument,r.defaultSearchColumn,n),a=this.getColumn(e,t,r.resultColumnArgument,null,n);if(null==i||null==a)return(0,s.newValidateMemberFunctionArgumentsFailed)();this.validateColumnValueType(e,t,r.lookUpValue,"Search",i,n);const u=this.validateDiscriminator(e,t,n,r),c=null!=r.discriminator?t[r.discriminator]:null,d=new o.LookUpFunctionCall(this.table.name.value,t[r.lookUpValue],c,a.name,i.name,u?u.name:null);return(0,s.newValidateMemberFunctionArgumentsSuccess)(d)}static getArgumentColumns(e,t,n){switch(t.length){case 2:return new a(null,0,null,null,null,0,1);case 3:return(0,i.instanceOfMemberAccessExpression)(t[1])?new a(null,0,null,null,1,0,2):new a(0,1,null,0,null,1,2);case 5:return new a(0,1,2,0,3,1,4);default:return e&&n&&e.logger.fail(n,"Invalid number of arguments. ".concat(l.functionHelpValue)),null}}}t.LookUpFunction=l,l.functionHelpValue="Arguments: TableName.LookUp(lookUpValue, Table.ResultColumn) or TableName.LookUp(lookUpValue, Table.SearchColumn, Table.ResultColumn)or TableName.LookUp(discriminator, lookUpValue, Table.ResultColumn)or TableName.LookUp(discriminator, lookUpValue, Table.DiscriminatorColumn, Table.SearchColumn, Table.ResultColumn)",l.functionName="LookUp"},77148(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Keywords=void 0;class n{static contains(e){return n.values.findIndex(t=>t==e)>=0}}t.Keywords=n,n.Function="function",n.EnumKeyword="enum",n.TableKeyword="table",n.TypeKeyword="type",n.ScenarioKeyword="scenario",n.If="if",n.Else="else",n.Elseif="elseif",n.Switch="switch",n.Case="case",n.Default="default",n.Include="include",n.Parameters="parameters",n.Results="results",n.ValidationTable="validationTable",n.ExpectErrors="expectErrors",n.ExpectComponentErrors="expectComponentErrors",n.ExpectExecutionErrors="expectExecutionErrors",n.ExecutionLogging="executionLogging",n.ExecutionLog="log",n.ImplicitVariableTypeDeclaration="var",n.values=[n.Function,n.EnumKeyword,n.TableKeyword,n.TypeKeyword,n.ScenarioKeyword,n.ValidationTable,n.If,n.Else,n.Elseif,n.Switch,n.Case,n.Default,n.Include,n.Parameters,n.Results,n.ExecutionLogging,n.ExecutionLog,n.ExpectErrors,n.ExpectComponentErrors,n.ExpectExecutionErrors,n.ImplicitVariableTypeDeclaration]},77217(e,t,n){"use strict";n.d(t,{A:()=>je});var r,i,s=9e15,o=1e9,a="0123456789abcdef",l="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",u="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",c={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-s,maxE:s,crypto:!1},d=!0,p="[DecimalError] ",h=p+"Invalid argument: ",f=p+"Precision limit exceeded",m=p+"crypto unavailable",y="[object Decimal]",v=Math.floor,g=Math.pow,T=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,b=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,w=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,x=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,E=1e7,V=l.length-1,N=u.length-1,k={toStringTag:y};function C(e){var t,n,r,i=e.length-1,s="",o=e[0];if(i>0){for(s+=o,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(s+=R(n)),s+=r;(n=7-(r=(o=e[t])+"").length)&&(s+=R(n))}else if(0===o)return"0";for(;o%10===0;)o/=10;return s+o}function P(e,t,n){if(e!==~~e||e<t||e>n)throw Error(h+e)}function O(e,t,n,r){var i,s,o,a;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=7,i=0):(i=Math.ceil((t+1)/7),t%=7),s=g(10,7-t),a=e[i]%s|0,null==r?t<3?(0==t?a=a/100|0:1==t&&(a=a/10|0),o=n<4&&99999==a||n>3&&49999==a||5e4==a||0==a):o=(n<4&&a+1==s||n>3&&a+1==s/2)&&(e[i+1]/s/100|0)==g(10,t-2)-1||(a==s/2||0==a)&&0==(e[i+1]/s/100|0):t<4?(0==t?a=a/1e3|0:1==t?a=a/100|0:2==t&&(a=a/10|0),o=(r||n<4)&&9999==a||!r&&n>3&&4999==a):o=((r||n<4)&&a+1==s||!r&&n>3&&a+1==s/2)&&(e[i+1]/s/1e3|0)==g(10,t-3)-1,o}function L(e,t,n){for(var r,i,s=[0],o=0,l=e.length;o<l;){for(i=s.length;i--;)s[i]*=t;for(s[0]+=a.indexOf(e.charAt(o++)),r=0;r<s.length;r++)s[r]>n-1&&(void 0===s[r+1]&&(s[r+1]=0),s[r+1]+=s[r]/n|0,s[r]%=n)}return s.reverse()}k.absoluteValue=k.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),F(e)},k.ceil=function(){return F(new this.constructor(this),this.e+1,2)},k.clampedTo=k.clamp=function(e,t){var n=this,r=n.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(h+t);return n.cmp(e)<0?e:n.cmp(t)>0?t:new r(n)},k.comparedTo=k.cmp=function(e){var t,n,r,i,s=this,o=s.d,a=(e=new s.constructor(e)).d,l=s.s,u=e.s;if(!o||!a)return l&&u?l!==u?l:o===a?0:!o^l<0?1:-1:NaN;if(!o[0]||!a[0])return o[0]?l:a[0]?-u:0;if(l!==u)return l;if(s.e!==e.e)return s.e>e.e^l<0?1:-1;for(t=0,n=(r=o.length)<(i=a.length)?r:i;t<n;++t)if(o[t]!==a[t])return o[t]>a[t]^l<0?1:-1;return r===i?0:r>i^l<0?1:-1},k.cosine=k.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r,i;if(t.isZero())return t;r=t.d.length,r<32?i=(1/Z(4,n=Math.ceil(r/3))).toString():(n=16,i="2.3283064365386962890625e-10");e.precision+=n,t=W(e,1,t.times(i),new e(1));for(var s=n;s--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=n,t}(r,$(r,n)),r.precision=e,r.rounding=t,F(2==i||3==i?n.neg():n,e,t,!0)):new r(1):new r(NaN)},k.cubeRoot=k.cbrt=function(){var e,t,n,r,i,s,o,a,l,u,c=this,p=c.constructor;if(!c.isFinite()||c.isZero())return new p(c);for(d=!1,(s=c.s*g(c.s*c,1/3))&&Math.abs(s)!=1/0?r=new p(s.toString()):(n=C(c.d),(s=((e=c.e)-n.length+1)%3)&&(n+=1==s||-2==s?"0":"00"),s=g(n,1/3),e=v((e+1)/3)-(e%3==(e<0?-1:2)),(r=new p(n=s==1/0?"5e"+e:(n=s.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=c.s),o=(e=p.precision)+3;;)if(u=(l=(a=r).times(a).times(a)).plus(c),r=S(u.plus(c).times(a),u.plus(l),o+2,1),C(a.d).slice(0,o)===(n=C(r.d)).slice(0,o)){if("9999"!=(n=n.slice(o-3,o+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(F(r,e+1,1),t=!r.times(r).times(r).eq(c));break}if(!i&&(F(a,e+1,0),a.times(a).times(a).eq(c))){r=a;break}o+=4,i=1}return d=!0,F(r,e,p.rounding,t)},k.decimalPlaces=k.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=7*((e=t.length-1)-v(this.e/7)),e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},k.dividedBy=k.div=function(e){return S(this,new this.constructor(e))},k.dividedToIntegerBy=k.divToInt=function(e){var t=this.constructor;return F(S(this,new t(e),0,1,1),t.precision,t.rounding)},k.equals=k.eq=function(e){return 0===this.cmp(e)},k.floor=function(){return F(new this.constructor(this),this.e+1,3)},k.greaterThan=k.gt=function(e){return this.cmp(e)>0},k.greaterThanOrEqualTo=k.gte=function(e){var t=this.cmp(e);return 1==t||0===t},k.hyperbolicCosine=k.cosh=function(){var e,t,n,r,i,s=this,o=s.constructor,a=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return a;n=o.precision,r=o.rounding,o.precision=n+Math.max(s.e,s.sd())+4,o.rounding=1,(i=s.d.length)<32?t=(1/Z(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),s=W(o,1,s.times(t),new o(1),!0);for(var l,u=e,c=new o(8);u--;)l=s.times(s),s=a.minus(l.times(c.minus(l.times(c))));return F(s,o.precision=n,o.rounding=r,!0)},k.hyperbolicSine=k.sinh=function(){var e,t,n,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(t=s.precision,n=s.rounding,s.precision=t+Math.max(i.e,i.sd())+4,s.rounding=1,(r=i.d.length)<3)i=W(s,2,i,i,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,i=W(s,2,i=i.times(1/Z(5,e)),i,!0);for(var o,a=new s(5),l=new s(16),u=new s(20);e--;)o=i.times(i),i=i.times(a.plus(o.times(l.times(o).plus(u))))}return s.precision=t,s.rounding=n,F(i,t,n,!0)},k.hyperbolicTangent=k.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,S(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},k.inverseCosine=k.acos=function(){var e=this,t=e.constructor,n=e.abs().cmp(1),r=t.precision,i=t.rounding;return-1!==n?0===n?e.isNeg()?D(t,r,i):new t(0):new t(NaN):e.isZero()?D(t,r+4,i).times(.5):(t.precision=r+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=r,t.rounding=i,e.times(2))},k.inverseHyperbolicCosine=k.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,d=!1,n=n.times(n).minus(1).sqrt().plus(n),d=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},k.inverseHyperbolicSine=k.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,d=!1,n=n.times(n).plus(1).sqrt().plus(n),d=!0,r.precision=e,r.rounding=t,n.ln())},k.inverseHyperbolicTangent=k.atanh=function(){var e,t,n,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=s.precision,t=s.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?F(new s(i),e,t,!0):(s.precision=n=r-i.e,i=S(i.plus(1),new s(1).minus(i),n+e,1),s.precision=e+4,s.rounding=1,i=i.ln(),s.precision=e,s.rounding=t,i.times(.5))):new s(NaN)},k.inverseSine=k.asin=function(){var e,t,n,r,i=this,s=i.constructor;return i.isZero()?new s(i):(t=i.abs().cmp(1),n=s.precision,r=s.rounding,-1!==t?0===t?((e=D(s,n+4,r).times(.5)).s=i.s,e):new s(NaN):(s.precision=n+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=r,i.times(2)))},k.inverseTangent=k.atan=function(){var e,t,n,r,i,s,o,a,l,u=this,c=u.constructor,p=c.precision,h=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&p+4<=N)return(o=D(c,p+4,h).times(.25)).s=u.s,o}else{if(!u.s)return new c(NaN);if(p+4<=N)return(o=D(c,p+4,h).times(.5)).s=u.s,o}for(c.precision=a=p+10,c.rounding=1,e=n=Math.min(28,a/7+2|0);e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(d=!1,t=Math.ceil(a/7),r=1,l=u.times(u),o=new c(u),i=u;-1!==e;)if(i=i.times(l),s=o.minus(i.div(r+=2)),i=i.times(l),void 0!==(o=s.plus(i.div(r+=2))).d[t])for(e=t;o.d[e]===s.d[e]&&e--;);return n&&(o=o.times(2<<n-1)),d=!0,F(o,c.precision=p,c.rounding=h,!0)},k.isFinite=function(){return!!this.d},k.isInteger=k.isInt=function(){return!!this.d&&v(this.e/7)>this.d.length-2},k.isNaN=function(){return!this.s},k.isNegative=k.isNeg=function(){return this.s<0},k.isPositive=k.isPos=function(){return this.s>0},k.isZero=function(){return!!this.d&&0===this.d[0]},k.lessThan=k.lt=function(e){return this.cmp(e)<0},k.lessThanOrEqualTo=k.lte=function(e){return this.cmp(e)<1},k.logarithm=k.log=function(e){var t,n,r,i,s,o,a,l,u=this,c=u.constructor,p=c.precision,h=c.rounding;if(null==e)e=new c(10),t=!0;else{if(n=(e=new c(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(n=u.d,u.s<0||!n||!n[0]||u.eq(1))return new c(n&&!n[0]?-1/0:1!=u.s?NaN:n?0:1/0);if(t)if(n.length>1)s=!0;else{for(i=n[0];i%10===0;)i/=10;s=1!==i}if(d=!1,o=H(u,a=p+5),r=t?A(c,a+10):H(e,a),O((l=S(o,r,a,1)).d,i=p,h))do{if(o=H(u,a+=10),r=t?A(c,a+10):H(e,a),l=S(o,r,a,1),!s){+C(l.d).slice(i+1,i+15)+1==1e14&&(l=F(l,p+1,0));break}}while(O(l.d,i+=10,h));return d=!0,F(l,p,h)},k.minus=k.sub=function(e){var t,n,r,i,s,o,a,l,u,c,p,h,f=this,m=f.constructor;if(e=new m(e),!f.d||!e.d)return f.s&&e.s?f.d?e.s=-e.s:e=new m(e.d||f.s!==e.s?f:NaN):e=new m(NaN),e;if(f.s!=e.s)return e.s=-e.s,f.plus(e);if(u=f.d,h=e.d,a=m.precision,l=m.rounding,!u[0]||!h[0]){if(h[0])e.s=-e.s;else{if(!u[0])return new m(3===l?-0:0);e=new m(f)}return d?F(e,a,l):e}if(n=v(e.e/7),c=v(f.e/7),u=u.slice(),s=c-n){for((p=s<0)?(t=u,s=-s,o=h.length):(t=h,n=c,o=u.length),s>(r=Math.max(Math.ceil(a/7),o)+2)&&(s=r,t.length=1),t.reverse(),r=s;r--;)t.push(0);t.reverse()}else{for((p=(r=u.length)<(o=h.length))&&(o=r),r=0;r<o;r++)if(u[r]!=h[r]){p=u[r]<h[r];break}s=0}for(p&&(t=u,u=h,h=t,e.s=-e.s),o=u.length,r=h.length-o;r>0;--r)u[o++]=0;for(r=h.length;r>s;){if(u[--r]<h[r]){for(i=r;i&&0===u[--i];)u[i]=E-1;--u[i],u[r]+=E}u[r]-=h[r]}for(;0===u[--o];)u.pop();for(;0===u[0];u.shift())--n;return u[0]?(e.d=u,e.e=_(u,n),d?F(e,a,l):e):new m(3===l?-0:0)},k.modulo=k.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?F(new r(n),r.precision,r.rounding):(d=!1,9==r.modulo?(t=S(n,e.abs(),0,3,1)).s*=e.s:t=S(n,e,0,r.modulo,1),t=t.times(e),d=!0,n.minus(t))},k.naturalExponential=k.exp=function(){return B(this)},k.naturalLogarithm=k.ln=function(){return H(this)},k.negated=k.neg=function(){var e=new this.constructor(this);return e.s=-e.s,F(e)},k.plus=k.add=function(e){var t,n,r,i,s,o,a,l,u,c,p=this,h=p.constructor;if(e=new h(e),!p.d||!e.d)return p.s&&e.s?p.d||(e=new h(e.d||p.s===e.s?p:NaN)):e=new h(NaN),e;if(p.s!=e.s)return e.s=-e.s,p.minus(e);if(u=p.d,c=e.d,a=h.precision,l=h.rounding,!u[0]||!c[0])return c[0]||(e=new h(p)),d?F(e,a,l):e;if(s=v(p.e/7),r=v(e.e/7),u=u.slice(),i=s-r){for(i<0?(n=u,i=-i,o=c.length):(n=c,r=s,o=u.length),i>(o=(s=Math.ceil(a/7))>o?s+1:o+1)&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((o=u.length)-(i=c.length)<0&&(i=o,n=c,c=u,u=n),t=0;i;)t=(u[--i]=u[i]+c[i]+t)/E|0,u[i]%=E;for(t&&(u.unshift(t),++r),o=u.length;0==u[--o];)u.pop();return e.d=u,e.e=_(u,r),d?F(e,a,l):e},k.precision=k.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(h+e);return n.d?(t=I(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},k.round=function(){var e=this,t=e.constructor;return F(new t(e),e.e+1,t.rounding)},k.sine=k.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:W(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=t.times(1/Z(5,n)),t=W(e,2,t,t);for(var i,s=new e(5),o=new e(16),a=new e(20);n--;)i=t.times(t),t=t.times(s.plus(i.times(o.times(i).minus(a))));return t}(r,$(r,n)),r.precision=e,r.rounding=t,F(i>2?n.neg():n,e,t,!0)):new r(NaN)},k.squareRoot=k.sqrt=function(){var e,t,n,r,i,s,o=this,a=o.d,l=o.e,u=o.s,c=o.constructor;if(1!==u||!a||!a[0])return new c(!u||u<0&&(!a||a[0])?NaN:a?o:1/0);for(d=!1,0==(u=Math.sqrt(+o))||u==1/0?(((t=C(a)).length+l)%2==0&&(t+="0"),u=Math.sqrt(t),l=v((l+1)/2)-(l<0||l%2),r=new c(t=u==1/0?"5e"+l:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+l)):r=new c(u.toString()),n=(l=c.precision)+3;;)if(r=(s=r).plus(S(o,s,n+2,1)).times(.5),C(s.d).slice(0,n)===(t=C(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(F(r,l+1,1),e=!r.times(r).eq(o));break}if(!i&&(F(s,l+1,0),s.times(s).eq(o))){r=s;break}n+=4,i=1}return d=!0,F(r,l,c.rounding,e)},k.tangent=k.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=S(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,F(2==i||4==i?n.neg():n,e,t,!0)):new r(NaN)},k.times=k.mul=function(e){var t,n,r,i,s,o,a,l,u,c=this,p=c.constructor,h=c.d,f=(e=new p(e)).d;if(e.s*=c.s,!h||!h[0]||!f||!f[0])return new p(!e.s||h&&!h[0]&&!f||f&&!f[0]&&!h?NaN:h&&f?0*e.s:e.s/0);for(n=v(c.e/7)+v(e.e/7),(l=h.length)<(u=f.length)&&(s=h,h=f,f=s,o=l,l=u,u=o),s=[],r=o=l+u;r--;)s.push(0);for(r=u;--r>=0;){for(t=0,i=l+r;i>r;)a=s[i]+f[r]*h[i-r-1]+t,s[i--]=a%E|0,t=a/E|0;s[i]=(s[i]+t)%E|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=_(s,n),d?F(e,p.precision,p.rounding):e},k.toBinary=function(e,t){return Q(this,2,e,t)},k.toDecimalPlaces=k.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(P(e,0,o),void 0===t?t=r.rounding:P(t,0,8),F(n,e+n.e+1,t))},k.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=M(r,!0):(P(e,0,o),void 0===t?t=i.rounding:P(t,0,8),n=M(r=F(new i(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},k.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return void 0===e?n=M(i):(P(e,0,o),void 0===t?t=s.rounding:P(t,0,8),n=M(r=F(new s(i),e+i.e+1,t),!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},k.toFraction=function(e){var t,n,r,i,s,o,a,l,u,c,p,f,m=this,y=m.d,v=m.constructor;if(!y)return new v(m);if(u=n=new v(1),r=l=new v(0),o=(s=(t=new v(r)).e=I(y)-m.e-1)%7,t.d[0]=g(10,o<0?7+o:o),null==e)e=s>0?t:u;else{if(!(a=new v(e)).isInt()||a.lt(u))throw Error(h+a);e=a.gt(t)?s>0?t:u:a}for(d=!1,a=new v(C(y)),c=v.precision,v.precision=s=7*y.length*2;p=S(a,t,0,1,1),1!=(i=n.plus(p.times(r))).cmp(e);)n=r,r=i,i=u,u=l.plus(p.times(i)),l=i,i=t,t=a.minus(p.times(i)),a=i;return i=S(e.minus(n),r,0,1,1),l=l.plus(i.times(u)),n=n.plus(i.times(r)),l.s=u.s=m.s,f=S(u,r,s,1).minus(m).abs().cmp(S(l,n,s,1).minus(m).abs())<1?[u,r]:[l,n],v.precision=c,d=!0,f},k.toHexadecimal=k.toHex=function(e,t){return Q(this,16,e,t)},k.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:P(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(d=!1,n=S(n,e,0,t,1).times(e),d=!0,F(n)):(e.s=n.s,n=e),n},k.toNumber=function(){return+this},k.toOctal=function(e,t){return Q(this,8,e,t)},k.toPower=k.pow=function(e){var t,n,r,i,s,o,a=this,l=a.constructor,u=+(e=new l(e));if(!a.d||!e.d||!a.d[0]||!e.d[0])return new l(g(+a,u));if((a=new l(a)).eq(1))return a;if(r=l.precision,s=l.rounding,e.eq(1))return F(a,r,s);if((t=v(e.e/7))>=e.d.length-1&&(n=u<0?-u:u)<=9007199254740991)return i=j(l,a,n,r),e.s<0?new l(1).div(i):F(i,r,s);if((o=a.s)<0){if(t<e.d.length-1)return new l(NaN);if(0==(1&e.d[t])&&(o=1),0==a.e&&1==a.d[0]&&1==a.d.length)return a.s=o,a}return(t=0!=(n=g(+a,u))&&isFinite(n)?new l(n+"").e:v(u*(Math.log("0."+C(a.d))/Math.LN10+a.e+1)))>l.maxE+1||t<l.minE-1?new l(t>0?o/0:0):(d=!1,l.rounding=a.s=1,n=Math.min(12,(t+"").length),(i=B(e.times(H(a,r+n)),r)).d&&O((i=F(i,r+5,1)).d,r,s)&&(t=r+10,+C((i=F(B(e.times(H(a,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=F(i,r+1,0))),i.s=o,d=!0,l.rounding=s,F(i,r,s))},k.toPrecision=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=M(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(P(e,1,o),void 0===t?t=i.rounding:P(t,0,8),n=M(r=F(new i(r),e,t),e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},k.toSignificantDigits=k.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(P(e,1,o),void 0===t?t=n.rounding:P(t,0,8)),F(new n(this),e,t)},k.toString=function(){var e=this,t=e.constructor,n=M(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},k.truncated=k.trunc=function(){return F(new this.constructor(this),this.e+1,1)},k.valueOf=k.toJSON=function(){var e=this,t=e.constructor,n=M(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var S=function(){function e(e,t,n){var r,i=0,s=e.length;for(e=e.slice();s--;)r=e[s]*t+i,e[s]=r%n|0,i=r/n|0;return i&&e.unshift(i),e}function t(e,t,n,r){var i,s;if(n!=r)s=n>r?1:-1;else for(i=s=0;i<n;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(i,s,o,a,l,u){var c,d,p,h,f,m,y,g,T,b,w,x,V,N,k,C,P,O,L,S,M=i.constructor,_=i.s==s.s?1:-1,A=i.d,D=s.d;if(!A||!A[0]||!D||!D[0])return new M(i.s&&s.s&&(A?!D||A[0]!=D[0]:D)?A&&0==A[0]||!D?0*_:_/0:NaN);for(u?(f=1,d=i.e-s.e):(u=E,f=7,d=v(i.e/f)-v(s.e/f)),L=D.length,P=A.length,b=(T=new M(_)).d=[],p=0;D[p]==(A[p]||0);p++);if(D[p]>(A[p]||0)&&d--,null==o?(N=o=M.precision,a=M.rounding):N=l?o+(i.e-s.e)+1:o,N<0)b.push(1),m=!0;else{if(N=N/f+2|0,p=0,1==L){for(h=0,D=D[0],N++;(p<P||h)&&N--;p++)k=h*u+(A[p]||0),b[p]=k/D|0,h=k%D|0;m=h||p<P}else{for((h=u/(D[0]+1)|0)>1&&(D=e(D,h,u),A=e(A,h,u),L=D.length,P=A.length),C=L,x=(w=A.slice(0,L)).length;x<L;)w[x++]=0;(S=D.slice()).unshift(0),O=D[0],D[1]>=u/2&&++O;do{h=0,(c=t(D,w,L,x))<0?(V=w[0],L!=x&&(V=V*u+(w[1]||0)),(h=V/O|0)>1?(h>=u&&(h=u-1),1==(c=t(y=e(D,h,u),w,g=y.length,x=w.length))&&(h--,n(y,L<g?S:D,g,u))):(0==h&&(c=h=1),y=D.slice()),(g=y.length)<x&&y.unshift(0),n(w,y,x,u),-1==c&&(c=t(D,w,L,x=w.length))<1&&(h++,n(w,L<x?S:D,x,u)),x=w.length):0===c&&(h++,w=[0]),b[p++]=h,c&&w[0]?w[x++]=A[C]||0:(w=[A[C]],x=1)}while((C++<P||void 0!==w[0])&&N--);m=void 0!==w[0]}b[0]||b.shift()}if(1==f)T.e=d,r=m;else{for(p=1,h=b[0];h>=10;h/=10)p++;T.e=p+d*f-1,F(T,l?o+T.e+1:o,a,m)}return T}}();function F(e,t,n,r){var i,s,o,a,l,u,c,p,h,f=e.constructor;e:if(null!=t){if(!(p=e.d))return e;for(i=1,a=p[0];a>=10;a/=10)i++;if((s=t-i)<0)s+=7,o=t,l=(c=p[h=0])/g(10,i-o-1)%10|0;else if((h=Math.ceil((s+1)/7))>=(a=p.length)){if(!r)break e;for(;a++<=h;)p.push(0);c=l=0,i=1,o=(s%=7)-7+1}else{for(c=a=p[h],i=1;a>=10;a/=10)i++;l=(o=(s%=7)-7+i)<0?0:c/g(10,i-o-1)%10|0}if(r=r||t<0||void 0!==p[h+1]||(o<0?c:c%g(10,i-o-1)),u=n<4?(l||r)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||r||6==n&&(s>0?o>0?c/g(10,i-o):0:p[h-1])%10&1||n==(e.s<0?8:7)),t<1||!p[0])return p.length=0,u?(t-=e.e+1,p[0]=g(10,(7-t%7)%7),e.e=-t||0):p[0]=e.e=0,e;if(0==s?(p.length=h,a=1,h--):(p.length=h+1,a=g(10,7-s),p[h]=o>0?(c/g(10,i-o)%g(10,o)|0)*a:0),u)for(;;){if(0==h){for(s=1,o=p[0];o>=10;o/=10)s++;for(o=p[0]+=a,a=1;o>=10;o/=10)a++;s!=a&&(e.e++,p[0]==E&&(p[0]=1));break}if(p[h]+=a,p[h]!=E)break;p[h--]=0,a=1}for(s=p.length;0===p[--s];)p.pop()}return d&&(e.e>f.maxE?(e.d=null,e.e=NaN):e.e<f.minE&&(e.e=0,e.d=[0])),e}function M(e,t,n){if(!e.isFinite())return G(e);var r,i=e.e,s=C(e.d),o=s.length;return t?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+R(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):i<0?(s="0."+R(-i-1)+s,n&&(r=n-o)>0&&(s+=R(r))):i>=o?(s+=R(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+R(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=R(r))),s}function _(e,t){var n=e[0];for(t*=7;n>=10;n/=10)t++;return t}function A(e,t,n){if(t>V)throw d=!0,n&&(e.precision=n),Error(f);return F(new e(l),t,1,!0)}function D(e,t,n){if(t>N)throw Error(f);return F(new e(u),t,n,!0)}function I(e){var t=e.length-1,n=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function R(e){for(var t="";e--;)t+="0";return t}function j(e,t,n,r){var i,s=new e(1),o=Math.ceil(r/7+4);for(d=!1;;){if(n%2&&Y((s=s.times(t)).d,o)&&(i=!0),0===(n=v(n/2))){n=s.d.length-1,i&&0===s.d[n]&&++s.d[n];break}Y((t=t.times(t)).d,o)}return d=!0,s}function q(e){return 1&e.d[e.d.length-1]}function U(e,t,n){for(var r,i,s=new e(t[0]),o=0;++o<t.length;){if(!(i=new e(t[o])).s){s=i;break}((r=s.cmp(i))===n||0===r&&s.s===n)&&(s=i)}return s}function B(e,t){var n,r,i,s,o,a,l,u=0,c=0,p=0,h=e.constructor,f=h.rounding,m=h.precision;if(!e.d||!e.d[0]||e.e>17)return new h(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(d=!1,l=m):l=t,a=new h(.03125);e.e>-2;)e=e.times(a),p+=5;for(l+=r=Math.log(g(2,p))/Math.LN10*2+5|0,n=s=o=new h(1),h.precision=l;;){if(s=F(s.times(e),l,1),n=n.times(++c),C((a=o.plus(S(s,n,l,1))).d).slice(0,l)===C(o.d).slice(0,l)){for(i=p;i--;)o=F(o.times(o),l,1);if(null!=t)return h.precision=m,o;if(!(u<3&&O(o.d,l-r,f,u)))return F(o,h.precision=m,f,d=!0);h.precision=l+=10,n=s=a=new h(1),c=0,u++}o=a}}function H(e,t){var n,r,i,s,o,a,l,u,c,p,h,f=1,m=e,y=m.d,v=m.constructor,g=v.rounding,T=v.precision;if(m.s<0||!y||!y[0]||!m.e&&1==y[0]&&1==y.length)return new v(y&&!y[0]?-1/0:1!=m.s?NaN:y?0:m);if(null==t?(d=!1,c=T):c=t,v.precision=c+=10,r=(n=C(y)).charAt(0),!(Math.abs(s=m.e)<15e14))return u=A(v,c+2,T).times(s+""),m=H(new v(r+"."+n.slice(1)),c-10).plus(u),v.precision=T,null==t?F(m,T,g,d=!0):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=C((m=m.times(e)).d)).charAt(0),f++;for(s=m.e,r>1?(m=new v("0."+n),s++):m=new v(r+"."+n.slice(1)),p=m,l=o=m=S(m.minus(1),m.plus(1),c,1),h=F(m.times(m),c,1),i=3;;){if(o=F(o.times(h),c,1),C((u=l.plus(S(o,new v(i),c,1))).d).slice(0,c)===C(l.d).slice(0,c)){if(l=l.times(2),0!==s&&(l=l.plus(A(v,c+2,T).times(s+""))),l=S(l,new v(f),c,1),null!=t)return v.precision=T,l;if(!O(l.d,c-10,g,a))return F(l,v.precision=T,g,d=!0);v.precision=c+=10,u=o=m=S(p.minus(1),p.plus(1),c,1),h=F(m.times(m),c,1),i=a=1}l=u,i+=2}}function G(e){return String(e.s*e.s/0)}function K(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";e.d.push(+t),d&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function z(e,t){var n,r,i,s,o,a,l,u,c;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),x.test(t))return K(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(b.test(t))n=16,t=t.toLowerCase();else if(T.test(t))n=2;else{if(!w.test(t))throw Error(h+t);n=8}for((s=t.search(/p/i))>0?(l=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),o=(s=t.indexOf("."))>=0,r=e.constructor,o&&(s=(a=(t=t.replace(".","")).length)-s,i=j(r,new r(n),s,2*s)),s=c=(u=L(t,n,E)).length-1;0===u[s];--s)u.pop();return s<0?new r(0*e.s):(e.e=_(u,c),e.d=u,d=!1,o&&(e=S(e,i,4*a)),l&&(e=e.times(Math.abs(l)<54?g(2,l):Re.pow(2,l))),d=!0,e)}function W(e,t,n,r,i){var s,o,a,l,u=e.precision,c=Math.ceil(u/7);for(d=!1,l=n.times(n),a=new e(r);;){if(o=S(a.times(l),new e(t++*t++),u,1),a=i?r.plus(o):r.minus(o),r=S(o.times(l),new e(t++*t++),u,1),void 0!==(o=a.plus(r)).d[c]){for(s=c;o.d[s]===a.d[s]&&s--;);if(-1==s)break}s=a,a=r,r=o,o=s}return d=!0,o.d.length=c+1,o}function Z(e,t){for(var n=e;--t;)n*=e;return n}function $(e,t){var n,r=t.s<0,s=D(e,e.precision,1),o=s.times(.5);if((t=t.abs()).lte(o))return i=r?4:1,t;if((n=t.divToInt(s)).isZero())i=r?3:2;else{if((t=t.minus(n.times(s))).lte(o))return i=q(n)?r?2:3:r?4:1,t;i=q(n)?r?1:4:r?3:2}return t.minus(s).abs()}function Q(e,t,n,i){var s,l,u,c,d,p,h,f,m,y=e.constructor,v=void 0!==n;if(v?(P(n,1,o),void 0===i?i=y.rounding:P(i,0,8)):(n=y.precision,i=y.rounding),e.isFinite()){for(v?(s=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):s=t,(u=(h=M(e)).indexOf("."))>=0&&(h=h.replace(".",""),(m=new y(1)).e=h.length-u,m.d=L(M(m),10,s),m.e=m.d.length),l=d=(f=L(h,10,s)).length;0==f[--d];)f.pop();if(f[0]){if(u<0?l--:((e=new y(e)).d=f,e.e=l,f=(e=S(e,m,n,i,0,s)).d,l=e.e,p=r),u=f[n],c=s/2,p=p||void 0!==f[n+1],p=i<4?(void 0!==u||p)&&(0===i||i===(e.s<0?3:2)):u>c||u===c&&(4===i||p||6===i&&1&f[n-1]||i===(e.s<0?8:7)),f.length=n,p)for(;++f[--n]>s-1;)f[n]=0,n||(++l,f.unshift(1));for(d=f.length;!f[d-1];--d);for(u=0,h="";u<d;u++)h+=a.charAt(f[u]);if(v){if(d>1)if(16==t||8==t){for(u=16==t?4:3,--d;d%u;d++)h+="0";for(d=(f=L(h,s,t)).length;!f[d-1];--d);for(u=1,h="1.";u<d;u++)h+=a.charAt(f[u])}else h=h.charAt(0)+"."+h.slice(1);h=h+(l<0?"p":"p+")+l}else if(l<0){for(;++l;)h="0"+h;h="0."+h}else if(++l>d)for(l-=d;l--;)h+="0";else l<d&&(h=h.slice(0,l)+"."+h.slice(l))}else h=v?"0p+0":"0";h=(16==t?"0x":2==t?"0b":8==t?"0o":"")+h}else h=G(e);return e.s<0?"-"+h:h}function Y(e,t){if(e.length>t)return e.length=t,!0}function J(e){return new this(e).abs()}function X(e){return new this(e).acos()}function ee(e){return new this(e).acosh()}function te(e,t){return new this(e).plus(t)}function ne(e){return new this(e).asin()}function re(e){return new this(e).asinh()}function ie(e){return new this(e).atan()}function se(e){return new this(e).atanh()}function oe(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,s=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?D(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=D(this,s,1).times(.5)).s=e.s:t.s<0?(this.precision=s,this.rounding=1,n=this.atan(S(e,t,s,1)),t=D(this,s,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(S(e,t,s,1)):(n=D(this,s,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function ae(e){return new this(e).cbrt()}function le(e){return F(e=new this(e),e.e+1,2)}function ue(e,t,n){return new this(e).clamp(t,n)}function ce(e){if(!e||"object"!==typeof e)throw Error(p+"Object expected");var t,n,r,i=!0===e.defaults,a=["precision",1,o,"rounding",0,8,"toExpNeg",-s,0,"toExpPos",0,s,"maxE",0,s,"minE",-s,0,"modulo",0,9];for(t=0;t<a.length;t+=3)if(n=a[t],i&&(this[n]=c[n]),void 0!==(r=e[n])){if(!(v(r)===r&&r>=a[t+1]&&r<=a[t+2]))throw Error(h+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=c[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(h+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(m);this[n]=!0}else this[n]=!1}return this}function de(e){return new this(e).cos()}function pe(e){return new this(e).cosh()}function he(e,t){return new this(e).div(t)}function fe(e){return new this(e).exp()}function me(e){return F(e=new this(e),e.e+1,3)}function ye(){var e,t,n=new this(0);for(d=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return d=!0,new this(1/0);n=t}return d=!0,n.sqrt()}function ve(e){return e instanceof Re||e&&e.toStringTag===y||!1}function ge(e){return new this(e).ln()}function Te(e,t){return new this(e).log(t)}function be(e){return new this(e).log(2)}function we(e){return new this(e).log(10)}function xe(){return U(this,arguments,-1)}function Ee(){return U(this,arguments,1)}function Ve(e,t){return new this(e).mod(t)}function Ne(e,t){return new this(e).mul(t)}function ke(e,t){return new this(e).pow(t)}function Ce(e){var t,n,r,i,s=0,a=new this(1),l=[];if(void 0===e?e=this.precision:P(e,1,o),r=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));s<r;)(i=t[s])>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:l[s++]=i%1e7;else{if(!crypto.randomBytes)throw Error(m);for(t=crypto.randomBytes(r*=4);s<r;)(i=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((127&t[s+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,s):(l.push(i%1e7),s+=4);s=r/4}else for(;s<r;)l[s++]=1e7*Math.random()|0;for(e%=7,(r=l[--s])&&e&&(i=g(10,7-e),l[s]=(r/i|0)*i);0===l[s];s--)l.pop();if(s<0)n=0,l=[0];else{for(n=-1;0===l[0];n-=7)l.shift();for(r=1,i=l[0];i>=10;i/=10)r++;r<7&&(n-=7-r)}return a.e=n,a.d=l,a}function Pe(e){return F(e=new this(e),e.e+1,this.rounding)}function Oe(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Le(e){return new this(e).sin()}function Se(e){return new this(e).sinh()}function Fe(e){return new this(e).sqrt()}function Me(e,t){return new this(e).sub(t)}function _e(){var e=0,t=arguments,n=new this(t[e]);for(d=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return d=!0,F(n,this.precision,this.rounding)}function Ae(e){return new this(e).tan()}function De(e){return new this(e).tanh()}function Ie(e){return F(e=new this(e),e.e+1,1)}k[Symbol.for("nodejs.util.inspect.custom")]=k.toString,k[Symbol.toStringTag]="Decimal";var Re=k.constructor=function e(t){var n,r,i;function s(e){var t,n,r,i=this;if(!(i instanceof s))return new s(e);if(i.constructor=s,ve(e))return i.s=e.s,void(d?!e.d||e.e>s.maxE?(i.e=NaN,i.d=null):e.e<s.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"===(r=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(d?t>s.maxE?(i.e=NaN,i.d=null):t<s.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!==0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):K(i,e.toString())}if("string"===r)return 45===(n=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===n&&(e=e.slice(1)),i.s=1),x.test(e)?K(i,e):z(i,e);if("bigint"===r)return e<0?(e=-e,i.s=-1):i.s=1,K(i,e.toString());throw Error(h+e)}if(s.prototype=k,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=ce,s.clone=e,s.isDecimal=ve,s.abs=J,s.acos=X,s.acosh=ee,s.add=te,s.asin=ne,s.asinh=re,s.atan=ie,s.atanh=se,s.atan2=oe,s.cbrt=ae,s.ceil=le,s.clamp=ue,s.cos=de,s.cosh=pe,s.div=he,s.exp=fe,s.floor=me,s.hypot=ye,s.ln=ge,s.log=Te,s.log10=we,s.log2=be,s.max=xe,s.min=Ee,s.mod=Ve,s.mul=Ne,s.pow=ke,s.random=Ce,s.round=Pe,s.sign=Oe,s.sin=Le,s.sinh=Se,s.sqrt=Fe,s.sub=Me,s.sum=_e,s.tan=Ae,s.tanh=De,s.trunc=Ie,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return s.config(t),s}(c);l=new Re(l),u=new Re(u);const je=Re},77280(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionCode=void 0;const r=n(59715),i=n(50917),s=n(15459);class o extends r.ParsableNode{get expressions(){return this.expressionsValue.asArray()}constructor(e,t){super(e),this.nodeType=s.NodeType.FunctionCode,this.expressionsValue=new i.ExpressionList(e,t)}parse(e){const t=this.expressionsValue.parse(e);if("success"!=t.state)return this;const n=(0,r.asParsableNode)(t.result);return null!=n?n:this}getChildren(){return this.expressionsValue.asArray()}validate(e){}}t.FunctionCode=o},77945(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VariableType=void 0;t.VariableType=class{constructor(){this.hasNodeDependencies=!0}getDependencies(e){return[]}}},78020(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newValidateFunctionArgumentsFailed=function(){return{state:"failed"}},t.newValidateFunctionArgumentsSuccessAutoMap=function(e){return{state:"success",autoMap:!0,parameterType:e}},t.asValidateFunctionArgumentsAutoMapResult=function(e){return"success"==e.state&&e.autoMap?e:null},t.newValidateFunctionArgumentsCallFunctionSuccess=function(e){return{state:"success",autoMap:!1,function:e}},t.asValidateFunctionArgumentsCallFunctionResult=function(e){return"success"!=e.state||e.autoMap?null:e}},78417(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BuildLiteralToken=void 0;const r=n(6248),i=n(40350),s=n(68784),o=n(72928),a=n(48577),l=n(20749),u=n(37532),c=n(5697),d=n(77148),p=n(95318),h=n(71148),f=".".charCodeAt(0),m=":".charCodeAt(0);class y extends r.ParsableToken{constructor(e){super(e),this.tokenIsLiteral=!1,this.tokenType=h.TokenType.BuildLiteralToken,this.hasMemberAccessor=!1,this.lastMemberAccessor=!1}parse(e){let t=e.value;return y.terminatorValues.findIndex(e=>e==t)>=0?(0,s.newParseTokenFinishedResult)(!1,this.sealLiteral()):t==f?this.lastMemberAccessor?(0,s.newParseTokenInvalidResult)("Unexpected character: '".concat(String.fromCharCode(t),"'. Member accessor should be followed by member name.")):(this.hasMemberAccessor=!0,this.lastMemberAccessor=!0,this.appendValue(t),(0,s.newParseTokenInProgressResult)()):(0,p.isDigitOrLetter)(t)||t==m?(this.lastMemberAccessor=!1,this.appendValue(t),(0,s.newParseTokenInProgressResult)()):t==i.TokenValues.Quote&&this.value==i.TokenValues.DateTimeStarter?(0,s.newParseTokenInProgressResult)(new o.DateTimeLiteralToken(this.firstCharacter)):(0,s.newParseTokenInvalidResult)("Unexpected character: '".concat(String.fromCharCode(t),"'"))}endOfLine(){return this.lastMemberAccessor?(0,s.newParseTokenInvalidResult)("Unexpected end of line. Member accessor should be followed by member name."):(0,s.newParseTokenFinishedResult)(!0,this.sealLiteral())}sealLiteral(){let e=this.value;return d.Keywords.contains(e)?new a.KeywordToken(e,this.firstCharacter):c.BooleanLiteralToken.isValid(e)?c.BooleanLiteralToken.parse(e,this.firstCharacter):this.hasMemberAccessor?new l.MemberAccessLiteralToken(e,this.firstCharacter):new u.StringLiteralToken(e,this.firstCharacter)}}t.BuildLiteralToken=y,y.terminatorValues=[i.TokenValues.Space,i.TokenValues.OpenParentheses,i.TokenValues.OpenBrackets,i.TokenValues.CloseParentheses,i.TokenValues.CloseBrackets,i.TokenValues.ArgumentSeparator]},78430(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newValidateMemberFunctionArgumentsFailed=function(){return{state:"failed"}},t.newValidateMemberFunctionArgumentsSuccess=function(e){return{state:"success",functionCall:e}}},78433(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderFunctionCall=function(e,t){const n=(0,r.firstOrDefault)(l.all,t=>t.matches(e));if(null==n)throw new Error("Couldn't find creator for expression: '".concat(e.nodeType,"'"));return n.render(e,t)};const r=n(45014),i=n(69474),s=n(69297),o=n(70372),a=n(83872);class l{static get all(){return null==l.allValues&&(l.allValues=l.initialize()),this.allValues}constructor(e,t){this.matches=e,this.render=t}static initialize(){return[u(o.TableLookUpFunctionCallRenderer.matches,o.TableLookUpFunctionCallRenderer.render),u(a.TableLookUpRowFunctionCallRenderer.matches,a.TableLookUpRowFunctionCallRenderer.render),u(i.LexyFunctionCallRenderer.matches,i.LexyFunctionCallRenderer.render),u(s.LibraryFunctionCallRenderer.matches,s.LibraryFunctionCallRenderer.render)]}}function u(e,t){return new l(e,function(e,n){return t(e,n)})}},79545(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationTableValue=void 0;const r=n(59611),i=n(15459),s=n(92310),o=n(32045);class a extends r.Node{constructor(e,t,n,r){super(r),this.nodeType=i.NodeType.ValidationTableValue,this.expression=t,this.index=e,this.tableHeader=n}getChildren(){return[this.expression]}validate(e){}getValue(){const e=(0,o.asMemberAccessExpression)(this.expression);if(null!=e)return e.toString();const t=(0,s.asLiteralExpression)(this.expression),n=null===t||void 0===t?void 0:t.literal.typedValue;return void 0==n?null:n}}t.ValidationTableValue=a},81841(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logLineAndVariables=function(e,t){const n=function(e){return l(e,o.VariableAccess.Read)}(e),s=(0,i.replaceAll)(e.source.line.content.substring(2),'"',"'");t.startLine("const __logLine".concat(e.source.line.index," = ").concat(r.LexyCodeConstants.contextVariable,'.log("').concat(s,'", ').concat(e.source.line.index,", {")),c(n,t),t.endLine("});")},t.logAssignmentVariables=function(e,t){const n=function(e){return l(e,o.VariableAccess.Write)}(e);t.startLine("__logLine".concat(e.source.line.index,".addVariables({")),c(n,t),t.endLine("});")};const r=n(2013),i=n(71143),s=n(45014),o=n(30097),a=n(45641);function l(e,t){const n=e.usedVariables();return(0,s.unique)((0,s.where)(n,e=>e.access==t),e=>e.path.fullPath())}function u(e,t,n,r){n.write("['".concat(e.path.fullPath(),"']: ")),(0,a.renderVariableReference)(e,n),r||n.write(", ")}function c(e,t){if(e&&0!=e.length)for(let n=0;n<e.length;n++){u(e[n],0,t,n==e.length-1)}}},82140(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PrimitiveType=void 0,t.instanceOfPrimitiveType=o,t.asPrimitiveType=function(e){return o(e)?e:null};const r=n(27449),i=n(77945),s=n(88310);function o(e){return(null===e||void 0===e?void 0:e.variableTypeName)==s.VariableTypeName.PrimitiveType}class a extends i.VariableType{constructor(e){super(),this.variableTypeName=s.VariableTypeName.PrimitiveType,this.type=e}isAssignableFrom(e){return this.equals(e)}equals(e){return null!=e&&o(e)&&this.type==e.type}toString(){return this.type}static parse(e){switch(e){case r.TypeNames.boolean:return a.boolean;case r.TypeNames.string:return a.string;case r.TypeNames.number:return a.number;case r.TypeNames.date:return a.date;default:throw new Error("Invalid primitive type: '".concat(e,"'"))}}}t.PrimitiveType=a,a.boolean=new a(r.TypeNames.boolean),a.string=new a(r.TypeNames.string),a.number=new a(r.TypeNames.number),a.date=new a(r.TypeNames.date)},82284(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})},82751(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.translateParentVariableClassName=function(e,t){var n;const s=e.path.rootIdentifier;switch(null===(n=e.componentType)||void 0===n?void 0:n.variableTypeName){case r.VariableTypeName.DeclaredType:return t.identifierFromEnvironment((0,i.typeClassName)(s));case r.VariableTypeName.EnumType:return t.identifierFromEnvironment((0,i.enumClassName)(s));case r.VariableTypeName.FunctionType:return t.identifierFromEnvironment((0,i.functionClassName)(s));case r.VariableTypeName.TableType:return t.identifierFromEnvironment((0,i.tableClassName)(s));default:return s}};const r=n(88310),i=n(45375)},83014(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionName=void 0;const r=n(59611),i=n(67314),s=n(95318),o=n(15459),a=n(70330);class l extends r.Node{get value(){return a.Assert.notNull(this.valueValue,"value")}constructor(e,t){super(t),this.valueValue=null,this.nodeType=o.NodeType.FunctionName,this.valueValue=e}getChildren(){return[]}validate(e){(0,i.isNullOrEmpty)(this.value)&&e.logger.fail(this.reference,"Invalid function name: '".concat(this.value,"'. Name should not be empty.")),(0,s.isValidIdentifier)(this.value)||e.logger.fail(this.reference,"Invalid function name: '".concat(this.value,"'."))}static parseName(e,t){return new l(e,t)}toString(){return this.valueValue}}t.FunctionName=l},83138(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeName=void 0;const r=n(70330);class i{constructor(e){this.valueValue=null,this.valueValue=e}get value(){return r.Assert.notNull(this.valueValue,"value")}static parseName(e){return new i(e)}}t.TypeName=i},83872(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TableLookUpRowFunctionCallRenderer=void 0;const r=n(2013),i=n(45375),s=n(37381),o=n(70330),a=n(40693);t.TableLookUpRowFunctionCallRenderer=class{static matches(e){return(0,s.instanceOfMemberFunctionCallExpression)(e)&&(0,a.instanceOfLookUpRowFunctionCall)(e.functionCall)}static render(e,t){const n=o.Assert.notNull((0,a.asLookUpRowFunctionCall)(e.functionCall),"expression.functionCall as LookUpRowFunction");t.writeEnvironment(),n.discriminatorColumn&&n.discriminatorExpression?(t.write(".tableLibrary.lookUpRowBy("),t.write('"'.concat(n.discriminatorColumn,'", ')),t.renderExpression(n.discriminatorExpression),t.write(", ")):t.write(".tableLibrary.lookUpRow("),t.write('"'.concat(n.searchValueColumn,'", ')),t.renderExpression(n.valueExpression),t.write(', "'.concat(n.tableName,'", ')),t.writeEnvironment(".".concat((0,i.tableClassName)(n.tableName),".__values, ")),t.write("".concat(r.LexyCodeConstants.contextVariable,")"))}}},84906(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConstantValue=void 0;t.ConstantValue=class{constructor(e){this.value=e}}},85126(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.customVariableIdentifier=function(e,t){if(null==e.variableType)throw new Error("Variable type expected: "+e.nodeType);switch(e.variableType.variableTypeName){case r.VariableTypeName.EnumType:const n=(0,i.asEnumType)(e.variableType);if(null==n)throw new Error("Invalid EnumType");return t.identifierFromEnvironment((0,s.enumClassName)(n.type));case r.VariableTypeName.TableType:const l=(0,o.asTableType)(e.variableType);if(null==l)throw new Error("Invalid TableType");return t.identifierFromEnvironment((0,s.tableClassName)(l.tableName));case r.VariableTypeName.DeclaredType:const u=(0,a.asDeclaredType)(e.variableType);if(null==u)throw new Error("Invalid DeclaredType");return t.identifierFromEnvironment((0,s.typeClassName)(u.type))}throw new Error("Couldn't map type: ".concat(e.variableType))};const r=n(88310),i=n(31200),s=n(45375),o=n(23249),a=n(99583)},85631(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnumMember=void 0,t.instanceOfEnumMember=l,t.asEnumMember=function(e){return l(e)?e:null};const r=n(85792),i=n(59611),s=n(15229),o=n(95318),a=n(15459);function l(e){return(null===e||void 0===e?void 0:e.nodeType)==a.NodeType.EnumMember}class u extends i.Node{constructor(e,t,n,r){super(t),this.nodeType=a.NodeType.EnumMember,this.numberValue=r,this.name=e,this.valueLiteral=n}static parse(e,t){let n=e.validateTokens("EnumMember").countMinimum(1).stringLiteral(0).isValid;if(!n)return null;let i=e.line,o=i.tokens,a=o.tokenValue(0);if(!a)return null;let l=i.lineStartReference();if(1==o.length)return new u(a,l,null,t+1);if(3!=o.length)return e.logger.fail(i.lineEndReference(),"Invalid number of tokens: ".concat(o.length,". Should be 1 or 3.")),null;if(n=e.validateTokens("EnumMember").operator(1,s.OperatorType.Assignment).numberLiteral(2).isValid,!n)return null;let c=o.token(2,r.asNumberLiteralToken);return null==c?null:new u(a,l,c,c.numberValue)}getChildren(){return[]}validate(e){this.validateMemberName(e),this.validateMemberValues(e)}validateMemberName(e){null==this.name||""==this.name?e.logger.fail(this.reference,"Enum member name should not be null or empty."):(0,o.isValidIdentifier)(this.name)||e.logger.fail(this.reference,"Invalid enum member name: ".concat(this.name,"."))}validateMemberValues(e){null!=this.valueLiteral&&(this.valueLiteral.numberValue<0&&e.logger.fail(this.reference,"Enum member value should not be < 0: ".concat(this.valueLiteral)),this.valueLiteral.isDecimal()&&e.logger.fail(this.reference,"Enum member value should not be decimal: ".concat(this.valueLiteral)))}}t.EnumMember=u},85792(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NumberLiteralToken=void 0,t.instanceOfNumberLiteralToken=u,t.asNumberLiteralToken=function(e){return u(e)?e:null};const r=n(6248),i=n(40350),s=n(68784),o=n(95318),a=n(82140),l=n(71148);function u(e){return(null===e||void 0===e?void 0:e.tokenType)==l.TokenType.NumberLiteralToken}class c extends r.ParsableToken{get numberValue(){if(null==this.numberValueValue)throw new Error("NumberLiteralToken not finalized.");return this.numberValueValue}constructor(e,t){super(t),this.allowedNextTokensValues=[i.TokenValues.TableSeparator,i.TokenValues.Space,i.TokenValues.Assignment,i.TokenValues.Addition,i.TokenValues.Subtraction,i.TokenValues.Multiplication,i.TokenValues.DivisionOrComment,i.TokenValues.Modulus,i.TokenValues.CloseParentheses,i.TokenValues.CloseBrackets,i.TokenValues.GreaterThan,i.TokenValues.LessThan,i.TokenValues.ArgumentSeparator],this.hasDecimalSeparator=!1,this.tokenIsLiteral=!0,this.tokenType=l.TokenType.NumberLiteralToken,this.numberValueValue=e}get value(){return null!=this.numberValue?this.numberValue.toString():super.value}get typedValue(){return this.numberValue}deriveType(e){return a.PrimitiveType.number}parse(e){let t=e.value;return(0,o.isDigit)(t)?(this.appendValue(t),(0,s.newParseTokenInProgressResult)()):t==i.TokenValues.DecimalSeparator?this.hasDecimalSeparator?{state:"invalid",validationError:"Only one decimal separator expected"}:(this.hasDecimalSeparator=!0,this.appendValue(t),(0,s.newParseTokenInProgressResult)()):this.allowedNextTokensValues.findIndex(e=>e==t)>=0?this.endOfLine():(0,s.newParseTokenInvalidResult)("Invalid number token character: '".concat(String.fromCharCode(t),"'"))}endOfLine(){return this.numberValueValue=parseFloat(super.value),(0,s.newParseTokenFinishedResult)(!1)}isDecimal(){return null!=this.numberValue&&this.numberValue%1!=0}toString(){return this.value}}t.NumberLiteralToken=c},86667(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Library=void 0;const r=n(14131),i=n(70330);class s{constructor(e,t){this.runTime=i.Assert.notNull(e,"runTime"),this.name=e.name,this.functions=i.Assert.notNull(t,"functions")}getFunction(e){var t;return null!==(t=this.functions[e])&&void 0!==t?t:null}static build(e){const t=s.buildFunctions(e);return new s(e,t)}static buildFunctions(e){const t={};for(let n in e.functionsInfo){let r=e.functionsInfo[n];this.buildFunction(e.name,t,n,r)}return t}static buildFunction(e,t,n,i){if(t[n])throw new Error("Duplicated function '".concat(n,"' in library '").concat(e,"'. Overloads are not supported."));t[n]=r.LibraryFunction.build(e,n,i)}}t.Library=s},86898(e,t){"use strict";function n(e){return 1==(null===e||void 0===e?void 0:e.isChildExpression)}function r(e){return 1==(null===e||void 0===e?void 0:e.isParentExpression)}Object.defineProperty(t,"__esModule",{value:!0}),t.instanceOfChildExpression=n,t.asChildExpression=function(e){return n(e)?e:null},t.instanceOfParentExpression=r,t.asParentExpression=function(e){return r(e)?e:null}},87115(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionResults=void 0;const r=n(76178),i=n(59715),s=n(41486),o=n(15459);class a extends i.ParsableNode{get variables(){return this.variablesValue}constructor(e){super(e),this.variablesValue=[],this.nodeType=o.NodeType.FunctionResults}parse(e){let t=r.VariableDefinition.parse(s.VariableSource.Results,e);return null==t?this:null!=t.defaultExpression?(e.logger.fail(this.reference,"Result variable '".concat(t.name,"' should not have a default value.")),this):(this.variablesValue.push(t),this)}getChildren(){return[...this.variables]}validate(e){}}t.FunctionResults=a},87274(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.translateType=function(e){switch(e.variableTypeName){case r.VariableTypeName.PrimitiveType:{const t=(0,i.asPrimitiveType)(e);if(null==t)throw new Error("Is not primitiveType");return t.type}case r.VariableTypeName.EnumType:{const t=(0,s.asEnumType)(e);if(null==t)throw new Error("Is not enumType");return(0,o.enumClassName)(t.type)}case r.VariableTypeName.TableType:{const t=(0,a.asTableType)(e);if(null==t)throw new Error("Is not table");return t.tableName}case r.VariableTypeName.GeneratedType:{const t=(0,u.asGeneratedType)(e);if(null==t)throw new Error("Is not GeneratedType");return p(t)}case r.VariableTypeName.DeclaredType:{const t=(0,d.asDeclaredType)(e);if(null==t)throw new Error("Is not DeclaredType");return typeof t.type}default:throw new Error("Not supported: ".concat(e.variableTypeName))}},t.translateGeneratedType=p;const r=n(88310),i=n(82140),s=n(31200),o=n(45375),a=n(23249),l=n(2013),u=n(92272),c=n(19137),d=n(99583);function p(e){switch(e.source){case c.GeneratedTypeSource.FunctionParameters:return"".concat((0,o.functionClassName)(e.name),".").concat(l.LexyCodeConstants.parametersType);case c.GeneratedTypeSource.FunctionResults:return"".concat((0,o.functionClassName)(e.name),".").concat(l.LexyCodeConstants.resultsType);case c.GeneratedTypeSource.TableRow:return"".concat((0,o.tableClassName)(e.name),".").concat(l.LexyCodeConstants.rowType);default:throw new Error("Invalid type: ".concat(e.source))}}},87354(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnHeader=void 0,t.instanceOfColumnHeader=o,t.asColumnHeader=function(e){return o(e)?e:null};const r=n(59611),i=n(15459),s=n(5932);function o(e){return(null===e||void 0===e?void 0:e.nodeType)==i.NodeType.ColumnHeader}class a extends r.Node{constructor(e,t,n){super(n),this.nodeType=i.NodeType.ColumnHeader,this.name=e,this.type=t}static parse(e,t,n){let r=s.VariableTypeDeclarationParser.parse(t,n);return new a(e,r,n)}getChildren(){return[this.type]}validate(e){}}t.ColumnHeader=a},87770(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Stack=void 0;t.Stack=class{constructor(){this.storage=[]}push(e){this.storage.push(e)}pop(){return this.storage.pop()}peek(){return this.size()>0?this.storage[this.size()-1]:void 0}size(){return this.storage.length}}},87963(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LexyFunctionCallExpression=void 0,t.instanceOfLexyFunctionCallExpression=d,t.asLexyFunctionCallExpression=function(e){return d(e)?e:null};const r=n(99989),i=n(92272),s=n(89637),o=n(15459),a=n(60059),l=n(78020),u=n(30097),c=n(45014);function d(e){return(null===e||void 0===e?void 0:e.nodeType)==o.NodeType.LexyFunctionCallExpression}class p extends a.FunctionCallExpression{constructor(e,t,n){super(n),this.hasNodeDependencies=!0,this.nodeType=o.NodeType.LexyFunctionCallExpression,this.functionName=e,this.args=t,this.parametersMapping=null,this.parametersTypes=null,this.resultsObjectType=null}getDependencies(e){let t=e.getNode(this.functionName);return null!=t?[t]:[]}getChildren(){return[...this.args]}validate(e){const t=this.getFunction(e);if(null==t)return void e.logger.fail(this.reference,"Invalid function name: '".concat(this.functionName,"'"));const n=t.validateArguments(e,this.args,this.reference);if(null==n||"success"!=n.state)return;const r=(0,l.asValidateFunctionArgumentsAutoMapResult)(n);null!=r&&this.autoMapParameters(e,r.parameterType);const i=(0,l.asValidateFunctionArgumentsCallFunctionResult)(n);null!=i&&(this.parametersTypes=(0,c.castType)(i.function.parametersTypes)),this.resultsObjectType=t.getResultsType()}autoMapParameters(e,t){const n=(0,i.asGeneratedType)(t);null!=n&&(this.parametersMapping=s.FillParametersFunctionExpression.getMapping(this.reference,e,n))}getFunction(e){return e.componentNodes.getFunction(this.functionName)}deriveType(e){const t=e.componentNodes.getFunction(this.functionName);return null==t?null:t.getResultsType()}usedVariables(){if(null==this.parametersMapping)return super.usedVariables();const e=(0,r.mapToUsedVariable)(u.VariableAccess.Read);return[...super.usedVariables(),...this.parametersMapping.values.map(e)]}}t.LexyFunctionCallExpression=p},88074(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExecutionContext=void 0;const r=n(87770),i=n(74863);t.ExecutionContext=class{get entries(){return this.entriesValue}constructor(e){this.fileName=null,this.entriesValue=[],this.entriesStack=new r.Stack,this.logger=e}setFileName(e){this.fileName=e}log(e,t,n){const r=new i.ExecutionLogEntry(e=>this.logVariables(e),this.fileName,t,e,n);void 0==this.currentEntryScope?this.entriesValue.push(r):this.currentEntryScope.addEntry(r),this.lastEntry=r;const s=" ".repeat(2*this.entriesStack.size());return this.logger.logDebug("".concat(s).concat(t,":' ").concat(e,"'")),n&&this.logVariablesValues(n,s),r}logVariablesValues(e,t){const n=Object.keys(e);for(const r of n)this.logger.logDebug("".concat(t,"  - ").concat(r,": ").concat(JSON.stringify(e[r])))}logChild(e){if(void 0==this.lastEntry)throw new Error("lastEntry not set");this.lastEntry.addEntry(new i.ExecutionLogEntry(e=>this.logVariables(e),this.fileName,null,e,{}));const t=" ".repeat(2*this.entriesStack.size());this.logger.logDebug("".concat(t,"  '").concat(e,"'"))}logVariables(e){const t=" ".repeat(2*this.entriesStack.size());this.logVariablesValues(e,t)}openScope(e,t){this.entriesStack.push({scope:this.currentEntryScope,last:this.lastEntry}),this.log(e,t,{}),this.currentEntryScope=this.lastEntry}closeScope(){const e=this.entriesStack.pop();this.currentEntryScope=null===e||void 0===e?void 0:e.scope,this.lastEntry=null===e||void 0===e?void 0:e.last}useLastNodeAsScope(){this.entriesStack.push({scope:this.currentEntryScope,last:this.lastEntry}),this.currentEntryScope=this.lastEntry}revertToParentScope(){const e=this.entriesStack.pop();this.currentEntryScope=null===e||void 0===e?void 0:e.scope,this.lastEntry=null===e||void 0===e?void 0:e.last}}},88310(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.VariableTypeName=void 0,function(e){e.GeneratedType="GeneratedType",e.DeclaredType="DeclaredType",e.EnumType="EnumType",e.FunctionType="FunctionType",e.PrimitiveType="PrimitiveType",e.TableType="TableType",e.VoidType="VoidType"}(n||(t.VariableTypeName=n={}))},89377(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenCharacter=void 0;t.TokenCharacter=class{constructor(e,t){this.position=0,this.value=e,this.position=t}toString(){return String.fromCharCode(this.value)}}},89379(e,t,n){"use strict";n.d(t,{A:()=>s});var r=n(64467);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},89637(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FillParametersFunctionExpression=void 0,t.instanceOfFillParametersFunctionExpression=d,t.asFillParametersFunctionExpression=function(e){return d(e)?e:null};const r=n(99989),i=n(32045),s=n(92272),o=n(22697),a=n(15459),l=n(70330),u=n(30097),c=n(60059);function d(e){return(null===e||void 0===e?void 0:e.nodeType)==a.NodeType.FillParametersFunctionExpression}class p extends c.FunctionCallExpression{get type(){return l.Assert.notNull(this.typeValue,"type")}get functionHelp(){return"".concat(p.functionName," expects 1 argument (Function.Parameters)")}constructor(e,t){super(t),this.typeValue=null,this.hasNodeDependencies=!0,this.nodeType=a.NodeType.FillParametersFunctionExpression,this.valueExpression=e;const n=(0,i.asMemberAccessExpression)(e);this.typeLiteralToken=n?n.memberAccessLiteral:null,this.mapping=null}getDependencies(e){const t=this.typeLiteralToken?e.getNode(this.typeLiteralToken.toString()):null;return null!=t?[t]:[]}static create(e,t){return new p(t,e)}getChildren(){return[this.valueExpression]}validate(e){const t=this.valueExpression.deriveType(e),n=(0,s.asGeneratedType)(t);null!=n?(this.typeValue=n,this.mapping=p.getMapping(this.reference,e,n)):e.logger.fail(this.reference,"Invalid argument 1 'Value' should be of type 'GeneratedType' but is '".concat(t,"'. ").concat(this.functionHelp))}static getMapping(e,t,n){const i=new Array;for(const s of n.members){let n=t.variableContext.getVariable(s.name);null!=n&&(null!=n.variableType&&n.variableType.equals(s.type)?i.push(new r.Mapping(s.name,n.variableType,n.variableSource)):t.logger.fail(e,"Invalid parameter mapping. Variable '".concat(s.name,"' of type '").concat(n.variableType,"' can't be mapped to parameter '").concat(s.name,"' of type '").concat(s.type,"'.")))}return 0==i.length&&t.logger.fail(e,"Invalid parameter mapping. No parameter could be mapped from variables."),new r.VariablesMapping(n,i)}deriveType(e){if(void 0==this.typeLiteralToken)return null;let t=e.componentNodes.getFunction(this.typeLiteralToken.parent);return null==t?null:this.typeLiteralToken.member==o.Function.parameterName?t.getParametersType():this.typeLiteralToken.member==o.Function.resultsName?t.getResultsType():null}usedVariables(){return null==this.mapping?super.usedVariables():[...super.usedVariables(),...this.mapping.values.map((0,r.mapToUsedVariable)(u.VariableAccess.Read))]}}t.FillParametersFunctionExpression=p,p.functionName="fill"},89981(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VariablePathExpressionParser=void 0;const r=n(29236),i=n(32045),s=n(92310),o=n(9026),a=n(5627),l=n(37532);class u{static parseExpression(e){const t=(0,i.asMemberAccessExpression)(e);if(null!=t)return u.parseMemberAccessExpression(t);const n=(0,s.asLiteralExpression)(e);if(null!=n)return u.parseLiteralExpression(n);const l=(0,o.asIdentifierExpression)(e);return null!=l?(0,r.newIdentifierPathParseSuccess)(new a.IdentifierPath(l.identifier.split("."))):(0,r.newIdentifierPathParseFailed)("Invalid constant value. Expected: 'Variable = ConstantValue'")}static parseLiteralExpression(e){const t=(0,l.asStringLiteralToken)(e.literal);return null!=t?(0,r.newIdentifierPathParseSuccess)(new a.IdentifierPath(t.value.split("."))):(0,r.newIdentifierPathParseFailed)("Invalid expression literal. Expected: 'Variable = ConstantValue'")}static parseMemberAccessExpression(e){if(0==e.memberAccessLiteral.parts.length)return(0,r.newIdentifierPathParseFailed)("Invalid number of variable reference parts: ".concat(e.memberAccessLiteral.parts.length));let t=new a.IdentifierPath(e.memberAccessLiteral.parts);return(0,r.newIdentifierPathParseSuccess)(t)}}t.VariablePathExpressionParser=u},90223(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParenthesizedExpression=void 0,t.instanceOfParenthesizedExpression=a,t.asParenthesizedExpression=function(e){return a(e)?e:null};const r=n(9313),i=n(15229),s=n(42539),o=n(15459);function a(e){return(null===e||void 0===e?void 0:e.nodeType)==o.NodeType.ParenthesizedExpression}class l extends r.Expression{constructor(e,t,n){super(t,n),this.nodeType=o.NodeType.ParenthesizedExpression,this.expression=e}static parse(e,t){let n=e.tokens;if(!l.isValid(n))return(0,s.newParseExpressionFailed)("ParenthesizedExpression","Not valid.");let r=l.findMatchingClosingParenthesis(n);if(-1==r)return(0,s.newParseExpressionFailed)("ParenthesizedExpression","No closing parentheses found.");let i=n.tokensRange(1,r-1),o=t.parse(i,e.line);if("success"!=o.state)return o;let a=e.createReference(),u=new l(o.result,e,a);return(0,s.newParseExpressionSuccess)(u)}static findMatchingClosingParenthesis(e){let t=0;for(let n=0;n<e.length;n++){let r=e.get(n);if("OperatorToken"!=r.tokenType)continue;const s=r;if(s.type==i.OperatorType.OpenParentheses)t++;else if(s.type==i.OperatorType.CloseParentheses&&(t--,0==t))return n}return-1}static isValid(e){return e.isOperatorToken(0,i.OperatorType.OpenParentheses)}getChildren(){return[this.expression]}validate(e){}deriveType(e){return this.expression.deriveType(e)}}t.ParenthesizedExpression=l},90424(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeDefinition=void 0,t.instanceOfTypeDefinition=c,t.asTypeDefinition=function(e){return c(e)?e:null};const r=n(58996),i=n(83138),s=n(76178),o=n(41486),a=n(15459),l=n(23107),u=n(45014);function c(e){return(null===e||void 0===e?void 0:e.nodeType)==a.NodeType.TypeDefinition}class d extends r.ComponentNode{get variables(){return this.variablesValue}get nodeName(){return this.name.value}constructor(e,t){super(t),this.variablesValue=[],this.nodeType=a.NodeType.TypeDefinition,this.hasNodeDependencies=!0,this.name=i.TypeName.parseName(e)}static parse(e,t){return new d(e,t)}parse(e){let t=s.VariableDefinition.parse(o.VariableSource.Parameters,e);return null!=t&&this.variablesValue.push(t),this}getDependencies(e){return(0,u.selectMany)(this.variablesValue,t=>{const n=(0,l.asHasNodeDependencies)(t.type);return null!=n?n.getDependencies(e):[]})}getChildren(){return[...this.variables]}validate(e){}validateTree(e){const t=e.createVariableScope();try{super.validateTree(e)}finally{t[Symbol.dispose]()}}}t.TypeDefinition=d},90717(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemFunctions=void 0;t.SystemFunctions=class{static populate(e,t){for(let n in t)t[n]&&"object"===typeof t[n]&&t[n].constructor!==Date?this.populate(e[n],t[n]):void 0!=t[n]&&(e[n]=t[n])}static valuesToArray(e){if(null==e)return[];return Object.keys(e).map(t=>({name:t,value:e[t]}))}static identifierPath(e,t){return e?e+"."+t:t}}},91330(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VariableEntry=void 0;t.VariableEntry=class{constructor(e,t){this.variableType=e,this.variableSource=t}}},91485(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TrackLoggingCurrentNodeVisitor=void 0;const r=n(87770),i=n(70330),s=n(58996);t.TrackLoggingCurrentNodeVisitor=class{constructor(e){this.nodeStack=new r.Stack,this.logger=i.Assert.notNull(e,"logger")}enter(e){const t=(0,s.asComponentNode)(e);null!=t&&(this.addCurrentNodeToStack(t),this.logger.setCurrentNode(t))}leave(e){(0,s.instanceOfComponentNode)(e)&&(this.removeCurrentNodeFromStack(),this.revertToPreviousNode())}addCurrentNodeToStack(e){this.nodeStack.push(e)}removeCurrentNodeFromStack(){this.nodeStack.pop()}revertToPreviousNode(){const e=this.nodeStack.peek();null!=e&&this.logger.setCurrentNode(e)}}},92272(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeneratedType=void 0,t.instanceOfGeneratedType=o,t.asGeneratedType=function(e){return o(e)?e:null};const r=n(88310),i=n(45014),s=n(73986);function o(e){return(null===e||void 0===e?void 0:e.variableTypeName)==r.VariableTypeName.GeneratedType}class a extends s.ObjectType{constructor(e,t,n,i){super(),this.variableTypeName=r.VariableTypeName.GeneratedType,this.objectType=!0,this.name=e,this.node=t,this.source=n,this.members=i}memberType(e,t){for(let n=0;n<this.members.length;n++){const t=this.members[n];if(t.name==e)return t.type}return null}getVariables(){return this.members}getVariable(e){return(0,i.firstOrDefault)(this.members,t=>t.name==e)}getFunction(e){return null}equals(e){return null!=e&&o(e)&&this.name==e.name&&this.source==e.source}toString(){return this.name}}t.GeneratedType=a},92310(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LiteralExpression=void 0,t.instanceOfLiteralExpression=l,t.asLiteralExpression=function(e){return l(e)?e:null};const r=n(9313),i=n(42539),s=n(85792),o=n(15229),a=n(15459);function l(e){return(null===e||void 0===e?void 0:e.nodeType)==a.NodeType.LiteralExpression}class u extends r.Expression{constructor(e,t,n){super(t,n),this.nodeType=a.NodeType.LiteralExpression,this.literal=e}static parse(e,t){let n=e.tokens;if(!u.isValid(n))return(0,i.newParseExpressionFailed)("LiteralExpression","Invalid expression.");let r=e.createReference();if(2==n.length)return u.negativeNumeric(e,n,r);let s=n.literalToken(0);if(!s)return(0,i.newParseExpressionFailed)("LiteralExpression","Invalid token");let o=new u(s,e,r);return(0,i.newParseExpressionSuccess)(o)}static negativeNumeric(e,t,n){let r=t.operatorToken(0);if(!r)return(0,i.newParseExpressionFailed)("LiteralExpression","Invalid token");let o=-t.literalToken(1).numberValue,a=new s.NumberLiteralToken(o,r.firstCharacter),l=new u(a,e,n);return(0,i.newParseExpressionSuccess)(l)}static isValid(e){return 1==e.length&&e.isLiteralToken(0)||2==e.length&&e.isOperatorToken(0,o.OperatorType.Subtraction)&&e.isLiteralToken(1)&&(0,s.instanceOfNumberLiteralToken)(e.literalToken(1))}getChildren(){return[]}validate(e){}deriveType(e){return this.literal.deriveType(e)}}t.LiteralExpression=u},93109(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MemberFunctionCallType=void 0,function(e){e.LibraryFunctionCall="LibraryFunctionCall",e.LookUpFunctionCall="LookUpFunctionCall",e.LookUpRowFunctionCall="LookUpRowFunctionCall"}(n||(t.MemberFunctionCallType=n={}))},93592(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionSource=void 0;const r=n(45120);t.ExpressionSource=class{constructor(e,t){if(0==t.length)throw new Error("No tokens.");this.line=e,this.file=e.file,this.tokens=t}createReference(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.tokens.get(e);if(!t)throw new Error("No token at: ".concat(e)+JSON.stringify(this.tokens));return new r.SourceReference(this.file,this.line.index+1,t.firstCharacter.position+1)}}},93649(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionType=void 0,t.instanceOfFunctionType=o,t.asFunctionType=function(e){return o(e)?e:null};const r=n(73986),i=n(22697),s=n(88310);function o(e){return(null===e||void 0===e?void 0:e.variableTypeName)==s.VariableTypeName.EnumType}class a extends r.ObjectType{constructor(e,t){super(),this.variableTypeName=s.VariableTypeName.FunctionType,this.type=e,this.functionValue=t}getVariable(e){return null}getFunction(e){return null}memberType(e,t){return e==i.Function.parameterName?this.functionParametersType(t):e==i.Function.resultsName?this.functionResultsType(t):null}isAssignableFrom(e){return this.equals(e)}equals(e){return null!=e&&o(e)&&this.type==e.type}toString(){return this.type}functionParametersType(e){var t;const n=null===(t=e.getFunction(this.type))||void 0===t?void 0:t.getParametersType();return n||null}functionResultsType(e){var t;const n=null===(t=e.getFunction(this.type))||void 0===t?void 0:t.getResultsType();return n||null}}t.FunctionType=a},94874(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newConstantValueParseFailed=function(e){return{state:"failed",errorMessage:e}},t.newConstantValueParseSuccess=function(e){return{state:"success",result:e}}},95318(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDigit=d,t.isLetter=p,t.isDigitOrLetter=function(e){return d(e)||p(e)},t.isWhitespace=function(e){return e==l||e==u},t.isValidIdentifier=function(e){if(null==e||""==e)return!1;if(!p(e.charCodeAt(0)))return!1;for(let t=1;t<e.length;t++){let n=e.charCodeAt(t);if(!p(n)&&!d(n)&&n!=c)return!1}return!0};const n="0".charCodeAt(0),r="9".charCodeAt(0),i="a".charCodeAt(0),s="z".charCodeAt(0),o="A".charCodeAt(0),a="Z".charCodeAt(0),l=" ".charCodeAt(0),u="\t".charCodeAt(0),c="_".charCodeAt(0);function d(e){return e>=n&&e<=r}function p(e){return e>=i&&e<=s||e>=o&&e<=a}},96251(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationTableHeader=void 0;const r=n(59611),i=n(15459),s=n(71148),o=n(97903);class a extends r.Node{get columns(){return this.columnsValue}constructor(e,t){super(t),this.nodeType=i.NodeType.ValidationTableHeader,this.columnsValue=e}static parse(e){return e.validateTokens("ValidationTableHeader").type(0,s.TokenType.TableSeparatorToken).isValid?a.parseWithoutColumnType(e):null}static parseWithoutColumnType(e){let t=0,n=new Array,r=e.line.tokens;for(;++t<r.length;){if(!e.validateTokens("ValidationTableHeader").type(t+1,s.TokenType.TableSeparatorToken).isValid)return null;const i=r.tokenValue(t),a=e.line.tokenReference(t++);if(null==i)return null;const l=o.ValidationColumnHeader.parse(i,a);n.push(l)}return new a(n,e.line.lineStartReference())}getChildren(){return[...this.columnsValue]}validate(e){}getColumnByIndex(e){return e>=0&&e<this.columns.length?this.columns[e]:null}}t.ValidationTableHeader=a},96387(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Dependencies=void 0;const r=n(63155),i=n(23107),s=n(70330),o=n(72100);t.Dependencies=class{get sortedNodes(){return this.sortedNodesValue}get dependencyNodes(){return this.dependencyNodesValue}get hasCircularReferences(){return this.circularReferences.length>0}get circularReferences(){return[...this.circularReferencesValue]}constructor(e){this.circularReferencesValue=[],this.nodesMap=new Map,this.nodeOccurrences=new Map,this.dependencyNodesValue=[],this.dependencyMap=new Map,this.sortedNodesValue=[],this.componentNodes=e,this.nodesToProcess=[...this.componentNodes.values]}build(){this.processNodes(),this.checkCircularDependencies(),this.sortedNodesValue=this.topologicalSort()}nodeAndDependencies(e){const t=this.dependencyMap.get(e.nodeName);return null==t?[]:[e,...this.flatten(t.dependencies)]}processNodes(){for(;this.nodesToProcess.length>0;){const e=this.nodesToProcess.shift(),t=this.processNode(e);this.dependencyNodesValue.push(t),this.dependencyMap.set(e.nodeName,t),this.nodesMap.set(e.nodeName,e)}}processNode(e){return this.increaseOccurrence(e),this.newDependencyNode(e)}increaseOccurrence(e){let t=e.nodeName;const n=this.nodeOccurrences.get(t);void 0!=n?this.nodeOccurrences.set(t,n+1):this.nodeOccurrences.set(t,1)}newDependencyNode(e){const t=this.getDependencies(e);return new r.DependencyNode(e.nodeName,e,t)}getDependencies(e){const t=new Array;return o.NodesWalker.walk(e,e=>this.processDependencies(e,t)),t}processDependencies(e,t){var n;let r=null===(n=(0,i.asHasNodeDependencies)(e))||void 0===n?void 0:n.getDependencies(this.componentNodes);if(null!=r)for(const i of r)this.validateDependency(t,i)}validateDependency(e,t){e.indexOf(t.nodeName)>=0||(this.nodesToProcess.indexOf(t)<0&&!this.nodesMap.has(t.nodeName)&&this.nodesToProcess.push(t),this.increaseOccurrence(t),e.push(t.nodeName))}checkCircularDependencies(){for(const e of this.dependencyNodes)this.circularReferencesValue.indexOf(e.node)>=0||this.isCircular(e,e)&&this.circularReferencesValue.push(e.node)}isCircular(e,t){for(const n of this.dependencyNodes)if(n!=t&&n.hasDependency(t)){if(e.name==n.name)return!0;if(this.isCircular(e,n))return!0}return!1}flatten(e){const t=[];return this.flattenNodes(t,e),this.sortedNodes.filter(e=>t.indexOf(e)>=0)}flattenNodes(e,t){for(const n of t){const t=s.Assert.notNull(this.dependencyMap.get(n),"dependencyNode");e.indexOf(t.node)>=0||(e.push(t.node),this.flattenNodes(e,t.dependencies))}}topologicalSort(){if(this.hasCircularReferences)return this.componentNodes.values;const e=[],t=[];for(this.nodeOccurrences.forEach((e,n)=>{1==e&&t.push(n)});t.length>0;){const n=t.shift(),r=s.Assert.notNull(this.nodesMap.get(n),"node"),i=s.Assert.notNull(this.dependencyMap.get(n),"dependencyNode");e.unshift(r),i.dependencies.forEach(e=>{const n=this.nodeOccurrences.get(e);if(void 0==n||n<1)return;let r=n-1;this.nodeOccurrences.set(e,r),1==r&&t.push(e)})}return e}}},96969(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LookUpRowFunction=void 0;const r=n(76107),i=n(32045),s=n(40693),o=n(78430);class a{constructor(e,t,n,r,i,s){this.discriminator=e,this.lookUpValue=t,this.discriminatorColumnArgument=n,this.defaultDiscriminatorColumn=r,this.searchColumnArgument=i,this.defaultSearchColumn=s}}class l extends r.TableFunction{get functionHelp(){return l.functionHelpValue}constructor(e){super(e)}getResultsType(e){return this.table?this.table.getRowType():null}validateArguments(e,t,n){if(!this.validateTable(e,n))return(0,o.newValidateMemberFunctionArgumentsFailed)();const r=l.getArgumentColumns(e,t,n);if(!r)return(0,o.newValidateMemberFunctionArgumentsFailed)();const i=this.getColumn(e,t,r.searchColumnArgument,r.defaultSearchColumn,n);if(null==i)return(0,o.newValidateMemberFunctionArgumentsFailed)();this.validateColumnValueType(e,t,r.lookUpValue,"Search",i,n);const a=this.validateDiscriminator(e,t,n,r),u=null!=r.discriminator?t[r.discriminator]:null,c=new s.LookUpRowFunctionCall(this.table.name.value,t[r.lookUpValue],u,i.name,a?a.name:null);return(0,o.newValidateMemberFunctionArgumentsSuccess)(c)}static getArgumentColumns(e,t,n){switch(t.length){case 1:return new a(null,0,null,null,null,0);case 2:return(0,i.instanceOfMemberAccessExpression)(t[1])?new a(null,0,null,null,1,0):new a(0,1,null,0,null,1);case 4:return new a(0,1,2,0,3,1);default:return e&&n&&e.logger.fail(n,"Invalid number of arguments. ".concat(l.functionHelpValue)),null}}}t.LookUpRowFunction=l,l.functionHelpValue="Arguments: TableName.LookUpRow(lookUpValue) or TableName.LookUpRow(lookUpValue, Table.SearchColumn)or TableName.LookUpRow(discriminator, lookUpValue)or TableName.LookUpRow(discriminator, lookUpValue, Table.DiscriminatorColumn, Table.SearchColumn)",l.functionName="LookUpRow"},97365(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTableCode=function(e){if(null==e)throw new Error("Component token not Table");const t=(0,i.tableClassName)(e.name.value),n=new s.CodeWriter(l.renderExpression);return n.openScope("function ".concat(t,"()")),function(e,t,n){var r;const i=u.Assert.notNull(t.header,"tableName.header");n.openScope("class "+e);for(const s of i.columns)n.startLine(s.name+" = "),(0,o.renderTypeDefaultExpression)(s.type,n),n.endLine(";");n.startLine("constructor(");for(let s=0;s<i.columns.length;s++){const e=i.columns[s];n.write(null!==(r=null===e||void 0===e?void 0:e.name)&&void 0!==r?r:""),s<i.columns.length-1&&n.write(", ")}n.openInlineScope(")");for(const s of i.columns)n.writeLine("this.".concat(s.name," = ").concat(s.name," != undefined ? ").concat(s.name," : this.").concat(s.name,";"));n.closeScope(),n.closeScope()}(a.LexyCodeConstants.rowType,e,n),function(e,t,n){n.openBrackets("const ".concat(a.LexyCodeConstants.valuesVariable," = "));for(const r of t.rows){n.startLine("new "+e+"(");for(let e=0;e<r.values.length;e++){const t=r.values[e].expression;(0,l.renderValueExpression)(t,n),e<r.values.length-1&&n.write(",")}n.endLine("),")}n.closeBrackets()}(a.LexyCodeConstants.rowType,e,n),n.openScope("return"),n.writeLine("".concat(a.LexyCodeConstants.rowType,": ").concat(a.LexyCodeConstants.rowType,",")),n.writeLine("Count: ".concat(a.LexyCodeConstants.valuesVariable,".length,")),n.writeLine("__values: ".concat(a.LexyCodeConstants.valuesVariable)),n.closeScope(";"),n.closeScope("();"),new r.GeneratedType(r.GeneratedTypeKind.Table,e,t,n.toString())};const r=n(13502),i=n(45375),s=n(69445),o=n(38184),a=n(2013),l=n(61388),u=n(70330)},97461(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DependencyGraphFactory=void 0;const r=n(96387);t.DependencyGraphFactory=class{static create(e){let t=new r.Dependencies(e);return t.build(),t}}},97903(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationColumnHeader=void 0,t.instanceOfValidationColumnHeader=o,t.asValidationColumnHeader=function(e){return o(e)?e:null};const r=n(59611),i=n(15459),s=n(5627);function o(e){return(null===e||void 0===e?void 0:e.nodeType)==i.NodeType.ValidationColumnHeader}class a extends r.Node{constructor(e,t){super(t),this.nodeType=i.NodeType.ValidationColumnHeader,this.name=e}static parse(e,t){return new a(e,t)}getChildren(){return[]}validate(e){const t=s.IdentifierPath.parseString(this.name);null==e.variableContext.getVariableTypeByPath(t,e)&&e.logger.fail(this.reference,"Unknown variable: '".concat(this.name,"'"))}}t.ValidationColumnHeader=a},98145(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConstantValueParser=void 0;const r=n(94874),i=n(92310),s=n(32045),o=n(84906);t.ConstantValueParser=class{static parse(e){const t=(0,i.asLiteralExpression)(e);if(null!=t)return this.parseLiteralExpression(t);const n=(0,s.asMemberAccessExpression)(e);return null!=n?this.parseMemberAccessExpression(n):(0,r.newConstantValueParseFailed)("Invalid expression variable. Expected: 'Variable = ConstantValue'")}static parseLiteralExpression(e){let t=new o.ConstantValue(e.literal.typedValue);return(0,r.newConstantValueParseSuccess)(t)}static parseMemberAccessExpression(e){return(0,r.newConstantValueParseSuccess)(new o.ConstantValue(e.memberAccessLiteral.value))}}},98400(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectAssignmentDefinition=void 0,t.instanceOfObjectAssignmentDefinition=a,t.asObjectAssignmentDefinition=function(e){return a(e)?e:null};const r=n(59715),i=n(15459),s=n(92272),o=n(99583);function a(e){return(null===e||void 0===e?void 0:e.nodeType)==i.NodeType.ObjectAssignmentDefinition}class l extends r.ParsableNode{get assignments(){return this.assignmentsValue}constructor(e,t,n){super(t),this.assignmentsValue=[],this.nodeType=i.NodeType.ObjectAssignmentDefinition,this.variable=e,this.assignmentDefinitionParser=n}parse(e){let t=this.assignmentDefinitionParser(e,this.variable);return null==t?this:(this.assignmentsValue.push(t),(0,r.instanceOfParsableNode)(t)?t:this)}getChildren(){return[...this.assignmentsValue]}validate(e){e.variableContext.containsPath(this.variable,e)||e.logger.fail(this.reference,"Variable '".concat(this.variable,"' not found."));const t=e.variableContext.getVariableTypeByPath(this.variable,e);(0,o.instanceOfDeclaredType)(t)||(0,s.instanceOfGeneratedType)(t)||e.logger.fail(this.reference,"Variable '".concat(this.variable,"' without assignment should be a object type, but is ").concat(t,"."))}flatten(e){for(const t of this.assignmentsValue)t.flatten(e)}}t.ObjectAssignmentDefinition=l},99583(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeclaredType=void 0,t.instanceOfDeclaredType=a,t.asDeclaredType=function(e){return a(e)?e:null};const r=n(73986),i=n(45014),s=n(88310),o=n(37954);function a(e){return(null===e||void 0===e?void 0:e.variableTypeName)==s.VariableTypeName.DeclaredType}class l extends r.ObjectType{constructor(e,t){super(),this.variableTypeName=s.VariableTypeName.DeclaredType,this.type=e,this.typeDefinition=t}getVariables(){return this.typeDefinition.variables.map(e=>new o.ObjectTypeVariable(e.name,e.variableType))}getVariable(e){const t=(0,i.firstOrDefault)(this.typeDefinition.variables,t=>t.name==e);return null!=t?new o.ObjectTypeVariable(t.name,t.variableType):null}getFunction(e){return null}memberType(e,t){const n=(0,i.firstOrDefault)(this.typeDefinition.variables,t=>t.name==e),r=null===n||void 0===n?void 0:n.type.variableType;return r||null}getDependencies(e){return[this.typeDefinition]}equals(e){return null!=e&&a(e)&&this.type==e.type}toString(){return this.type}}t.DeclaredType=l},99691(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExecutableFunction=void 0;const i=n(88074),s=n(71954),o=n(2013),a=r(n(51507)),l=n(38983),u=n(5627);class c{constructor(e,t,n){this.environment=e,this.functionReference=t,this.logger=n}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=this.getParameters(e),n=new i.ExecutionContext(this.logger),r=this.functionReference(this.environment,t,n);return new s.FunctionResult((0,l.deepCopy)(r),n.entries)}getParameters(e){let t={};if(null==e)return t;for(const n in e){const r=e[n];this.getParameterSetter(t,n)(this.changeType(r))}return t}getParameterSetter(e,t){let n=u.IdentifierPath.parseString(t),r=e;for(;n.hasChildIdentifiers;)r=e[n.rootIdentifier],n=n.childrenReference();return e=>r[n.rootIdentifier]=e}static create(e,t,n,r){const i="\nconst ".concat(o.LexyCodeConstants.parameterVariable," = new ").concat(o.LexyCodeConstants.environmentVariable,".").concat(t.name,".").concat(o.LexyCodeConstants.parametersType,"();\n").concat(o.LexyCodeConstants.environmentVariable,".").concat(t.name,".").concat(o.LexyCodeConstants.validateMethod,"(parameters);\n").concat(o.LexyCodeConstants.environmentVariable,".systemFunctions.populate(").concat(o.LexyCodeConstants.parameterVariable,", parameters);\nreturn ").concat(o.LexyCodeConstants.environmentVariable,".").concat(t.name,"(").concat(o.LexyCodeConstants.parameterVariable,", context);");n.logDebug("Execution code: ".concat(i));const s=new Function(o.LexyCodeConstants.environmentVariable,"parameters","context",i);return new c(e,s,r)}changeType(e){if(e instanceof Date)return new Date(e);if("number"===typeof e)return(0,a.default)(e);if("object"!==typeof e||null===e)return e;if(Array.isArray(e))return e.map(e=>this.changeType(e));const t={};return Object.keys(e).forEach(n=>{n.startsWith("__")||(t[n]=this.changeType(e[n]))}),t}}t.ExecutableFunction=c},99989(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VariablesMapping=t.Mapping=void 0,t.mapToUsedVariable=o;const r=n(69536),i=n(5627),s=n(70330);function o(e){return t=>{const n=i.IdentifierPath.parseString(t.variableName);return new r.VariableUsage(n,null,t.variableType,t.variableSource,e)}}t.Mapping=class{constructor(e,t,n){this.variableName=e,this.variableType=t,this.variableSource=n}};t.VariablesMapping=class{constructor(e,t){this.mapping=[],this.values=t,this.mappingType=s.Assert.notNull(e,"generatedType"),this.mapping=s.Assert.notNull(t,"mapping")}uedVariables(e){const t=o(e);return this.mapping.map(t)}}}}]);
//# sourceMappingURL=4926.50683a82.chunk.js.map